# X-ray: متتبع جرعات mSv

هذا المشروع هو تطبيق ويب شامل تم بناؤه باستخدام Vue 3 و Vite، وهو مصمم للمساعدة في إدارة وتتبع التعرض للإشعاع الناتج عن الفحوصات الطبية. يوفر وظائف لكل من المرضى والأطباء لمراقبة الجرعات، والحصول على توصيات فحوصات مدعومة بالذكاء الاصطناعي، وإدارة سجلات المرضى. تم تصميم كل جزء من هذا التطبيق، من هيكله الأساسي إلى مكوناته الفردية وإدارة البيانات، ليكون واضحًا وقابلًا للصيانة وسهل الفهم.

## هيكل المشروع

يتبع التطبيق هيكل مشروع Vue.js قياسي، مع فصل واضح للمهام، مما يجعله سهل التصفح والفهم والتعديل. فيما يلي تفصيل لكل مجلد وملف مهم:

```
.
├── public/                 # الأصول الثابتة، مثل أيقونة التطبيق والموارد الأخرى غير المعالجة.
├── src/                    # قلب التطبيق، يحتوي على كل الكود المصدري.
│   ├── assets/             # الأصول العامة مثل ملفات CSS (base, index, main) والصور الشائعة (logo.svg).
│   │   ├── base.css        # الأنماط الأساسية، غالبًا ما تحتوي على إعادة تعيين أساسية لـ CSS أو متغيرات عامة.
│   │   ├── index.css       # أنماط أساسية على مستوى التطبيق.
│   │   ├── logo.svg        # شعار التطبيق الرئيسي بصيغة SVG.
│   │   └── main.css        # ورقة الأنماط الرئيسية للتخطيط العام والتصميم.
│   ├── components/         # مكونات Vue القابلة لإعادة الاستخدام والمستخدمة في جميع أنحاء التطبيق لبناء واجهات المستخدم.
│   │   ├── ConfirmDeleteModal.vue        # نافذة منبثقة متعددة الاستخدامات لتأكيد عمليات الحذف.
│   │   ├── HelpModal.vue                 # تعرض محتوى إعلاميًا، مثل المساعدة أو الإرشادات.
│   │   ├── HistoryTable.vue              # مكون جدول لعرض قوائم سجلات الفحوصات الطبية.
│   │   ├── InfoModal.vue                 # يوفر معلومات مهمة حول التعرض للإشعاع وحدوده.
│   │   ├── MsvCounter.vue                # يعرض ويتتبع جرعة الإشعاع السنوية مقابل الحد المسموح به.
│   │   ├── PatientDetailsModal.vue       # يعرض تفاصيل شاملة وسجل فحوصات المريض.
│   │   ├── PatientFormModal.vue          # يستخدم لإضافة أو تعديل ملفات المرضى الشخصية.
│   │   ├── PatientTable.vue              # يسرد المرضى المُدارين ويوفر إجراءات (عرض، تعديل، حذف، توصية).
│   │   ├── PersonalScanFormModal.vue     # نافذة منبثقة مخصصة للمستخدمين لإدارة سجلات الفحص الخاصة بهم.
│   │   ├── ProfileFormModal.vue          # يسمح للمستخدمين بتحديث معلومات ملفهم الشخصي.
│   │   ├── ScanFormModal.vue             # نافذة منبثقة قابلة للتكوين للأطباء لإضافة أو تعديل سجلات فحص المرضى.
│   │   ├── TheHeader.vue                 # مكون الترويسة الثابت الذي يظهر في جميع العروض الرئيسية.
│   │   └── icons/                        # مجلد مخصص لمكونات أيقونات SVG، مما يعزز قابلية إعادة الاستخدام.
│   │       ├── IconCommunity.vue
│   │       ├── IconDocumentation.vue
│   │       ├── IconEcosystem.vue
│   │       ├── IconSupport.vue
│   │       └── IconTooling.vue
│   ├── router/             # يكوّن Vue Router، ويدير التنقل بين العروض المختلفة.
│   │   └── index.js        # يحدد جميع مسارات التطبيق ومكونات العرض المقابلة لها.
│   ├── stores/             # يحتوي على مخازن Pinia لإدارة الحالة المركزية عبر التطبيق.
│   │   ├── auth.js         # يدير حالة مصادقة المستخدم، تسجيل الدخول، تسجيل الخروج، والبيانات المتعلقة بالمستخدم.
│   │   ├── counter.js      # مخزن Pinia بسيط للعد الرقمي، يوضح إدارة الحالة الأساسية.
│   │   └── database.js     # يعالج جميع التفاعلات مع قاعدة بيانات الواجهة الخلفية لاسترداد البيانات ومعالجتها.
│   ├── views/              # يمثل الصفحات أو الشاشات الرئيسية للتطبيق.
│   │   ├── DashboardView.vue         # المحور الرئيسي بعد تسجيل الدخول، يقدم التنقل وإكمال الملف الشخصي.
│   │   ├── PatientsView.vue          # (خاص بالطبيب) يدير سجلات المرضى، بما في ذلك الإضافة والعرض والتعديل.
│   │   ├── ProfileView.vue           # يسمح للمستخدمين بعرض/تحديث ملفهم الشخصي وإدارة سجل الفحوصات الشخصية.
│   │   ├── RecommendView.vue         # يقدم توصيات فحص مدعومة بالذكاء الاصطناعي بناءً على مدخلات المستخدم.
│   │   ├── ResetPasswordView.vue     # يسهل إعادة تعيين كلمات المرور المنسية للمستخدمين.
│   │   ├── SigninView.vue            # يعالج تسجيل دخول المستخدم بالبريد الإلكتروني/كلمة المرور أو تسجيل الدخول عبر Google.
│   │   └── SignupView.vue            # يدير تسجيل المستخدمين الجدد وإنشاء الحسابات.
│   ├── App.vue             # مكون Vue الجذري الذي ينسق تخطيط التطبيق العام والوظائف العالمية.
│   └── main.js             # نقطة الدخول للتطبيق، حيث يتم تهيئة Vue و Pinia و Vue Router.
├── .gitignore              # يحدد الملفات التي يجب تجاهلها عمدًا بواسطة Git.
├── 404.html                # صفحة خطأ 404 مخصصة تُعرض عند عدم العثور على مسار.
├── eslint.config.js        # إعدادات لـ ESLint، تحدد جودة الكود وقواعد الأسلوب.
├── index.html              # ملف HTML الرئيسي الذي يعمل كنقطة دخول لتطبيق الويب.
├── jsconfig.json           # إعدادات لخدمات لغة JavaScript في المحررات مثل VS Code.
├── package.json            # يحتوي على بيانات المشروع الوصفية والاعتماديات وسكربتات npm.
├── package-lock.json       # يسجل شجرة الاعتماديات الدقيقة المستخدمة، مما يضمن عمليات تثبيت متسقة.
├── vite.config.js          # ملف إعدادات لـ Vite، أداة البناء المستخدمة في المشروع.
└── README.md               # هذا الملف نفسه، يوفر توثيقًا شاملاً للمشروع.
```

## العروض ومكوناتها

يفصّل هذا القسم كل عرض رئيسي في التطبيق، ويصف الغرض منه، والمكونات الرئيسية التي يستخدمها، وتفاعلاته مع مخازن Pinia لإدارة البيانات. فهم هذه العروض أمر حاسم لفهم تدفقات المستخدم في التطبيق.

### 1. `SignupView.vue`

**الغرض:** يعالج هذا العرض تسجيل المستخدمين الجدد، مما يسمح لهم بإنشاء حساب باستخدام بريدهم الإلكتروني وكلمة المرور أو عن طريق التسجيل عبر Google. إنه بمثابة بوابة للمستخدمين الجدد للوصول إلى التطبيق.

**المكونات المستخدمة والوظائف:**
- **عناصر النموذج (HTML الأصلي):** تُستخدم حقول الإدخال القياسية في HTML للبريد الإلكتروني وكلمة المرور وتأكيد كلمة المرور لجمع بيانات اعتماد المستخدم بشكل آمن.
- **الأزرار:** تسهل الأزرار المخصصة التسجيل القائم على البريد الإلكتروني والتسجيل القائم على Google OAuth، مما يوفر خيارات تسجيل مرنة.
- **`useAuthStore` (مخزن Pinia):** هذا المخزن المركزي مسؤول عن إدارة جميع حالات مصادقة المستخدم. يغلّف منطق التسجيل المعقد، ويتعامل مع الاتصال بخدمات المصادقة الخلفية، ويخزن الأخطاء وحالات التحميل المتعلقة بالمصادقة لتقديم ملاحظات فورية للمستخدم أثناء عملية التسجيل.

### 2. `SigninView.vue`

**الغرض:** يسمح هذا العرض للمستخدمين الحاليين بتسجيل الدخول بأمان إلى حساباتهم باستخدام بريدهم الإلكتروني المسجل وكلمة المرور أو عن طريق تسجيل الدخول عبر حساب Google الخاص بهم. كما يوفر روابط أساسية لاسترداد الحساب وتسجيل المستخدمين الجدد.

**المكونات المستخدمة والوظائف:**
- **عناصر النموذج (HTML الأصلي):** تسهل حقول الإدخال القياسية في HTML للبريد الإلكتروني وكلمة المرور جمع بيانات الاعتماد.
- **الأزرار:** أزرار مميزة لتسجيل الدخول القائم على البريد الإلكتروني وتسجيل الدخول القائم على Google OAuth لتبسيط عملية تسجيل الدخول.
- **الروابط:**
    - رابط "هل نسيت كلمة المرور؟" يوجه المستخدمين مباشرة إلى `ResetPasswordView` لبدء استعادة كلمة المرور.
    - رابط "ليس لديك حساب؟" يوجه المستخدمين الجدد إلى `SignupView` للتسجيل.
- **`useAuthStore` (مخزن Pinia):** هذا المخزن حاسم لإدارة حالة مصادقة المستخدم. يتعامل مع منطق تسجيل الدخول الأساسي، ويتفاعل مع خدمات المصادقة، ويخزن جميع الأخطاء ورسائل النجاح المتعلقة بالمصادقة، مما يوفر ملاحظات واضحة للمستخدم.

### 3. `ResetPasswordView.vue`

**الغرض:** يوفر هذا العرض آلية آمنة للمستخدمين لإعادة تعيين كلمات المرور المنسية. يمكّن المستخدمين من طلب إرسال رابط إعادة تعيين كلمة المرور إلى عنوان بريدهم الإلكتروني المسجل، مما يعزز أمان الحساب وسهولة الاستخدام.

**المكونات المستخدمة والوظائف:**
- **عناصر النموذج (HTML الأصلي):** يُستخدم حقل إدخال مخصص لعنوان البريد الإلكتروني للمستخدم لتحديد الحساب لإعادة تعيين كلمة المرور.
- **الزر:** زر مخصص يبدأ عملية إرسال رابط إعادة تعيين كلمة المرور إلى البريد الإلكتروني المقدم.
- **الرابط:** يوفر رابط "هل تذكرت كلمة مرورك؟" طريقة ملائمة للمستخدمين للعودة إلى `SigninView` إذا تذكروا بيانات اعتمادهم.
- **`useAuthStore` (مخزن Pinia):** هذا المخزن أساسي لوظيفة إعادة تعيين كلمة المرور. يدير حالة طلب إعادة تعيين كلمة المرور، ويتواصل مع الواجهة الخلفية لإرسال رابط إعادة التعيين، ويعالج أي حالات تحميل أو خطأ مرتبطة بذلك.

### 4. `DashboardView.vue`

**الغرض:** يعمل `DashboardView.vue` كصفحة هبوط رئيسية فور تسجيل دخول المستخدم بنجاح. يعمل كمركز شخصي، يرحب بالمستخدم ويوفر خيارات تنقل سهلة إلى الميزات الرئيسية الأخرى للتطبيق. كما أنه يحث المستخدمين ديناميكيًا على إكمال ملفاتهم الشخصية إذا لزم الأمر.

**المكونات المستخدمة والوظائف:**
- **نافذة إكمال الملف الشخصي (مضمنة):** مكون نافذة منبثقة يتم عرضه شرطيًا ويظهر بشكل بارز إذا تم اكتشاف أن بيانات ملف تعريف المستخدم غير مكتملة. توجه هذه النافذة المستخدمين لإدخال معلومات أساسية مثل دورهم (طبيب/مريض)، وتاريخ الميلاد، والجنس، والحساسية، والتاريخ الطبي، مما يضمن ملف تعريف مستخدم كامل للحصول على توصيات ووظائف دقيقة.
- **بطاقات التنقل:** توفر بطاقات تفاعلية وجذابة بصريًا روابط مباشرة إلى عروض التطبيق الهامة الأخرى:
    - `RecommendView`: للوصول إلى توصيات الفحص المدعومة بالذكاء الاصطناعي.
    - `PatientsView` (يتم عرضها شرطيًا للأطباء): تسمح للأطباء بإدارة سجلات مرضاهم.
    - `ProfileView`: للمستخدمين لعرض وتحديث ملفهم الشخصي وسجل الفحوصات.
- **زر تسجيل الخروج:** زر واضح وسهل الوصول إليه يسمح للمستخدم بتسجيل الخروج بأمان من جلسته الحالية.
- **`useAuthStore` (مخزن Pinia):** يُستخدم هذا المخزن على نطاق واسع للوصول إلى حالة مصادقة المستخدم الحالية ومراقبتها، ودورهم المخصص (طبيب أو مريض)، وحالة اكتمال ملفهم الشخصي. يتيح ذلك العرض الديناميكي لخيارات التنقل ونافذة إكمال الملف الشخصي.
- **`useDatabaseStore` (مخزن Pinia):** يُستخدم لحفظ بيانات الملف الشخصي الأولية التي تم التقاطها من خلال نافذة إكمال الملف الشخصي، مما يضمن حفظ معلومات المستخدم الأساسية في قاعدة البيانات.

### 5. `RecommendView.vue`

**الغرض:** يمكّن هذا العرض المستخدمين (كل من المرضى والأطباء) من الحصول على توصيات مدعومة بالذكاء الاصطناعي للفحوصات الطبية. يجمع بدقة مدخلات متنوعة بما في ذلك تفاصيل المريض، وجرعات الإشعاع الحالية، وحالة الحمل، ونوع الفحص المحدد قيد الدراسة. يتمتع الأطباء أيضًا بالقدرة على توفير سياق إضافي للتعرض المهني، مما يتيح توصيات مخصصة للغاية.

**المكونات المستخدمة والوظائف:**
- **مبدل الوضع:** مفتاح تبديل سهل الاستخدام يسمح بالتبديل بين "لنفسي" (للحصول على توصيات فحص شخصية) و "لمريض آخر" (مصمم خصيصًا للأطباء للحصول على توصيات عامة لمرضاهم).
- **عناصر النموذج (HTML الأصلي):** مجموعة شاملة من حقول الإدخال تُستخدم لالتقاط جميع نقاط البيانات اللازمة:
    - تفاصيل المريض: تاريخ الميلاد، الجنس، حالة الحمل، تاريخ الولادة المتوقع، التاريخ الطبي، الأعراض الحالية، والحساسية.
    - نوع الفحص: النوع المحدد للفحص الطبي الذي يُطلب التوصية بشأنه.
- **مناطق النص (Textareas):** مناطق إدخال أكبر مخصصة للتاريخ الطبي المفصل، والأعراض الحالية، وحقل خاص للأطباء لإضافة أي سياق إضافي للتعرض المهني.
- **عرض نتيجة التنبؤ:** يقدم هذا القسم ديناميكيًا نص التوصية المدعوم بالذكاء الاصطناعي، مما يوفر إرشادات واضحة. كما يعرض جرعة المريض التقديرية، وإذا كان ذلك ممكنًا، جرعة الطبيب المهنية التقديرية، إلى جانب أي تحذيرات أو إرشادات ذات صلة بالفحص الموصى به.
- **`useAuthStore` (مخزن Pinia):** يُستخدم لاسترداد دور المستخدم الحالي (لتحديد أذونات العرض) ومعرفه الفريد، وهو أمر حاسم لتخصيص التوصيات واسترجاع البيانات.
- **`useDatabaseStore` (مخزن Pinia):** ضروري لجلب بيانات مريض معين وجرعة الفحص التراكمية الخاصة به من الواجهة الخلفية، وهي مدخلات حيوية لمحرك توصيات الذكاء الاصطناعي.

### 6. `PatientsView.vue`

**الغرض:** (خاص بالطبيب) هذا العرض الحاسم مصمم حصريًا للأطباء لإدارة سجلات مرضاهم بكفاءة. يوفر واجهة مركزية لإضافة مرضى جدد، وعرض تفاصيل المرضى الحاليين (بما في ذلك سجل الفحوصات الشامل)، وتعديل معلومات المريض، وحذف سجلات المرضى بشكل آمن. علاوة على ذلك، فإنه يوفر مسارًا مباشرًا للحصول على توصية فحص لأي مريض معين تحت رعايتهم.

**المكونات المستخدمة والوظائف:**
- **`PatientFormModal.vue`:** يتم استخدام مكون النافذة المنبثقة هذا ديناميكيًا لوظيفتين أساسيتين: تمكين الأطباء من إضافة ملفات تعريف مرضى جديدة تمامًا بكل التفاصيل ذات الصلة، أو تعديل المعلومات الحالية لمريض محدد.
- **`PatientDetailsModal.vue`:** عند اختيار مريض، يوفر مكون النافذة المنبثقة هذا عرضًا شاملاً لمعلومات ملفه الشخصي المفصل، إلى جانب سجل زمني كامل لجميع فحوصاته الطبية.
- **`ConfirmDeleteModal.vue`:** نافذة تأكيد عامة ولكنها حاسمة تُستخدم لضمان تأكيد الأطباء المتعمد لحذف سجلات المرضى، مما يمنع فقدان البيانات العرضي.
- **`PatientTable.vue`:** يعرض مكون الجدول القوي هذا بكفاءة قائمة مجزأة الصفحات لجميع المرضى المُدارين، ويقدم معلومات أساسية في لمحة. كما أنه يدمج أزرار الإجراءات (عرض، تعديل، حذف، توصية) بجوار كل إدخال مريض، مما يتيح التفاعل المباشر وتكامل سير العمل.
- **`useAuthStore` (مخزن Pinia):** يسترجع معرف المستخدم الفريد للطبيب الذي سجل الدخول، وهو أمر ضروري لجلب المرضى المرتبطين به فقط وضمان خصوصية البيانات.
- **`useDatabaseStore` (مخزن Pinia):** يتعامل هذا المخزن مع جميع عمليات الإنشاء والقراءة والتحديث والحذف (CRUD) المتعلقة بملفات تعريف المرضى. وهو مسؤول أيضًا عن جلب قوائم المرضى الشاملة وسجلات الفحص المرتبطة بها من قاعدة بيانات الواجهة الخلفية.

### 7. `ProfileView.vue`

**الغرض:** تم تصميم هذا العرض لجميع المستخدمين لعرض وتحديث معلومات ملفهم الشخصي. بالإضافة إلى ذلك، فإنه يوفر قسمًا مخصصًا لإدارة سجل الفحوصات الطبية الفردية الخاصة بهم. يمكن للمرضى إضافة سجلات الفحص الخاصة بهم وتعديلها وحذفها مباشرة، مع الحفاظ على السيطرة الكاملة على بياناتهم الصحية الشخصية.

**المكونات المستخدمة والوظائف:**
- **`ProfileFormModal.vue`:** مكون نافذة منبثقة مصمم خصيصًا للمستخدمين لتحديث تفاصيل ملفهم الشخصي، مثل معلومات الاتصال والتاريخ الطبي.
- **`PersonalScanFormModal.vue`:** يسمح مكون النافذة المنبثقة هذا للمستخدمين الأفراد (المرضى) بإضافة سجلات فحص طبي جديدة أو تعديل السجلات الحالية المرتبطة بملفهم الشخصي.
- **`ConfirmDeleteModal.vue`:** نافذة تأكيد متعددة الاستخدامات تُستخدم هنا للحصول على تأكيد صريح من المستخدم قبل حذف أي سجلات فحص شخصية بشكل دائم.
- **`HistoryTable.vue`:** مكون جدول قابل لإعادة الاستخدام بدرجة عالية، يتم استخدامه في هذا العرض لعرض سجل الفحوصات الطبية الشخصي للمستخدم بأناقة. يوفر خيارات واضحة لتعديل أو حذف إدخالات الفحص الفردية.
- **`useAuthStore` (مخزن Pinia):** يُستخدم هذا المخزن بشكل أساسي للوصول إلى معلومات ملف تعريف المستخدم الحالي لعرضها وتسهيل تحديثات تفاصيل ملفه الشخصي.
- **`useDatabaseStore` (مخزن Pinia):** يتعامل مع جميع عمليات الإنشاء والقراءة والتحديث والحذف (CRUD) لسجلات الفحص الشخصية وهو مسؤول عن جلب سجل الفحص الشخصي الكامل للمستخدم من قاعدة البيانات.

## المكونات القابلة لإعادة الاستخدام

يقدم هذا القسم تفاصيل متعمقة حول مكونات Vue القابلة لإعادة الاستخدام الموجودة في مجلد `src/components`. تم تصميم هذه المكونات بدقة لتكون معيارية وقابلة للتكوين بدرجة عالية وسهلة الاستخدام عبر عروض مختلفة، مما يعزز بشكل كبير الاتساق ويقلل من تكرار الكود ويبسط التطوير.

### 1. `ConfirmDeleteModal.vue`

**الغرض:** هذا مكون نافذة منبثقة عام وقابل لإعادة الاستخدام بدرجة عالية مصمم لتوفير خطوة تأكيد حاسمة قبل تنفيذ إجراء حذف مدمر. تسمح قابليته للتكيف باستخدامه لتأكيد حذف عناصر بيانات مختلفة (مثل المرضى، الفحوصات) في جميع أنحاء التطبيق، مما يعزز سلامة البيانات ويمنع عمليات الإزالة العرضية.

**Props الرئيسية:**
- `show` (Boolean): يتحكم في رؤية النافذة المنبثقة. اضبطه على `true` للعرض، و `false` للإخفاء.
- `title` (String): العنوان المعروض في الجزء العلوي من النافذة، يشير عادةً إلى نوع الحذف الذي يتم تأكيده (على سبيل المثال، "تأكيد حذف المريض").
- `message` (String): رسالة مفصلة معروضة داخل النافذة، تشرح ما سيتم حذفه وتطلب التأكيد (على سبيل المثال، "هل أنت متأكد أنك تريد حذف سجل هذا المريض؟ لا يمكن التراجع عن هذا الإجراء.").

**Emits الرئيسية:**
- `close`: يُصدر عندما يلغي المستخدم الحذف أو يغلق النافذة دون تأكيد.
- `confirm`: يُصدر عندما يؤكد المستخدم صراحةً إجراء الحذف، مما يؤدي إلى تشغيل منطق الحذف الفعلي في المكون الأصل.

### 2. `HelpModal.vue`

**الغرض:** تم تصميم مكون النافذة المنبثقة هذا لعرض معلومات مفيدة أو إرشادات أو أسئلة متكررة للمستخدم. يمكن ملؤه بمحتوى ديناميكي لتقديم مساعدة حساسة للسياق أو إرشادات عامة للتطبيق. عادةً ما يتم الحصول على محتوى هذه النافذة من `src/helpContent.js`.

**Props الرئيسية:**
- `show` (Boolean): يتحكم في رؤية النافذة المنبثقة.
- `currentLanguage` (String): يحدد إصدار اللغة لمحتوى المساعدة الذي سيتم عرضه، مما يدعم التدويل.

**Emits الرئيسية:**
- `close`: يُصدر عندما يغلق المستخدم النافذة المنبثقة.

### 3. `HistoryTable.vue`

**الغرض:** مكون جدول متعدد الاستخدامات مصمم بدقة لعرض قوائم سجلات الفحوصات الطبية. تسمح مرونته بتكوينه لسياقات مختلفة: عرض شخصي (للمرضى) يعرض تفاصيل محدودة، أو عرض طبيب أكثر شمولاً (للمهنيين الطبيين) يتضمن أسماء المرضى ومعلومات الجرعات الخاصة بالطبيب.

**Props الرئيسية:**
- `scans` (Array of scan objects): مصفوفة بيانات الفحص التي سيتم عرضها في الجدول.
- `isLoading` (Boolean): يشير إلى ما إذا كانت بيانات الفحص قيد التحميل حاليًا، مما يسمح بعرض مؤشرات التحميل.
- `isPersonalView` (Boolean): علامة تعدل أعمدة الجدول وعرضه. إذا كانت `true`، فإنه يعرض فقط نوع الفحص والتاريخ والسبب وجرعة المريض. إذا كانت `false` (عرض الطبيب)، فإنه يتضمن أيضًا اسم المريض والجرعة المهنية للطبيب.

**Emits الرئيسية:**
- `edit`: يُصدر عند تشغيل إجراء "تعديل" لسجل فحص معين، وعادةً ما يمرر كائن الفحص إلى المكون الأصل.
- `delete`: يُصدر عند تشغيل إجراء "حذف" لسجل فحص، مما يشير إلى المكون الأصل لبدء تأكيد الحذف.

### 4. `InfoModal.vue`

**الغرض:** يعمل مكون النافذة المنبثقة هذا على عرض محتوى معلوماتي حاسم يتعلق بالوعي بالتعرض للإشعاع وحدود الجرعات السنوية الموصى بها دوليًا لفئات مختلفة من الأفراد (مثل المهنيين الطبيين، والجمهور العام، والعاملات الحوامل). يدعم عرض المحتوى بلغات متعددة لضمان الوصول الواسع.

**Props الرئيسية:**
- `show` (Boolean): يتحكم في رؤية النافذة المنبثقة.
- `currentLanguage` (String): يحدد اللغة للمحتوى المعلوماتي (على سبيل المثال، 'en' للإنجليزية، 'ar' للعربية).

**Emits الرئيسية:**
- `close`: يُصدر عند إغلاق النافذة من قبل المستخدم.

### 5. `MsvCounter.vue`

**الغرض:** تم تصميم هذا المكون الديناميكي لعرض جرعة الإشعاع السنوية للمستخدم (أو المهنية للطبيب) بالمللي سيفرت (mSv) بشكل مرئي. يوفر مقارنة واضحة مع حد الجرعة السنوي المحدد مسبقًا، ويتميز بشريط تقدم متجاوب يتغير لونه بشكل بديهي (على سبيل المثال، أخضر للآمن، أصفر للتحذير، أحمر للخطر) بناءً على الجرعة الحالية بالنسبة للحد المحدد، مما يوفر ملاحظات بصرية فورية على مستويات التعرض.

**Props الرئيسية:**
- `currentMsv` (Number): جرعة الإشعاع المتراكمة الحالية للمستخدم أو المريض.
- `yearlyLimit` (Number): الحد الأقصى المسموح به لجرعة الإشعاع السنوية المحددة مسبقًا.
- `currentLanguage` (String): إعداد اللغة النشط للنص المعروض داخل العداد.
- `isLoading` (Boolean): يشير إلى ما إذا كانت بيانات mSv قيد الجلب حاليًا، وهو مفيد لعرض حالات التحميل.

### 6. `PatientDetailsModal.vue`

**الغرض:** هذه نافذة منبثقة شاملة يستخدمها الأطباء حصريًا للحصول على فهم كامل لملف تعريف مريض محدد وسجل فحوصاته الطبية الكامل. تعمل كنقطة مركزية يمكن للأطباء من خلالها إضافة فحوصات جديدة لذلك المريض بسلاسة، أو تعديل/حذف سجلات الفحص الحالية.

**Props الرئيسية:**
- `show` (Boolean): يتحكم في رؤية النافذة المنبثقة.
- `patient` (Object): كائن المريض الكامل الذي سيتم عرض تفاصيله وفحوصاته.

**Emits الرئيسية:**
- `close`: يُصدر عند إغلاق النافذة المنبثقة.

**المكونات الفرعية المستخدمة:**
- **`ScanFormModal.vue`:** مدمج داخل هذه النافذة لتسهيل إضافة أو تعديل سجلات الفحص الفردية للمريض المعروض.
- **`ConfirmDeleteModal.vue`:** يُستخدم لتأمين عملية الحذف لأي من سجلات فحص المريض، ويتطلب تأكيدًا صريحًا.

### 7. `PatientFormModal.vue`

**الغرض:** مكون نافذة منبثقة عالي الوظائف يستخدمه الأطباء بشكل أساسي إما لإدخال ملفات تعريف مرضى جدد أو لتعديل التفاصيل الديموغرافية والطبية الحالية للمرضى الحاليين بدقة. يتضمن ذلك معلومات حاسمة مثل الاسم وتاريخ الميلاد والجنس وحالة الحمل والتاريخ الطبي الشامل والحساسية المعروفة.

**Props الرئيسية:**
- `show` (Boolean): يتحكم في رؤية النافذة المنبثقة.
- `patient` (Object / Null): إذا كان `null`، تكون النافذة في وضع "إضافة مريض جديد". إذا تم توفير كائن `patient`، تكون في وضع "تعديل مريض"، وتملأ النموذج مسبقًا بالبيانات الحالية.
- `isSaving` (Boolean): يشير إلى ما إذا كانت بيانات النموذج قيد الحفظ حاليًا في قاعدة البيانات، وهو مفيد لتعطيل الأزرار وإظهار مؤشرات التحميل.

**Emits الرئيسية:**
- `close`: يُصدر عند إغلاق النافذة دون حفظ.
- `save`: يُصدر عند تأكيد إجراء "حفظ"، وعادةً ما يمرر كائن المريض المحدث إلى المكون الأصل لحفظه.

### 8. `PatientTable.vue`

**الغرض:** هذا مكون جدول مخصص وفعال مصمم للأطباء لعرض وإدارة قائمة مجزأة الصفحات لجميع مرضاهم المسجلين. يوفر نظرة عامة واضحة ومنظمة لمعلومات المريض ويدمج أزرار إجراءات مباشرة لعرض تفاصيل المريض الشاملة، وتعديل الملفات الشخصية، وحذف السجلات، وبدء توصيات الفحص لمرضى محددين.

**Props الرئيسية:**
- `patients` (Array of patient objects): مصفوفة بيانات المرضى التي سيتم عرضها في الجدول.
- `isLoading` (Boolean): يشير إلى ما إذا كانت بيانات المريض قيد الجلب حاليًا من قاعدة البيانات.

**Emits الرئيسية:**
- `view`: يُصدر عند النقر على زر "عرض" لمريض، وعادةً ما يفتح `PatientDetailsModal.vue`.
- `edit`: يُصدر عند النقر على زر "تعديل"، وعادةً ما يفتح `PatientFormModal.vue` للمريض المحدد.
- `delete`: يُصدر عند النقر على زر "حذف"، مما يطالب بالتأكيد عبر `ConfirmDeleteModal.vue`.
- `recommend`: يُصدر لتشغيل التنقل إلى `RecommendView.vue` مع سياق المريض المحدد.

### 9. `PersonalScanFormModal.vue`

**الغرض:** تم تصميم هذه النافذة المنبثقة خصيصًا للمستخدمين الأفراد (المرضى) لإضافة سجلات فحص طبي شخصية جديدة أو لتعديل السجلات الحالية. تسهل إدخال تفاصيل الفحص الأساسية مثل نوع الفحص والتاريخ وسبب الفحص وأي ملاحظات إضافية. الميزة الرئيسية هي قدرتها على تقدير جرعة الإشعاع للمريض تلقائيًا إذا لم يتم توفيرها يدويًا، مما يبسط تتبع الجرعات للمرضى.

**Props الرئيسية:**
- `show` (Boolean): يتحكم في رؤية النافذة المنبثقة.
- `scan` (Object / Null): إذا كان `null`، تكون النافذة في وضع "إضافة فحص جديد". إذا تم توفير كائن `scan`، تكون في وضع "تعديل فحص"، وتملأ النموذج مسبقًا بالبيانات الحالية.
- `isSaving` (Boolean): يشير إلى ما إذا كانت بيانات الفحص قيد الحفظ حاليًا.

**Emits الرئيسية:**
- `close`: يُصدر عند إغلاق النافذة دون حفظ.
- `save`: يُصدر عند تأكيد إجراء "حفظ"، وعادةً ما يمرر كائن الفحص الجديد أو المحدث إلى المكون الأصل لحفظه.

### 10. `ProfileFormModal.vue`

**الغرض:** يسمح مكون النافذة المنبثقة هذا للمستخدمين بعرض وتحديث معلومات ملفهم الشخصي بسهولة. يتضمن ذلك تفاصيل حاسمة مثل دورهم المحدد داخل التطبيق (على سبيل المثال، طبيب، مريض)، وتاريخ الميلاد، والجنس، وحالة الحمل، والحساسية المعروفة، والتاريخ الطبي الشامل. يعمل كنقطة مركزية للمستخدمين للحفاظ على بيانات شخصية دقيقة ومحدثة.

**Props الرئيسية:**
- `show` (Boolean): يتحكم في رؤية النافذة المنبثقة.
- `profileData` (Object): كائن ملف تعريف المستخدم الحالي، يُستخدم لملء حقول النموذج مسبقًا للتعديل.

**Emits الرئيسية:**
- `close`: يُصدر عند إغلاق النافذة دون حفظ التغييرات.
- `save`: يُصدر عند تأكيد إجراء "حفظ"، وعادةً ما يمرر `profileData` المحدث إلى المكون الأصل لحفظه.

### 11. `ScanFormModal.vue`

**الغرض:** هذه نافذة منبثقة قابلة للتكوين بدرجة عالية ومتعددة الاستخدامات يستخدمها الأطباء بشكل أساسي لإضافة سجلات فحص جديدة بدقة أو لتعديل السجلات الحالية لمرضاهم. تلتقط مجموعة شاملة من التفاصيل بما في ذلك نوع الفحص، وتاريخ الفحص، وجرعات المريض والطبيب المهنية (مع توفر خيارات تقدير ذكية بالذكاء الاصطناعي)، وسبب الفحص، وملاحظات إضافية، وسياق مهني محدد للطبيب إذا كان ذا صلة. مرونتها تجعلها أداة قوية لإدارة سجلات الفحص المفصلة.

**Props الرئيسية:**
- `show` (Boolean): يتحكم في رؤية النافذة المنبثقة.
- `scan` (Object / Null): إذا كان `null`، تكون النافذة في وضع "إضافة فحص جديد". إذا تم توفير كائن `scan`، تكون في وضع "تعديل فحص".
- `isSaving` (Boolean): يشير إلى ما إذا كانت بيانات الفحص قيد الحفظ حاليًا.
- `patient` (Object): كائن المريض الحالي الذي تتم إدارة سجل الفحص له. هذا السياق حاسم لربط الفحوصات بشكل صحيح.

**Emits الرئيسية:**
- `close`: يُصدر عند إغلاق النافذة دون حفظ.
- `save`: يُصدر عند تأكيد إجراء "حفظ"، وعادةً ما يمرر كائن الفحص الجديد أو المحدث إلى المكون الأصل لحفظه.

### 12. `TheHeader.vue`

**الغرض:** يعمل مكون `TheHeader.vue` كترويسة رئيسية ثابتة تُعرض بشكل بارز في جميع العروض الرئيسية للتطبيق. يوفر علامة تجارية متسقة ووظائف عالمية أساسية. يتضمن عادةً عنوان التطبيق، ومفتاح تبديل لاختيار اللغة، وزر معلومات عالمي (غالبًا ما يفتح `InfoModal.vue`)، ويدمج مكون `MsvCounter` لعرض جرعة الإشعاع السنوية للمستخدم الحالي باستمرار، مما يبقي المعلومات الحيوية مرئية دائمًا.

**Props الرئيسية:**
- `currentLanguage` (String): إعداد اللغة النشط لعناصر الترويسة.
- `user` (Object): كائن المستخدم الحالي المصادق عليه، يُستخدم لعرض معلومات خاصة بالمستخدم أو عناصر شرطية.
- `msvData` (Object): كائن يحتوي على `currentMsv` (الجرعة الحالية للمستخدم)، و `limit` (حد الجرعة السنوي)، و `isLoading` (حالة تحميل بيانات mSv)، يتم تمريره مباشرة إلى `MsvCounter`.

**Emits الرئيسية:**
- `toggle-language`: يُصدر عند تنشيط مفتاح تبديل اللغة.
- `toggle-info-modal`: يُصدر عند النقر على زر المعلومات العالمي، مما يشير إلى المكون الأصل لفتح `InfoModal.vue`.

## البدء

للحصول على نسخة محلية من هذا المشروع وتشغيلها على جهاز التطوير الخاص بك، اتبع هذه الخطوات البسيطة والمفصلة. سترشدك هذه التعليمات خلال إعداد البيئة اللازمة وتشغيل التطبيق.

### المتطلبات الأساسية

قبل أن تبدأ، تأكد من تثبيت البرامج التالية على نظامك:

- **npm (مدير حزم Node):** يُستخدم `npm` لإدارة اعتماديات المشروع. إذا لم يكن لديك، يمكنك تثبيته باستخدام Node.js. يوصى بالحصول على أحدث إصدار.
    ```sh
    npm install npm@latest -g
    ```
    *يقوم هذا الأمر بتثبيت أحدث إصدار من npm عالميًا.* للتحقق من التثبيت، قم بتشغيل `npm -v` في الطرفية (terminal) الخاصة بك.

### التثبيت

اتبع هذه الخطوات لإعداد المشروع محليًا:

1.  **استنساخ المستودع (Clone the Repository)**
    أولاً، قم باستنساخ مستودع المشروع إلى جهازك المحلي باستخدام Git. افتح الطرفية أو موجه الأوامر وقم بتشغيل:
    ```sh
    git clone https://github.com/your_username/X-ray.git
    ```
    *استبدل `your_username` باسم مستخدم GitHub الفعلي أو المنظمة التي يُستضاف فيها المستودع.*

2.  **الانتقال إلى مجلد المشروع**
    غيّر دليلك الحالي إلى مجلد المشروع المستنسخ حديثًا:
    ```sh
    cd X-ray
    ```

3.  **تثبيت حزم NPM**
    بمجرد الدخول إلى مجلد المشروع، قم بتثبيت جميع الاعتماديات اللازمة عن طريق تشغيل أمر تثبيت npm:
    ```sh
    npm install
    ```
    *يقرأ هذا الأمر ملف `package.json` ويقوم بتنزيل جميع المكتبات والأطر المطلوبة في مجلد `node_modules`.*

### التصريف وإعادة التحميل الفورية للتطوير

لتشغيل التطبيق في وضع التطوير مع إعادة التحميل الفورية (التغييرات في الكود الخاص بك ستنعكس تلقائيًا في المتصفح دون تحديث يدوي)، استخدم الأمر التالي:

```sh
npm run dev
```
*يبدأ هذا الأمر خادم تطوير، يمكن الوصول إليه عادةً على `http://localhost:5173/` (أو منفذ آخر إذا كان 5173 مستخدمًا). يمكنك بعد ذلك فتح هذا العنوان في متصفح الويب الخاص بك لرؤية التطبيق قيد التشغيل.*

### التصريف والتصغير للإنتاج

لبناء التطبيق للإنتاج، والذي يولد ملفات ثابتة محسّنة ومصغرة جاهزة للنشر، استخدم هذا الأمر:

```sh
npm run build
```
*ينشئ هذا الأمر مجلد `dist/` في جذر مشروعك، يحتوي على الأصول الجاهزة للإنتاج (HTML، CSS، JavaScript، إلخ). تم تحسين هذه الملفات من أجل الأداء وحجم أصغر.*

### فحص الكود باستخدام [ESLint](https://eslint.org/)

للتحقق من تناسق أسلوب الكود الخاص بك والأخطاء المحتملة باستخدام ESLint، قم بتشغيل أمر الفحص:

```sh
npm run lint
```
*سيقوم هذا الأمر بتحليل ملفات JavaScript و Vue الخاصة بك مقابل قواعد ESLint المكونة والإبلاغ عن أي مشاكل، مما يساعد في الحفاظ على جودة الكود.*
