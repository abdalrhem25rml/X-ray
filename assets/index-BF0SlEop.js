(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ef(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Xe={},gi=[],jn=()=>{},o3=()=>!1,_l=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),wf=t=>t.startsWith("onUpdate:"),Ct=Object.assign,Af=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},a3=Object.prototype.hasOwnProperty,Ke=(t,e)=>a3.call(t,e),ve=Array.isArray,_i=t=>pa(t)==="[object Map]",Ui=t=>pa(t)==="[object Set]",K0=t=>pa(t)==="[object Date]",Re=t=>typeof t=="function",gt=t=>typeof t=="string",Kn=t=>typeof t=="symbol",et=t=>t!==null&&typeof t=="object",E1=t=>(et(t)||Re(t))&&Re(t.then)&&Re(t.catch),w1=Object.prototype.toString,pa=t=>w1.call(t),u3=t=>pa(t).slice(8,-1),A1=t=>pa(t)==="[object Object]",Tf=t=>gt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Io=Ef(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yl=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},l3=/-(\w)/g,ss=yl(t=>t.replace(l3,(e,n)=>n?n.toUpperCase():"")),c3=/\B([A-Z])/g,Ys=yl(t=>t.replace(c3,"-$1").toLowerCase()),T1=yl(t=>t.charAt(0).toUpperCase()+t.slice(1)),Tc=yl(t=>t?`on${T1(t)}`:""),Xr=(t,e)=>!Object.is(t,e),yu=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},cd=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Nu=t=>{const e=parseFloat(t);return isNaN(e)?t:e},d3=t=>{const e=gt(t)?Number(t):NaN;return isNaN(e)?t:e};let Y0;const vl=()=>Y0||(Y0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function bl(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=gt(r)?m3(r):bl(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(gt(t)||et(t))return t}const f3=/;(?![^(]*\))/g,h3=/:([^]+)/,p3=/\/\*[^]*?\*\//g;function m3(t){const e={};return t.replace(p3,"").split(f3).forEach(n=>{if(n){const r=n.split(h3);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function is(t){let e="";if(gt(t))e=t;else if(ve(t))for(let n=0;n<t.length;n++){const r=is(t[n]);r&&(e+=r+" ")}else if(et(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const g3="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",_3=Ef(g3);function I1(t){return!!t||t===""}function y3(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=ma(t[r],e[r]);return n}function ma(t,e){if(t===e)return!0;let n=K0(t),r=K0(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Kn(t),r=Kn(e),n||r)return t===e;if(n=ve(t),r=ve(e),n||r)return n&&r?y3(t,e):!1;if(n=et(t),r=et(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),u=e.hasOwnProperty(o);if(a&&!u||!a&&u||!ma(t[o],e[o]))return!1}}return String(t)===String(e)}function If(t,e){return t.findIndex(n=>ma(n,e))}const S1=t=>!!(t&&t.__v_isRef===!0),b=t=>gt(t)?t:t==null?"":ve(t)||et(t)&&(t.toString===w1||!Re(t.toString))?S1(t)?b(t.value):JSON.stringify(t,C1,2):String(t),C1=(t,e)=>S1(e)?C1(t,e.value):_i(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Ic(r,i)+" =>"]=s,n),{})}:Ui(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Ic(n))}:Kn(e)?Ic(e):et(e)&&!ve(e)&&!A1(e)?String(e):e,Ic=(t,e="")=>{var n;return Kn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Bt;class x1{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Bt,!e&&Bt&&(this.index=(Bt.scopes||(Bt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Bt;try{return Bt=this,e()}finally{Bt=n}}}on(){++this._on===1&&(this.prevScope=Bt,Bt=this)}off(){this._on>0&&--this._on===0&&(Bt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function k1(t){return new x1(t)}function D1(){return Bt}function v3(t,e=!1){Bt&&Bt.cleanups.push(t)}let tt;const Sc=new WeakSet;class P1{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Bt&&Bt.active&&Bt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Sc.has(this)&&(Sc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||O1(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Q0(this),N1(this);const e=tt,n=In;tt=this,In=!0;try{return this.fn()}finally{F1(this),tt=e,In=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)xf(e);this.deps=this.depsTail=void 0,Q0(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Sc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){dd(this)&&this.run()}get dirty(){return dd(this)}}let R1=0,So,Co;function O1(t,e=!1){if(t.flags|=8,e){t.next=Co,Co=t;return}t.next=So,So=t}function Sf(){R1++}function Cf(){if(--R1>0)return;if(Co){let e=Co;for(Co=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;So;){let e=So;for(So=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function N1(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function F1(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),xf(r),b3(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function dd(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(V1(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function V1(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===qo)||(t.globalVersion=qo,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!dd(t))))return;t.flags|=2;const e=t.dep,n=tt,r=In;tt=t,In=!0;try{N1(t);const s=t.fn(t._value);(e.version===0||Xr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{tt=n,In=r,F1(t),t.flags&=-3}}function xf(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)xf(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function b3(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let In=!0;const M1=[];function gr(){M1.push(In),In=!1}function _r(){const t=M1.pop();In=t===void 0?!0:t}function Q0(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=tt;tt=void 0;try{e()}finally{tt=n}}}let qo=0;class E3{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class kf{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!tt||!In||tt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==tt)n=this.activeLink=new E3(tt,this),tt.deps?(n.prevDep=tt.depsTail,tt.depsTail.nextDep=n,tt.depsTail=n):tt.deps=tt.depsTail=n,L1(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=tt.depsTail,n.nextDep=void 0,tt.depsTail.nextDep=n,tt.depsTail=n,tt.deps===n&&(tt.deps=r)}return n}trigger(e){this.version++,qo++,this.notify(e)}notify(e){Sf();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Cf()}}}function L1(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)L1(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Fu=new WeakMap,Ls=Symbol(""),fd=Symbol(""),zo=Symbol("");function qt(t,e,n){if(In&&tt){let r=Fu.get(t);r||Fu.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new kf),s.map=r,s.key=n),s.track()}}function or(t,e,n,r,s,i){const o=Fu.get(t);if(!o){qo++;return}const a=u=>{u&&u.trigger()};if(Sf(),e==="clear")o.forEach(a);else{const u=ve(t),c=u&&Tf(n);if(u&&n==="length"){const d=Number(r);o.forEach((h,m)=>{(m==="length"||m===zo||!Kn(m)&&m>=d)&&a(h)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(zo)),e){case"add":u?c&&a(o.get("length")):(a(o.get(Ls)),_i(t)&&a(o.get(fd)));break;case"delete":u||(a(o.get(Ls)),_i(t)&&a(o.get(fd)));break;case"set":_i(t)&&a(o.get(Ls));break}}Cf()}function w3(t,e){const n=Fu.get(t);return n&&n.get(e)}function ri(t){const e=ze(t);return e===t?e:(qt(e,"iterate",zo),vn(t)?e:e.map(Ot))}function El(t){return qt(t=ze(t),"iterate",zo),t}const A3={__proto__:null,[Symbol.iterator](){return Cc(this,Symbol.iterator,Ot)},concat(...t){return ri(this).concat(...t.map(e=>ve(e)?ri(e):e))},entries(){return Cc(this,"entries",t=>(t[1]=Ot(t[1]),t))},every(t,e){return nr(this,"every",t,e,void 0,arguments)},filter(t,e){return nr(this,"filter",t,e,n=>n.map(Ot),arguments)},find(t,e){return nr(this,"find",t,e,Ot,arguments)},findIndex(t,e){return nr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return nr(this,"findLast",t,e,Ot,arguments)},findLastIndex(t,e){return nr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return nr(this,"forEach",t,e,void 0,arguments)},includes(...t){return xc(this,"includes",t)},indexOf(...t){return xc(this,"indexOf",t)},join(t){return ri(this).join(t)},lastIndexOf(...t){return xc(this,"lastIndexOf",t)},map(t,e){return nr(this,"map",t,e,void 0,arguments)},pop(){return fo(this,"pop")},push(...t){return fo(this,"push",t)},reduce(t,...e){return X0(this,"reduce",t,e)},reduceRight(t,...e){return X0(this,"reduceRight",t,e)},shift(){return fo(this,"shift")},some(t,e){return nr(this,"some",t,e,void 0,arguments)},splice(...t){return fo(this,"splice",t)},toReversed(){return ri(this).toReversed()},toSorted(t){return ri(this).toSorted(t)},toSpliced(...t){return ri(this).toSpliced(...t)},unshift(...t){return fo(this,"unshift",t)},values(){return Cc(this,"values",Ot)}};function Cc(t,e,n){const r=El(t),s=r[e]();return r!==t&&!vn(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const T3=Array.prototype;function nr(t,e,n,r,s,i){const o=El(t),a=o!==t&&!vn(t),u=o[e];if(u!==T3[e]){const h=u.apply(t,i);return a?Ot(h):h}let c=n;o!==t&&(a?c=function(h,m){return n.call(this,Ot(h),m,t)}:n.length>2&&(c=function(h,m){return n.call(this,h,m,t)}));const d=u.call(o,c,r);return a&&s?s(d):d}function X0(t,e,n,r){const s=El(t);let i=n;return s!==t&&(vn(t)?n.length>3&&(i=function(o,a,u){return n.call(this,o,a,u,t)}):i=function(o,a,u){return n.call(this,o,Ot(a),u,t)}),s[e](i,...r)}function xc(t,e,n){const r=ze(t);qt(r,"iterate",zo);const s=r[e](...n);return(s===-1||s===!1)&&Rf(n[0])?(n[0]=ze(n[0]),r[e](...n)):s}function fo(t,e,n=[]){gr(),Sf();const r=ze(t)[e].apply(t,n);return Cf(),_r(),r}const I3=Ef("__proto__,__v_isRef,__isVue"),$1=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Kn));function S3(t){Kn(t)||(t=String(t));const e=ze(this);return qt(e,"has",t),e.hasOwnProperty(t)}class U1{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?V3:z1:i?q1:j1).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ve(e);if(!s){let u;if(o&&(u=A3[n]))return u;if(n==="hasOwnProperty")return S3}const a=Reflect.get(e,n,mt(e)?e:r);return(Kn(n)?$1.has(n):I3(n))||(s||qt(e,"get",n),i)?a:mt(a)?o&&Tf(n)?a:a.value:et(a)?s?G1(a):Qn(a):a}}class B1 extends U1{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const u=os(i);if(!vn(r)&&!os(r)&&(i=ze(i),r=ze(r)),!ve(e)&&mt(i)&&!mt(r))return u?!1:(i.value=r,!0)}const o=ve(e)&&Tf(n)?Number(n)<e.length:Ke(e,n),a=Reflect.set(e,n,r,mt(e)?e:s);return e===ze(s)&&(o?Xr(r,i)&&or(e,"set",n,r):or(e,"add",n,r)),a}deleteProperty(e,n){const r=Ke(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&or(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Kn(n)||!$1.has(n))&&qt(e,"has",n),r}ownKeys(e){return qt(e,"iterate",ve(e)?"length":Ls),Reflect.ownKeys(e)}}class C3 extends U1{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const x3=new B1,k3=new C3,D3=new B1(!0);const hd=t=>t,tu=t=>Reflect.getPrototypeOf(t);function P3(t,e,n){return function(...r){const s=this.__v_raw,i=ze(s),o=_i(i),a=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,c=s[t](...r),d=n?hd:e?Vu:Ot;return!e&&qt(i,"iterate",u?fd:Ls),{next(){const{value:h,done:m}=c.next();return m?{value:h,done:m}:{value:a?[d(h[0]),d(h[1])]:d(h),done:m}},[Symbol.iterator](){return this}}}}function nu(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function R3(t,e){const n={get(s){const i=this.__v_raw,o=ze(i),a=ze(s);t||(Xr(s,a)&&qt(o,"get",s),qt(o,"get",a));const{has:u}=tu(o),c=e?hd:t?Vu:Ot;if(u.call(o,s))return c(i.get(s));if(u.call(o,a))return c(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&qt(ze(s),"iterate",Ls),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=ze(i),a=ze(s);return t||(Xr(s,a)&&qt(o,"has",s),qt(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,u=ze(a),c=e?hd:t?Vu:Ot;return!t&&qt(u,"iterate",Ls),a.forEach((d,h)=>s.call(i,c(d),c(h),o))}};return Ct(n,t?{add:nu("add"),set:nu("set"),delete:nu("delete"),clear:nu("clear")}:{add(s){!e&&!vn(s)&&!os(s)&&(s=ze(s));const i=ze(this);return tu(i).has.call(i,s)||(i.add(s),or(i,"add",s,s)),this},set(s,i){!e&&!vn(i)&&!os(i)&&(i=ze(i));const o=ze(this),{has:a,get:u}=tu(o);let c=a.call(o,s);c||(s=ze(s),c=a.call(o,s));const d=u.call(o,s);return o.set(s,i),c?Xr(i,d)&&or(o,"set",s,i):or(o,"add",s,i),this},delete(s){const i=ze(this),{has:o,get:a}=tu(i);let u=o.call(i,s);u||(s=ze(s),u=o.call(i,s)),a&&a.call(i,s);const c=i.delete(s);return u&&or(i,"delete",s,void 0),c},clear(){const s=ze(this),i=s.size!==0,o=s.clear();return i&&or(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=P3(s,t,e)}),n}function Df(t,e){const n=R3(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Ke(n,s)&&s in r?n:r,s,i)}const O3={get:Df(!1,!1)},N3={get:Df(!1,!0)},F3={get:Df(!0,!1)};const j1=new WeakMap,q1=new WeakMap,z1=new WeakMap,V3=new WeakMap;function M3(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function L3(t){return t.__v_skip||!Object.isExtensible(t)?0:M3(u3(t))}function Qn(t){return os(t)?t:Pf(t,!1,x3,O3,j1)}function H1(t){return Pf(t,!1,D3,N3,q1)}function G1(t){return Pf(t,!0,k3,F3,z1)}function Pf(t,e,n,r,s){if(!et(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=L3(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function Jr(t){return os(t)?Jr(t.__v_raw):!!(t&&t.__v_isReactive)}function os(t){return!!(t&&t.__v_isReadonly)}function vn(t){return!!(t&&t.__v_isShallow)}function Rf(t){return t?!!t.__v_raw:!1}function ze(t){const e=t&&t.__v_raw;return e?ze(e):t}function Of(t){return!Ke(t,"__v_skip")&&Object.isExtensible(t)&&cd(t,"__v_skip",!0),t}const Ot=t=>et(t)?Qn(t):t,Vu=t=>et(t)?G1(t):t;function mt(t){return t?t.__v_isRef===!0:!1}function Ae(t){return W1(t,!1)}function $3(t){return W1(t,!0)}function W1(t,e){return mt(t)?t:new U3(t,e)}class U3{constructor(e,n){this.dep=new kf,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ze(e),this._value=n?e:Ot(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||vn(e)||os(e);e=r?e:ze(e),Xr(e,n)&&(this._rawValue=e,this._value=r?e:Ot(e),this.dep.trigger())}}function y(t){return mt(t)?t.value:t}const B3={get:(t,e,n)=>e==="__v_raw"?t:y(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return mt(s)&&!mt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function K1(t){return Jr(t)?t:new Proxy(t,B3)}function j3(t){const e=ve(t)?new Array(t.length):{};for(const n in t)e[n]=z3(t,n);return e}class q3{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return w3(ze(this._object),this._key)}}function z3(t,e,n){const r=t[e];return mt(r)?r:new q3(t,e,n)}class H3{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new kf(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=qo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&tt!==this)return O1(this,!0),!0}get value(){const e=this.dep.track();return V1(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function G3(t,e,n=!1){let r,s;return Re(t)?r=t:(r=t.get,s=t.set),new H3(r,s,n)}const ru={},Mu=new WeakMap;let Rs;function W3(t,e=!1,n=Rs){if(n){let r=Mu.get(n);r||Mu.set(n,r=[]),r.push(t)}}function K3(t,e,n=Xe){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:u}=n,c=V=>s?V:vn(V)||s===!1||s===0?ar(V,1):ar(V);let d,h,m,g,v=!1,E=!1;if(mt(t)?(h=()=>t.value,v=vn(t)):Jr(t)?(h=()=>c(t),v=!0):ve(t)?(E=!0,v=t.some(V=>Jr(V)||vn(V)),h=()=>t.map(V=>{if(mt(V))return V.value;if(Jr(V))return c(V);if(Re(V))return u?u(V,2):V()})):Re(t)?e?h=u?()=>u(t,2):t:h=()=>{if(m){gr();try{m()}finally{_r()}}const V=Rs;Rs=d;try{return u?u(t,3,[g]):t(g)}finally{Rs=V}}:h=jn,e&&s){const V=h,U=s===!0?1/0:s;h=()=>ar(V(),U)}const A=D1(),C=()=>{d.stop(),A&&A.active&&Af(A.effects,d)};if(i&&e){const V=e;e=(...U)=>{V(...U),C()}}let R=E?new Array(t.length).fill(ru):ru;const F=V=>{if(!(!(d.flags&1)||!d.dirty&&!V))if(e){const U=d.run();if(s||v||(E?U.some((M,S)=>Xr(M,R[S])):Xr(U,R))){m&&m();const M=Rs;Rs=d;try{const S=[U,R===ru?void 0:E&&R[0]===ru?[]:R,g];R=U,u?u(e,3,S):e(...S)}finally{Rs=M}}}else d.run()};return a&&a(F),d=new P1(h),d.scheduler=o?()=>o(F,!1):F,g=V=>W3(V,!1,d),m=d.onStop=()=>{const V=Mu.get(d);if(V){if(u)u(V,4);else for(const U of V)U();Mu.delete(d)}},e?r?F(!0):R=d.run():o?o(F.bind(null,!0),!0):d.run(),C.pause=d.pause.bind(d),C.resume=d.resume.bind(d),C.stop=C,C}function ar(t,e=1/0,n){if(e<=0||!et(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,mt(t))ar(t.value,e,n);else if(ve(t))for(let r=0;r<t.length;r++)ar(t[r],e,n);else if(Ui(t)||_i(t))t.forEach(r=>{ar(r,e,n)});else if(A1(t)){for(const r in t)ar(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&ar(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ga(t,e,n,r){try{return r?t(...r):t()}catch(s){wl(s,e,n)}}function Cn(t,e,n,r){if(Re(t)){const s=ga(t,e,n,r);return s&&E1(s)&&s.catch(i=>{wl(i,e,n)}),s}if(ve(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Cn(t[i],e,n,r));return s}}function wl(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Xe;if(e){let a=e.parent;const u=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const d=a.ec;if(d){for(let h=0;h<d.length;h++)if(d[h](t,u,c)===!1)return}a=a.parent}if(i){gr(),ga(i,null,10,[t,u,c]),_r();return}}Y3(t,n,s,r,o)}function Y3(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Yt=[];let Fn=-1;const yi=[];let $r=null,ui=0;const Y1=Promise.resolve();let Lu=null;function Al(t){const e=Lu||Y1;return t?e.then(this?t.bind(this):t):e}function Q3(t){let e=Fn+1,n=Yt.length;for(;e<n;){const r=e+n>>>1,s=Yt[r],i=Ho(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Nf(t){if(!(t.flags&1)){const e=Ho(t),n=Yt[Yt.length-1];!n||!(t.flags&2)&&e>=Ho(n)?Yt.push(t):Yt.splice(Q3(e),0,t),t.flags|=1,Q1()}}function Q1(){Lu||(Lu=Y1.then(J1))}function X3(t){ve(t)?yi.push(...t):$r&&t.id===-1?$r.splice(ui+1,0,t):t.flags&1||(yi.push(t),t.flags|=1),Q1()}function J0(t,e,n=Fn+1){for(;n<Yt.length;n++){const r=Yt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Yt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function X1(t){if(yi.length){const e=[...new Set(yi)].sort((n,r)=>Ho(n)-Ho(r));if(yi.length=0,$r){$r.push(...e);return}for($r=e,ui=0;ui<$r.length;ui++){const n=$r[ui];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}$r=null,ui=0}}const Ho=t=>t.id==null?t.flags&2?-1:1/0:t.id;function J1(t){try{for(Fn=0;Fn<Yt.length;Fn++){const e=Yt[Fn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ga(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Fn<Yt.length;Fn++){const e=Yt[Fn];e&&(e.flags&=-2)}Fn=-1,Yt.length=0,X1(),Lu=null,(Yt.length||yi.length)&&J1()}}let tn=null,Z1=null;function $u(t){const e=tn;return tn=t,Z1=t&&t.type.__scopeId||null,e}function Tr(t,e=tn,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&up(-1);const i=$u(e);let o;try{o=t(...s)}finally{$u(i),r._d&&up(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function J(t,e){if(tn===null)return t;const n=xl(tn),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,u=Xe]=e[s];i&&(Re(i)&&(i={mounted:i,updated:i}),i.deep&&ar(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:u}))}return t}function xs(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let u=a.dir[r];u&&(gr(),Cn(u,n,8,[t.el,a,t,e]),_r())}}const J3=Symbol("_vte"),e_=t=>t.__isTeleport,Ur=Symbol("_leaveCb"),su=Symbol("_enterCb");function Z3(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Vf(()=>{t.isMounted=!0}),u_(()=>{t.isUnmounting=!0}),t}const gn=[Function,Array],t_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:gn,onEnter:gn,onAfterEnter:gn,onEnterCancelled:gn,onBeforeLeave:gn,onLeave:gn,onAfterLeave:gn,onLeaveCancelled:gn,onBeforeAppear:gn,onAppear:gn,onAfterAppear:gn,onAppearCancelled:gn},n_=t=>{const e=t.subTree;return e.component?n_(e.component):e},eE={name:"BaseTransition",props:t_,setup(t,{slots:e}){const n=YE(),r=Z3();return()=>{const s=e.default&&i_(e.default(),!0);if(!s||!s.length)return;const i=r_(s),o=ze(t),{mode:a}=o;if(r.isLeaving)return kc(i);const u=Z0(i);if(!u)return kc(i);let c=pd(u,o,r,n,h=>c=h);u.type!==Qt&&Go(u,c);let d=n.subTree&&Z0(n.subTree);if(d&&d.type!==Qt&&!Ns(u,d)&&n_(n).type!==Qt){let h=pd(d,o,r,n);if(Go(d,h),a==="out-in"&&u.type!==Qt)return r.isLeaving=!0,h.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete h.afterLeave,d=void 0},kc(i);a==="in-out"&&u.type!==Qt?h.delayLeave=(m,g,v)=>{const E=s_(r,d);E[String(d.key)]=d,m[Ur]=()=>{g(),m[Ur]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{v(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return i}}};function r_(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Qt){e=n;break}}return e}const tE=eE;function s_(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function pd(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:u,onEnter:c,onAfterEnter:d,onEnterCancelled:h,onBeforeLeave:m,onLeave:g,onAfterLeave:v,onLeaveCancelled:E,onBeforeAppear:A,onAppear:C,onAfterAppear:R,onAppearCancelled:F}=e,V=String(t.key),U=s_(n,t),M=(T,k)=>{T&&Cn(T,r,9,k)},S=(T,k)=>{const N=k[1];M(T,k),ve(T)?T.every(P=>P.length<=1)&&N():T.length<=1&&N()},w={mode:o,persisted:a,beforeEnter(T){let k=u;if(!n.isMounted)if(i)k=A||u;else return;T[Ur]&&T[Ur](!0);const N=U[V];N&&Ns(t,N)&&N.el[Ur]&&N.el[Ur](),M(k,[T])},enter(T){let k=c,N=d,P=h;if(!n.isMounted)if(i)k=C||c,N=R||d,P=F||h;else return;let x=!1;const Pe=T[su]=ae=>{x||(x=!0,ae?M(P,[T]):M(N,[T]),w.delayedLeave&&w.delayedLeave(),T[su]=void 0)};k?S(k,[T,Pe]):Pe()},leave(T,k){const N=String(t.key);if(T[su]&&T[su](!0),n.isUnmounting)return k();M(m,[T]);let P=!1;const x=T[Ur]=Pe=>{P||(P=!0,k(),Pe?M(E,[T]):M(v,[T]),T[Ur]=void 0,U[N]===t&&delete U[N])};U[N]=t,g?S(g,[T,x]):x()},clone(T){const k=pd(T,e,n,r,s);return s&&s(k),k}};return w}function kc(t){if(Tl(t))return t=as(t),t.children=null,t}function Z0(t){if(!Tl(t))return e_(t.type)&&t.children?r_(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Re(n.default))return n.default()}}function Go(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Go(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function i_(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Je?(o.patchFlag&128&&s++,r=r.concat(i_(o.children,e,a))):(e||o.type!==Qt)&&r.push(a!=null?as(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ff(t,e){return Re(t)?Ct({name:t.name},e,{setup:t}):t}function o_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function xo(t,e,n,r,s=!1){if(ve(t)){t.forEach((v,E)=>xo(v,e&&(ve(e)?e[E]:e),n,r,s));return}if(ko(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&xo(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?xl(r.component):r.el,o=s?null:i,{i:a,r:u}=t,c=e&&e.r,d=a.refs===Xe?a.refs={}:a.refs,h=a.setupState,m=ze(h),g=h===Xe?()=>!1:v=>Ke(m,v);if(c!=null&&c!==u&&(gt(c)?(d[c]=null,g(c)&&(h[c]=null)):mt(c)&&(c.value=null)),Re(u))ga(u,a,12,[o,d]);else{const v=gt(u),E=mt(u);if(v||E){const A=()=>{if(t.f){const C=v?g(u)?h[u]:d[u]:u.value;s?ve(C)&&Af(C,i):ve(C)?C.includes(i)||C.push(i):v?(d[u]=[i],g(u)&&(h[u]=d[u])):(u.value=[i],t.k&&(d[t.k]=u.value))}else v?(d[u]=o,g(u)&&(h[u]=o)):E&&(u.value=o,t.k&&(d[t.k]=o))};o?(A.id=-1,on(A,n)):A()}}}vl().requestIdleCallback;vl().cancelIdleCallback;const ko=t=>!!t.type.__asyncLoader,Tl=t=>t.type.__isKeepAlive;function nE(t,e){a_(t,"a",e)}function rE(t,e){a_(t,"da",e)}function a_(t,e,n=Nt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Il(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Tl(s.parent.vnode)&&sE(r,e,n,s),s=s.parent}}function sE(t,e,n,r){const s=Il(e,t,r,!0);l_(()=>{Af(r[e],s)},n)}function Il(t,e,n=Nt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{gr();const a=_a(n),u=Cn(e,n,t,o);return a(),_r(),u});return r?s.unshift(i):s.push(i),i}}const Ir=t=>(e,n=Nt)=>{(!Ko||t==="sp")&&Il(t,(...r)=>e(...r),n)},iE=Ir("bm"),Vf=Ir("m"),oE=Ir("bu"),aE=Ir("u"),u_=Ir("bum"),l_=Ir("um"),uE=Ir("sp"),lE=Ir("rtg"),cE=Ir("rtc");function dE(t,e=Nt){Il("ec",t,e)}const fE=Symbol.for("v-ndc");function nn(t,e,n,r){let s;const i=n,o=ve(t);if(o||gt(t)){const a=o&&Jr(t);let u=!1,c=!1;a&&(u=!vn(t),c=os(t),t=El(t)),s=new Array(t.length);for(let d=0,h=t.length;d<h;d++)s[d]=e(u?c?Vu(Ot(t[d])):Ot(t[d]):t[d],d,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(et(t))if(t[Symbol.iterator])s=Array.from(t,(a,u)=>e(a,u,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let u=0,c=a.length;u<c;u++){const d=a[u];s[u]=e(t[d],d,u,i)}}else s=[];return s}const md=t=>t?D_(t)?xl(t):md(t.parent):null,Do=Ct(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>md(t.parent),$root:t=>md(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>d_(t),$forceUpdate:t=>t.f||(t.f=()=>{Nf(t.update)}),$nextTick:t=>t.n||(t.n=Al.bind(t.proxy)),$watch:t=>NE.bind(t)}),Dc=(t,e)=>t!==Xe&&!t.__isScriptSetup&&Ke(t,e),hE={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:u}=t;let c;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Dc(r,e))return o[e]=1,r[e];if(s!==Xe&&Ke(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&Ke(c,e))return o[e]=3,i[e];if(n!==Xe&&Ke(n,e))return o[e]=4,n[e];gd&&(o[e]=0)}}const d=Do[e];let h,m;if(d)return e==="$attrs"&&qt(t.attrs,"get",""),d(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Xe&&Ke(n,e))return o[e]=4,n[e];if(m=u.config.globalProperties,Ke(m,e))return m[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Dc(s,e)?(s[e]=n,!0):r!==Xe&&Ke(r,e)?(r[e]=n,!0):Ke(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==Xe&&Ke(t,o)||Dc(e,o)||(a=i[0])&&Ke(a,o)||Ke(r,o)||Ke(Do,o)||Ke(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ke(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function ep(t){return ve(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let gd=!0;function pE(t){const e=d_(t),n=t.proxy,r=t.ctx;gd=!1,e.beforeCreate&&tp(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:u,inject:c,created:d,beforeMount:h,mounted:m,beforeUpdate:g,updated:v,activated:E,deactivated:A,beforeDestroy:C,beforeUnmount:R,destroyed:F,unmounted:V,render:U,renderTracked:M,renderTriggered:S,errorCaptured:w,serverPrefetch:T,expose:k,inheritAttrs:N,components:P,directives:x,filters:Pe}=e;if(c&&mE(c,r,null),o)for(const de in o){const Fe=o[de];Re(Fe)&&(r[de]=Fe.bind(n))}if(s){const de=s.call(n,n);et(de)&&(t.data=Qn(de))}if(gd=!0,i)for(const de in i){const Fe=i[de],Se=Re(Fe)?Fe.bind(n,n):Re(Fe.get)?Fe.get.bind(n,n):jn,ne=!Re(Fe)&&Re(Fe.set)?Fe.set.bind(n):jn,pe=Ee({get:Se,set:ne});Object.defineProperty(r,de,{enumerable:!0,configurable:!0,get:()=>pe.value,set:Ue=>pe.value=Ue})}if(a)for(const de in a)c_(a[de],r,n,de);if(u){const de=Re(u)?u.call(n):u;Reflect.ownKeys(de).forEach(Fe=>{ur(Fe,de[Fe])})}d&&tp(d,t,"c");function ue(de,Fe){ve(Fe)?Fe.forEach(Se=>de(Se.bind(n))):Fe&&de(Fe.bind(n))}if(ue(iE,h),ue(Vf,m),ue(oE,g),ue(aE,v),ue(nE,E),ue(rE,A),ue(dE,w),ue(cE,M),ue(lE,S),ue(u_,R),ue(l_,V),ue(uE,T),ve(k))if(k.length){const de=t.exposed||(t.exposed={});k.forEach(Fe=>{Object.defineProperty(de,Fe,{get:()=>n[Fe],set:Se=>n[Fe]=Se})})}else t.exposed||(t.exposed={});U&&t.render===jn&&(t.render=U),N!=null&&(t.inheritAttrs=N),P&&(t.components=P),x&&(t.directives=x),T&&o_(t)}function mE(t,e,n=jn){ve(t)&&(t=_d(t));for(const r in t){const s=t[r];let i;et(s)?"default"in s?i=Me(s.from||r,s.default,!0):i=Me(s.from||r):i=Me(s),mt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function tp(t,e,n){Cn(ve(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function c_(t,e,n,r){let s=r.includes(".")?T_(n,r):()=>n[r];if(gt(t)){const i=e[t];Re(i)&&Ze(s,i)}else if(Re(t))Ze(s,t.bind(n));else if(et(t))if(ve(t))t.forEach(i=>c_(i,e,n,r));else{const i=Re(t.handler)?t.handler.bind(n):e[t.handler];Re(i)&&Ze(s,i,t)}}function d_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let u;return a?u=a:!s.length&&!n&&!r?u=e:(u={},s.length&&s.forEach(c=>Uu(u,c,o,!0)),Uu(u,e,o)),et(e)&&i.set(e,u),u}function Uu(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Uu(t,i,n,!0),s&&s.forEach(o=>Uu(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=gE[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const gE={data:np,props:rp,emits:rp,methods:go,computed:go,beforeCreate:Kt,created:Kt,beforeMount:Kt,mounted:Kt,beforeUpdate:Kt,updated:Kt,beforeDestroy:Kt,beforeUnmount:Kt,destroyed:Kt,unmounted:Kt,activated:Kt,deactivated:Kt,errorCaptured:Kt,serverPrefetch:Kt,components:go,directives:go,watch:yE,provide:np,inject:_E};function np(t,e){return e?t?function(){return Ct(Re(t)?t.call(this,this):t,Re(e)?e.call(this,this):e)}:e:t}function _E(t,e){return go(_d(t),_d(e))}function _d(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Kt(t,e){return t?[...new Set([].concat(t,e))]:e}function go(t,e){return t?Ct(Object.create(null),t,e):e}function rp(t,e){return t?ve(t)&&ve(e)?[...new Set([...t,...e])]:Ct(Object.create(null),ep(t),ep(e??{})):e}function yE(t,e){if(!t)return e;if(!e)return t;const n=Ct(Object.create(null),t);for(const r in e)n[r]=Kt(t[r],e[r]);return n}function f_(){return{app:null,config:{isNativeTag:o3,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vE=0;function bE(t,e){return function(r,s=null){Re(r)||(r=Ct({},r)),s!=null&&!et(s)&&(s=null);const i=f_(),o=new WeakSet,a=[];let u=!1;const c=i.app={_uid:vE++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:tw,get config(){return i.config},set config(d){},use(d,...h){return o.has(d)||(d&&Re(d.install)?(o.add(d),d.install(c,...h)):Re(d)&&(o.add(d),d(c,...h))),c},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),c},component(d,h){return h?(i.components[d]=h,c):i.components[d]},directive(d,h){return h?(i.directives[d]=h,c):i.directives[d]},mount(d,h,m){if(!u){const g=c._ceVNode||ke(r,s);return g.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(g,d,m),u=!0,c._container=d,d.__vue_app__=c,xl(g.component)}},onUnmount(d){a.push(d)},unmount(){u&&(Cn(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(d,h){return i.provides[d]=h,c},runWithContext(d){const h=$s;$s=c;try{return d()}finally{$s=h}}};return c}}let $s=null;function ur(t,e){if(Nt){let n=Nt.provides;const r=Nt.parent&&Nt.parent.provides;r===n&&(n=Nt.provides=Object.create(r)),n[t]=e}}function Me(t,e,n=!1){const r=Nt||tn;if(r||$s){let s=$s?$s._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Re(e)?e.call(r&&r.proxy):e}}function EE(){return!!(Nt||tn||$s)}const h_={},p_=()=>Object.create(h_),m_=t=>Object.getPrototypeOf(t)===h_;function wE(t,e,n,r=!1){const s={},i=p_();t.propsDefaults=Object.create(null),g_(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:H1(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function AE(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=ze(s),[u]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let h=0;h<d.length;h++){let m=d[h];if(Sl(t.emitsOptions,m))continue;const g=e[m];if(u)if(Ke(i,m))g!==i[m]&&(i[m]=g,c=!0);else{const v=ss(m);s[v]=yd(u,a,v,g,t,!1)}else g!==i[m]&&(i[m]=g,c=!0)}}}else{g_(t,e,s,i)&&(c=!0);let d;for(const h in a)(!e||!Ke(e,h)&&((d=Ys(h))===h||!Ke(e,d)))&&(u?n&&(n[h]!==void 0||n[d]!==void 0)&&(s[h]=yd(u,a,h,void 0,t,!0)):delete s[h]);if(i!==a)for(const h in i)(!e||!Ke(e,h))&&(delete i[h],c=!0)}c&&or(t.attrs,"set","")}function g_(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let u in e){if(Io(u))continue;const c=e[u];let d;s&&Ke(s,d=ss(u))?!i||!i.includes(d)?n[d]=c:(a||(a={}))[d]=c:Sl(t.emitsOptions,u)||(!(u in r)||c!==r[u])&&(r[u]=c,o=!0)}if(i){const u=ze(n),c=a||Xe;for(let d=0;d<i.length;d++){const h=i[d];n[h]=yd(s,u,h,c[h],t,!Ke(c,h))}}return o}function yd(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Ke(o,"default");if(a&&r===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&Re(u)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const d=_a(s);r=c[n]=u.call(null,e),d()}}else r=u;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Ys(n))&&(r=!0))}return r}const TE=new WeakMap;function __(t,e,n=!1){const r=n?TE:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let u=!1;if(!Re(t)){const d=h=>{u=!0;const[m,g]=__(h,e,!0);Ct(o,m),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!u)return et(t)&&r.set(t,gi),gi;if(ve(i))for(let d=0;d<i.length;d++){const h=ss(i[d]);sp(h)&&(o[h]=Xe)}else if(i)for(const d in i){const h=ss(d);if(sp(h)){const m=i[d],g=o[h]=ve(m)||Re(m)?{type:m}:Ct({},m),v=g.type;let E=!1,A=!0;if(ve(v))for(let C=0;C<v.length;++C){const R=v[C],F=Re(R)&&R.name;if(F==="Boolean"){E=!0;break}else F==="String"&&(A=!1)}else E=Re(v)&&v.name==="Boolean";g[0]=E,g[1]=A,(E||Ke(g,"default"))&&a.push(h)}}const c=[o,a];return et(t)&&r.set(t,c),c}function sp(t){return t[0]!=="$"&&!Io(t)}const Mf=t=>t[0]==="_"||t==="$stable",Lf=t=>ve(t)?t.map(Mn):[Mn(t)],IE=(t,e,n)=>{if(e._n)return e;const r=Tr((...s)=>Lf(e(...s)),n);return r._c=!1,r},y_=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Mf(s))continue;const i=t[s];if(Re(i))e[s]=IE(s,i,r);else if(i!=null){const o=Lf(i);e[s]=()=>o}}},v_=(t,e)=>{const n=Lf(e);t.slots.default=()=>n},b_=(t,e,n)=>{for(const r in e)(n||!Mf(r))&&(t[r]=e[r])},SE=(t,e,n)=>{const r=t.slots=p_();if(t.vnode.shapeFlag&32){const s=e.__;s&&cd(r,"__",s,!0);const i=e._;i?(b_(r,e,n),n&&cd(r,"_",i,!0)):y_(e,r)}else e&&v_(t,e)},CE=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Xe;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:b_(s,e,n):(i=!e.$stable,y_(e,s)),o=e}else e&&(v_(t,e),o={default:1});if(i)for(const a in s)!Mf(a)&&o[a]==null&&delete s[a]},on=BE;function xE(t){return kE(t)}function kE(t,e){const n=vl();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:u,setText:c,setElementText:d,parentNode:h,nextSibling:m,setScopeId:g=jn,insertStaticContent:v}=t,E=(D,O,L,G=null,Y=null,W=null,ie=void 0,ee=null,Z=!!O.dynamicChildren)=>{if(D===O)return;D&&!Ns(D,O)&&(G=H(D),Ue(D,Y,W,!0),D=null),O.patchFlag===-2&&(Z=!1,O.dynamicChildren=null);const{type:Q,ref:ye,shapeFlag:se}=O;switch(Q){case Cl:A(D,O,L,G);break;case Qt:C(D,O,L,G);break;case vu:D==null&&R(O,L,G,ie);break;case Je:P(D,O,L,G,Y,W,ie,ee,Z);break;default:se&1?U(D,O,L,G,Y,W,ie,ee,Z):se&6?x(D,O,L,G,Y,W,ie,ee,Z):(se&64||se&128)&&Q.process(D,O,L,G,Y,W,ie,ee,Z,fe)}ye!=null&&Y?xo(ye,D&&D.ref,W,O||D,!O):ye==null&&D&&D.ref!=null&&xo(D.ref,null,W,D,!0)},A=(D,O,L,G)=>{if(D==null)r(O.el=a(O.children),L,G);else{const Y=O.el=D.el;O.children!==D.children&&c(Y,O.children)}},C=(D,O,L,G)=>{D==null?r(O.el=u(O.children||""),L,G):O.el=D.el},R=(D,O,L,G)=>{[D.el,D.anchor]=v(D.children,O,L,G,D.el,D.anchor)},F=({el:D,anchor:O},L,G)=>{let Y;for(;D&&D!==O;)Y=m(D),r(D,L,G),D=Y;r(O,L,G)},V=({el:D,anchor:O})=>{let L;for(;D&&D!==O;)L=m(D),s(D),D=L;s(O)},U=(D,O,L,G,Y,W,ie,ee,Z)=>{O.type==="svg"?ie="svg":O.type==="math"&&(ie="mathml"),D==null?M(O,L,G,Y,W,ie,ee,Z):T(D,O,Y,W,ie,ee,Z)},M=(D,O,L,G,Y,W,ie,ee)=>{let Z,Q;const{props:ye,shapeFlag:se,transition:ge,dirs:Ce}=D;if(Z=D.el=o(D.type,W,ye&&ye.is,ye),se&8?d(Z,D.children):se&16&&w(D.children,Z,null,G,Y,Pc(D,W),ie,ee),Ce&&xs(D,null,G,"created"),S(Z,D,D.scopeId,ie,G),ye){for(const Oe in ye)Oe!=="value"&&!Io(Oe)&&i(Z,Oe,null,ye[Oe],W,G);"value"in ye&&i(Z,"value",null,ye.value,W),(Q=ye.onVnodeBeforeMount)&&On(Q,G,D)}Ce&&xs(D,null,G,"beforeMount");const we=DE(Y,ge);we&&ge.beforeEnter(Z),r(Z,O,L),((Q=ye&&ye.onVnodeMounted)||we||Ce)&&on(()=>{Q&&On(Q,G,D),we&&ge.enter(Z),Ce&&xs(D,null,G,"mounted")},Y)},S=(D,O,L,G,Y)=>{if(L&&g(D,L),G)for(let W=0;W<G.length;W++)g(D,G[W]);if(Y){let W=Y.subTree;if(O===W||S_(W.type)&&(W.ssContent===O||W.ssFallback===O)){const ie=Y.vnode;S(D,ie,ie.scopeId,ie.slotScopeIds,Y.parent)}}},w=(D,O,L,G,Y,W,ie,ee,Z=0)=>{for(let Q=Z;Q<D.length;Q++){const ye=D[Q]=ee?Br(D[Q]):Mn(D[Q]);E(null,ye,O,L,G,Y,W,ie,ee)}},T=(D,O,L,G,Y,W,ie)=>{const ee=O.el=D.el;let{patchFlag:Z,dynamicChildren:Q,dirs:ye}=O;Z|=D.patchFlag&16;const se=D.props||Xe,ge=O.props||Xe;let Ce;if(L&&ks(L,!1),(Ce=ge.onVnodeBeforeUpdate)&&On(Ce,L,O,D),ye&&xs(O,D,L,"beforeUpdate"),L&&ks(L,!0),(se.innerHTML&&ge.innerHTML==null||se.textContent&&ge.textContent==null)&&d(ee,""),Q?k(D.dynamicChildren,Q,ee,L,G,Pc(O,Y),W):ie||Fe(D,O,ee,null,L,G,Pc(O,Y),W,!1),Z>0){if(Z&16)N(ee,se,ge,L,Y);else if(Z&2&&se.class!==ge.class&&i(ee,"class",null,ge.class,Y),Z&4&&i(ee,"style",se.style,ge.style,Y),Z&8){const we=O.dynamicProps;for(let Oe=0;Oe<we.length;Oe++){const Be=we[Oe],xt=se[Be],kt=ge[Be];(kt!==xt||Be==="value")&&i(ee,Be,xt,kt,Y,L)}}Z&1&&D.children!==O.children&&d(ee,O.children)}else!ie&&Q==null&&N(ee,se,ge,L,Y);((Ce=ge.onVnodeUpdated)||ye)&&on(()=>{Ce&&On(Ce,L,O,D),ye&&xs(O,D,L,"updated")},G)},k=(D,O,L,G,Y,W,ie)=>{for(let ee=0;ee<O.length;ee++){const Z=D[ee],Q=O[ee],ye=Z.el&&(Z.type===Je||!Ns(Z,Q)||Z.shapeFlag&198)?h(Z.el):L;E(Z,Q,ye,null,G,Y,W,ie,!0)}},N=(D,O,L,G,Y)=>{if(O!==L){if(O!==Xe)for(const W in O)!Io(W)&&!(W in L)&&i(D,W,O[W],null,Y,G);for(const W in L){if(Io(W))continue;const ie=L[W],ee=O[W];ie!==ee&&W!=="value"&&i(D,W,ee,ie,Y,G)}"value"in L&&i(D,"value",O.value,L.value,Y)}},P=(D,O,L,G,Y,W,ie,ee,Z)=>{const Q=O.el=D?D.el:a(""),ye=O.anchor=D?D.anchor:a("");let{patchFlag:se,dynamicChildren:ge,slotScopeIds:Ce}=O;Ce&&(ee=ee?ee.concat(Ce):Ce),D==null?(r(Q,L,G),r(ye,L,G),w(O.children||[],L,ye,Y,W,ie,ee,Z)):se>0&&se&64&&ge&&D.dynamicChildren?(k(D.dynamicChildren,ge,L,Y,W,ie,ee),(O.key!=null||Y&&O===Y.subTree)&&E_(D,O,!0)):Fe(D,O,L,ye,Y,W,ie,ee,Z)},x=(D,O,L,G,Y,W,ie,ee,Z)=>{O.slotScopeIds=ee,D==null?O.shapeFlag&512?Y.ctx.activate(O,L,G,ie,Z):Pe(O,L,G,Y,W,ie,Z):ae(D,O,Z)},Pe=(D,O,L,G,Y,W,ie)=>{const ee=D.component=KE(D,G,Y);if(Tl(D)&&(ee.ctx.renderer=fe),QE(ee,!1,ie),ee.asyncDep){if(Y&&Y.registerDep(ee,ue,ie),!D.el){const Z=ee.subTree=ke(Qt);C(null,Z,O,L)}}else ue(ee,D,O,L,Y,W,ie)},ae=(D,O,L)=>{const G=O.component=D.component;if($E(D,O,L))if(G.asyncDep&&!G.asyncResolved){de(G,O,L);return}else G.next=O,G.update();else O.el=D.el,G.vnode=O},ue=(D,O,L,G,Y,W,ie)=>{const ee=()=>{if(D.isMounted){let{next:se,bu:ge,u:Ce,parent:we,vnode:Oe}=D;{const Mt=w_(D);if(Mt){se&&(se.el=Oe.el,de(D,se,ie)),Mt.asyncDep.then(()=>{D.isUnmounted||ee()});return}}let Be=se,xt;ks(D,!1),se?(se.el=Oe.el,de(D,se,ie)):se=Oe,ge&&yu(ge),(xt=se.props&&se.props.onVnodeBeforeUpdate)&&On(xt,we,se,Oe),ks(D,!0);const kt=op(D),pn=D.subTree;D.subTree=kt,E(pn,kt,h(pn.el),H(pn),D,Y,W),se.el=kt.el,Be===null&&UE(D,kt.el),Ce&&on(Ce,Y),(xt=se.props&&se.props.onVnodeUpdated)&&on(()=>On(xt,we,se,Oe),Y)}else{let se;const{el:ge,props:Ce}=O,{bm:we,m:Oe,parent:Be,root:xt,type:kt}=D,pn=ko(O);ks(D,!1),we&&yu(we),!pn&&(se=Ce&&Ce.onVnodeBeforeMount)&&On(se,Be,O),ks(D,!0);{xt.ce&&xt.ce._def.shadowRoot!==!1&&xt.ce._injectChildStyle(kt);const Mt=D.subTree=op(D);E(null,Mt,L,G,D,Y,W),O.el=Mt.el}if(Oe&&on(Oe,Y),!pn&&(se=Ce&&Ce.onVnodeMounted)){const Mt=O;on(()=>On(se,Be,Mt),Y)}(O.shapeFlag&256||Be&&ko(Be.vnode)&&Be.vnode.shapeFlag&256)&&D.a&&on(D.a,Y),D.isMounted=!0,O=L=G=null}};D.scope.on();const Z=D.effect=new P1(ee);D.scope.off();const Q=D.update=Z.run.bind(Z),ye=D.job=Z.runIfDirty.bind(Z);ye.i=D,ye.id=D.uid,Z.scheduler=()=>Nf(ye),ks(D,!0),Q()},de=(D,O,L)=>{O.component=D;const G=D.vnode.props;D.vnode=O,D.next=null,AE(D,O.props,G,L),CE(D,O.children,L),gr(),J0(D),_r()},Fe=(D,O,L,G,Y,W,ie,ee,Z=!1)=>{const Q=D&&D.children,ye=D?D.shapeFlag:0,se=O.children,{patchFlag:ge,shapeFlag:Ce}=O;if(ge>0){if(ge&128){ne(Q,se,L,G,Y,W,ie,ee,Z);return}else if(ge&256){Se(Q,se,L,G,Y,W,ie,ee,Z);return}}Ce&8?(ye&16&&wt(Q,Y,W),se!==Q&&d(L,se)):ye&16?Ce&16?ne(Q,se,L,G,Y,W,ie,ee,Z):wt(Q,Y,W,!0):(ye&8&&d(L,""),Ce&16&&w(se,L,G,Y,W,ie,ee,Z))},Se=(D,O,L,G,Y,W,ie,ee,Z)=>{D=D||gi,O=O||gi;const Q=D.length,ye=O.length,se=Math.min(Q,ye);let ge;for(ge=0;ge<se;ge++){const Ce=O[ge]=Z?Br(O[ge]):Mn(O[ge]);E(D[ge],Ce,L,null,Y,W,ie,ee,Z)}Q>ye?wt(D,Y,W,!0,!1,se):w(O,L,G,Y,W,ie,ee,Z,se)},ne=(D,O,L,G,Y,W,ie,ee,Z)=>{let Q=0;const ye=O.length;let se=D.length-1,ge=ye-1;for(;Q<=se&&Q<=ge;){const Ce=D[Q],we=O[Q]=Z?Br(O[Q]):Mn(O[Q]);if(Ns(Ce,we))E(Ce,we,L,null,Y,W,ie,ee,Z);else break;Q++}for(;Q<=se&&Q<=ge;){const Ce=D[se],we=O[ge]=Z?Br(O[ge]):Mn(O[ge]);if(Ns(Ce,we))E(Ce,we,L,null,Y,W,ie,ee,Z);else break;se--,ge--}if(Q>se){if(Q<=ge){const Ce=ge+1,we=Ce<ye?O[Ce].el:G;for(;Q<=ge;)E(null,O[Q]=Z?Br(O[Q]):Mn(O[Q]),L,we,Y,W,ie,ee,Z),Q++}}else if(Q>ge)for(;Q<=se;)Ue(D[Q],Y,W,!0),Q++;else{const Ce=Q,we=Q,Oe=new Map;for(Q=we;Q<=ge;Q++){const Dt=O[Q]=Z?Br(O[Q]):Mn(O[Q]);Dt.key!=null&&Oe.set(Dt.key,Q)}let Be,xt=0;const kt=ge-we+1;let pn=!1,Mt=0;const Dr=new Array(kt);for(Q=0;Q<kt;Q++)Dr[Q]=0;for(Q=Ce;Q<=se;Q++){const Dt=D[Q];if(xt>=kt){Ue(Dt,Y,W,!0);continue}let mn;if(Dt.key!=null)mn=Oe.get(Dt.key);else for(Be=we;Be<=ge;Be++)if(Dr[Be-we]===0&&Ns(Dt,O[Be])){mn=Be;break}mn===void 0?Ue(Dt,Y,W,!0):(Dr[mn-we]=Q+1,mn>=Mt?Mt=mn:pn=!0,E(Dt,O[mn],L,null,Y,W,ie,ee,Z),xt++)}const Ji=pn?PE(Dr):gi;for(Be=Ji.length-1,Q=kt-1;Q>=0;Q--){const Dt=we+Q,mn=O[Dt],$a=Dt+1<ye?O[Dt+1].el:G;Dr[Q]===0?E(null,mn,L,$a,Y,W,ie,ee,Z):pn&&(Be<0||Q!==Ji[Be]?pe(mn,L,$a,2):Be--)}}},pe=(D,O,L,G,Y=null)=>{const{el:W,type:ie,transition:ee,children:Z,shapeFlag:Q}=D;if(Q&6){pe(D.component.subTree,O,L,G);return}if(Q&128){D.suspense.move(O,L,G);return}if(Q&64){ie.move(D,O,L,fe);return}if(ie===Je){r(W,O,L);for(let se=0;se<Z.length;se++)pe(Z[se],O,L,G);r(D.anchor,O,L);return}if(ie===vu){F(D,O,L);return}if(G!==2&&Q&1&&ee)if(G===0)ee.beforeEnter(W),r(W,O,L),on(()=>ee.enter(W),Y);else{const{leave:se,delayLeave:ge,afterLeave:Ce}=ee,we=()=>{D.ctx.isUnmounted?s(W):r(W,O,L)},Oe=()=>{se(W,()=>{we(),Ce&&Ce()})};ge?ge(W,we,Oe):Oe()}else r(W,O,L)},Ue=(D,O,L,G=!1,Y=!1)=>{const{type:W,props:ie,ref:ee,children:Z,dynamicChildren:Q,shapeFlag:ye,patchFlag:se,dirs:ge,cacheIndex:Ce}=D;if(se===-2&&(Y=!1),ee!=null&&(gr(),xo(ee,null,L,D,!0),_r()),Ce!=null&&(O.renderCache[Ce]=void 0),ye&256){O.ctx.deactivate(D);return}const we=ye&1&&ge,Oe=!ko(D);let Be;if(Oe&&(Be=ie&&ie.onVnodeBeforeUnmount)&&On(Be,O,D),ye&6)ft(D.component,L,G);else{if(ye&128){D.suspense.unmount(L,G);return}we&&xs(D,null,O,"beforeUnmount"),ye&64?D.type.remove(D,O,L,fe,G):Q&&!Q.hasOnce&&(W!==Je||se>0&&se&64)?wt(Q,O,L,!1,!0):(W===Je&&se&384||!Y&&ye&16)&&wt(Z,O,L),G&&Ge(D)}(Oe&&(Be=ie&&ie.onVnodeUnmounted)||we)&&on(()=>{Be&&On(Be,O,D),we&&xs(D,null,O,"unmounted")},L)},Ge=D=>{const{type:O,el:L,anchor:G,transition:Y}=D;if(O===Je){hn(L,G);return}if(O===vu){V(D);return}const W=()=>{s(L),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(D.shapeFlag&1&&Y&&!Y.persisted){const{leave:ie,delayLeave:ee}=Y,Z=()=>ie(L,W);ee?ee(D.el,W,Z):Z()}else W()},hn=(D,O)=>{let L;for(;D!==O;)L=m(D),s(D),D=L;s(O)},ft=(D,O,L)=>{const{bum:G,scope:Y,job:W,subTree:ie,um:ee,m:Z,a:Q,parent:ye,slots:{__:se}}=D;ip(Z),ip(Q),G&&yu(G),ye&&ve(se)&&se.forEach(ge=>{ye.renderCache[ge]=void 0}),Y.stop(),W&&(W.flags|=8,Ue(ie,D,O,L)),ee&&on(ee,O),on(()=>{D.isUnmounted=!0},O),O&&O.pendingBranch&&!O.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===O.pendingId&&(O.deps--,O.deps===0&&O.resolve())},wt=(D,O,L,G=!1,Y=!1,W=0)=>{for(let ie=W;ie<D.length;ie++)Ue(D[ie],O,L,G,Y)},H=D=>{if(D.shapeFlag&6)return H(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const O=m(D.anchor||D.el),L=O&&O[J3];return L?m(L):O};let le=!1;const re=(D,O,L)=>{D==null?O._vnode&&Ue(O._vnode,null,null,!0):E(O._vnode||null,D,O,null,null,null,L),O._vnode=D,le||(le=!0,J0(),X1(),le=!1)},fe={p:E,um:Ue,m:pe,r:Ge,mt:Pe,mc:w,pc:Fe,pbc:k,n:H,o:t};return{render:re,hydrate:void 0,createApp:bE(re)}}function Pc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ks({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function DE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function E_(t,e,n=!1){const r=t.children,s=e.children;if(ve(r)&&ve(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Br(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&E_(o,a)),a.type===Cl&&(a.el=o.el),a.type===Qt&&!a.el&&(a.el=o.el)}}function PE(t){const e=t.slice(),n=[0];let r,s,i,o,a;const u=t.length;for(r=0;r<u;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function w_(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:w_(e)}function ip(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const RE=Symbol.for("v-scx"),OE=()=>Me(RE);function Ze(t,e,n){return A_(t,e,n)}function A_(t,e,n=Xe){const{immediate:r,deep:s,flush:i,once:o}=n,a=Ct({},n),u=e&&r||!e&&i!=="post";let c;if(Ko){if(i==="sync"){const g=OE();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!u){const g=()=>{};return g.stop=jn,g.resume=jn,g.pause=jn,g}}const d=Nt;a.call=(g,v,E)=>Cn(g,d,v,E);let h=!1;i==="post"?a.scheduler=g=>{on(g,d&&d.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(g,v)=>{v?g():Nf(g)}),a.augmentJob=g=>{e&&(g.flags|=4),h&&(g.flags|=2,d&&(g.id=d.uid,g.i=d))};const m=K3(t,e,a);return Ko&&(c?c.push(m):u&&m()),m}function NE(t,e,n){const r=this.proxy,s=gt(t)?t.includes(".")?T_(r,t):()=>r[t]:t.bind(r,r);let i;Re(e)?i=e:(i=e.handler,n=e);const o=_a(this),a=A_(s,i.bind(r),n);return o(),a}function T_(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const FE=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ss(e)}Modifiers`]||t[`${Ys(e)}Modifiers`];function VE(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Xe;let s=n;const i=e.startsWith("update:"),o=i&&FE(r,e.slice(7));o&&(o.trim&&(s=n.map(d=>gt(d)?d.trim():d)),o.number&&(s=n.map(Nu)));let a,u=r[a=Tc(e)]||r[a=Tc(ss(e))];!u&&i&&(u=r[a=Tc(Ys(e))]),u&&Cn(u,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Cn(c,t,6,s)}}function I_(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Re(t)){const u=c=>{const d=I_(c,e,!0);d&&(a=!0,Ct(o,d))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!a?(et(t)&&r.set(t,null),null):(ve(i)?i.forEach(u=>o[u]=null):Ct(o,i),et(t)&&r.set(t,o),o)}function Sl(t,e){return!t||!_l(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ke(t,e[0].toLowerCase()+e.slice(1))||Ke(t,Ys(e))||Ke(t,e))}function op(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:u,render:c,renderCache:d,props:h,data:m,setupState:g,ctx:v,inheritAttrs:E}=t,A=$u(t);let C,R;try{if(n.shapeFlag&4){const V=s||r,U=V;C=Mn(c.call(U,V,d,h,g,m,v)),R=a}else{const V=e;C=Mn(V.length>1?V(h,{attrs:a,slots:o,emit:u}):V(h,null)),R=e.props?a:ME(a)}}catch(V){Po.length=0,wl(V,t,1),C=ke(Qt)}let F=C;if(R&&E!==!1){const V=Object.keys(R),{shapeFlag:U}=F;V.length&&U&7&&(i&&V.some(wf)&&(R=LE(R,i)),F=as(F,R,!1,!0))}return n.dirs&&(F=as(F,null,!1,!0),F.dirs=F.dirs?F.dirs.concat(n.dirs):n.dirs),n.transition&&Go(F,n.transition),C=F,$u(A),C}const ME=t=>{let e;for(const n in t)(n==="class"||n==="style"||_l(n))&&((e||(e={}))[n]=t[n]);return e},LE=(t,e)=>{const n={};for(const r in t)(!wf(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function $E(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:u}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?ap(r,o,c):!!o;if(u&8){const d=e.dynamicProps;for(let h=0;h<d.length;h++){const m=d[h];if(o[m]!==r[m]&&!Sl(c,m))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?ap(r,o,c):!0:!!o;return!1}function ap(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Sl(n,i))return!0}return!1}function UE({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const S_=t=>t.__isSuspense;function BE(t,e){e&&e.pendingBranch?ve(t)?e.effects.push(...t):e.effects.push(t):X3(t)}const Je=Symbol.for("v-fgt"),Cl=Symbol.for("v-txt"),Qt=Symbol.for("v-cmt"),vu=Symbol.for("v-stc"),Po=[];let un=null;function B(t=!1){Po.push(un=t?null:[])}function jE(){Po.pop(),un=Po[Po.length-1]||null}let Wo=1;function up(t,e=!1){Wo+=t,t<0&&un&&e&&(un.hasOnce=!0)}function C_(t){return t.dynamicChildren=Wo>0?un||gi:null,jE(),Wo>0&&un&&un.push(t),t}function q(t,e,n,r,s,i){return C_(f(t,e,n,r,s,i,!0))}function Dn(t,e,n,r,s){return C_(ke(t,e,n,r,s,!0))}function Bu(t){return t?t.__v_isVNode===!0:!1}function Ns(t,e){return t.type===e.type&&t.key===e.key}const x_=({key:t})=>t??null,bu=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?gt(t)||mt(t)||Re(t)?{i:tn,r:t,k:e,f:!!n}:t:null);function f(t,e=null,n=null,r=0,s=null,i=t===Je?0:1,o=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&x_(e),ref:e&&bu(e),scopeId:Z1,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:tn};return a?($f(u,n),i&128&&t.normalize(u)):n&&(u.shapeFlag|=gt(n)?8:16),Wo>0&&!o&&un&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&un.push(u),u}const ke=qE;function qE(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===fE)&&(t=Qt),Bu(t)){const a=as(t,e,!0);return n&&$f(a,n),Wo>0&&!i&&un&&(a.shapeFlag&6?un[un.indexOf(t)]=a:un.push(a)),a.patchFlag=-2,a}if(ew(t)&&(t=t.__vccOpts),e){e=zE(e);let{class:a,style:u}=e;a&&!gt(a)&&(e.class=is(a)),et(u)&&(Rf(u)&&!ve(u)&&(u=Ct({},u)),e.style=bl(u))}const o=gt(t)?1:S_(t)?128:e_(t)?64:et(t)?4:Re(t)?2:0;return f(t,e,n,r,s,o,i,!0)}function zE(t){return t?Rf(t)||m_(t)?Ct({},t):t:null}function as(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:u}=t,c=e?HE(s||{},e):s,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&x_(c),ref:e&&e.ref?n&&i?ve(i)?i.concat(bu(e)):[i,bu(e)]:bu(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Je?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&as(t.ssContent),ssFallback:t.ssFallback&&as(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&r&&Go(d,u.clone(d)),d}function lt(t=" ",e=0){return ke(Cl,null,t,e)}function k_(t,e){const n=ke(vu,null,t);return n.staticCount=e,n}function he(t="",e=!1){return e?(B(),Dn(Qt,null,t)):ke(Qt,null,t)}function Mn(t){return t==null||typeof t=="boolean"?ke(Qt):ve(t)?ke(Je,null,t.slice()):Bu(t)?Br(t):ke(Cl,null,String(t))}function Br(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:as(t)}function $f(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ve(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),$f(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!m_(e)?e._ctx=tn:s===3&&tn&&(tn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Re(e)?(e={default:e,_ctx:tn},n=32):(e=String(e),r&64?(n=16,e=[lt(e)]):n=8);t.children=e,t.shapeFlag|=n}function HE(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=is([e.class,r.class]));else if(s==="style")e.style=bl([e.style,r.style]);else if(_l(s)){const i=e[s],o=r[s];o&&i!==o&&!(ve(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function On(t,e,n,r=null){Cn(t,e,7,[n,r])}const GE=f_();let WE=0;function KE(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||GE,i={uid:WE++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new x1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:__(r,s),emitsOptions:I_(r,s),emit:null,emitted:null,propsDefaults:Xe,inheritAttrs:r.inheritAttrs,ctx:Xe,data:Xe,props:Xe,attrs:Xe,slots:Xe,refs:Xe,setupState:Xe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=VE.bind(null,i),t.ce&&t.ce(i),i}let Nt=null;const YE=()=>Nt||tn;let ju,vd;{const t=vl(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};ju=e("__VUE_INSTANCE_SETTERS__",n=>Nt=n),vd=e("__VUE_SSR_SETTERS__",n=>Ko=n)}const _a=t=>{const e=Nt;return ju(t),t.scope.on(),()=>{t.scope.off(),ju(e)}},lp=()=>{Nt&&Nt.scope.off(),ju(null)};function D_(t){return t.vnode.shapeFlag&4}let Ko=!1;function QE(t,e=!1,n=!1){e&&vd(e);const{props:r,children:s}=t.vnode,i=D_(t);wE(t,r,i,e),SE(t,s,n||e);const o=i?XE(t,e):void 0;return e&&vd(!1),o}function XE(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,hE);const{setup:r}=n;if(r){gr();const s=t.setupContext=r.length>1?ZE(t):null,i=_a(t),o=ga(r,t,0,[t.props,s]),a=E1(o);if(_r(),i(),(a||t.sp)&&!ko(t)&&o_(t),a){if(o.then(lp,lp),e)return o.then(u=>{cp(t,u)}).catch(u=>{wl(u,t,0)});t.asyncDep=o}else cp(t,o)}else P_(t)}function cp(t,e,n){Re(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:et(e)&&(t.setupState=K1(e)),P_(t)}function P_(t,e,n){const r=t.type;t.render||(t.render=r.render||jn);{const s=_a(t);gr();try{pE(t)}finally{_r(),s()}}}const JE={get(t,e){return qt(t,"get",""),t[e]}};function ZE(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,JE),slots:t.slots,emit:t.emit,expose:e}}function xl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(K1(Of(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Do)return Do[n](t)},has(e,n){return n in e||n in Do}})):t.proxy}function ew(t){return Re(t)&&"__vccOpts"in t}const Ee=(t,e)=>G3(t,e,Ko);function Si(t,e,n){const r=arguments.length;return r===2?et(e)&&!ve(e)?Bu(e)?ke(t,null,[e]):ke(t,e):ke(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Bu(n)&&(n=[n]),ke(t,e,n))}const tw="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bd;const dp=typeof window<"u"&&window.trustedTypes;if(dp)try{bd=dp.createPolicy("vue",{createHTML:t=>t})}catch{}const R_=bd?t=>bd.createHTML(t):t=>t,nw="http://www.w3.org/2000/svg",rw="http://www.w3.org/1998/Math/MathML",ir=typeof document<"u"?document:null,fp=ir&&ir.createElement("template"),sw={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?ir.createElementNS(nw,t):e==="mathml"?ir.createElementNS(rw,t):n?ir.createElement(t,{is:n}):ir.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>ir.createTextNode(t),createComment:t=>ir.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ir.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{fp.innerHTML=R_(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=fp.content;if(r==="svg"||r==="mathml"){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Nr="transition",ho="animation",Yo=Symbol("_vtc"),O_={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},iw=Ct({},t_,O_),ow=t=>(t.displayName="Transition",t.props=iw,t),vs=ow((t,{slots:e})=>Si(tE,aw(t),e)),Ds=(t,e=[])=>{ve(t)?t.forEach(n=>n(...e)):t&&t(...e)},hp=t=>t?ve(t)?t.some(e=>e.length>1):t.length>1:!1;function aw(t){const e={};for(const P in t)P in O_||(e[P]=t[P]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:u=i,appearActiveClass:c=o,appearToClass:d=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,v=uw(s),E=v&&v[0],A=v&&v[1],{onBeforeEnter:C,onEnter:R,onEnterCancelled:F,onLeave:V,onLeaveCancelled:U,onBeforeAppear:M=C,onAppear:S=R,onAppearCancelled:w=F}=e,T=(P,x,Pe,ae)=>{P._enterCancelled=ae,Ps(P,x?d:a),Ps(P,x?c:o),Pe&&Pe()},k=(P,x)=>{P._isLeaving=!1,Ps(P,h),Ps(P,g),Ps(P,m),x&&x()},N=P=>(x,Pe)=>{const ae=P?S:R,ue=()=>T(x,P,Pe);Ds(ae,[x,ue]),pp(()=>{Ps(x,P?u:i),rr(x,P?d:a),hp(ae)||mp(x,r,E,ue)})};return Ct(e,{onBeforeEnter(P){Ds(C,[P]),rr(P,i),rr(P,o)},onBeforeAppear(P){Ds(M,[P]),rr(P,u),rr(P,c)},onEnter:N(!1),onAppear:N(!0),onLeave(P,x){P._isLeaving=!0;const Pe=()=>k(P,x);rr(P,h),P._enterCancelled?(rr(P,m),yp()):(yp(),rr(P,m)),pp(()=>{P._isLeaving&&(Ps(P,h),rr(P,g),hp(V)||mp(P,r,A,Pe))}),Ds(V,[P,Pe])},onEnterCancelled(P){T(P,!1,void 0,!0),Ds(F,[P])},onAppearCancelled(P){T(P,!0,void 0,!0),Ds(w,[P])},onLeaveCancelled(P){k(P),Ds(U,[P])}})}function uw(t){if(t==null)return null;if(et(t))return[Rc(t.enter),Rc(t.leave)];{const e=Rc(t);return[e,e]}}function Rc(t){return d3(t)}function rr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Yo]||(t[Yo]=new Set)).add(e)}function Ps(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Yo];n&&(n.delete(e),n.size||(t[Yo]=void 0))}function pp(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let lw=0;function mp(t,e,n,r){const s=t._endId=++lw,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:u}=cw(t,e);if(!o)return r();const c=o+"end";let d=0;const h=()=>{t.removeEventListener(c,m),i()},m=g=>{g.target===t&&++d>=u&&h()};setTimeout(()=>{d<u&&h()},a+1),t.addEventListener(c,m)}function cw(t,e){const n=window.getComputedStyle(t),r=v=>(n[v]||"").split(", "),s=r(`${Nr}Delay`),i=r(`${Nr}Duration`),o=gp(s,i),a=r(`${ho}Delay`),u=r(`${ho}Duration`),c=gp(a,u);let d=null,h=0,m=0;e===Nr?o>0&&(d=Nr,h=o,m=i.length):e===ho?c>0&&(d=ho,h=c,m=u.length):(h=Math.max(o,c),d=h>0?o>c?Nr:ho:null,m=d?d===Nr?i.length:u.length:0);const g=d===Nr&&/\b(transform|all)(,|$)/.test(r(`${Nr}Property`).toString());return{type:d,timeout:h,propCount:m,hasTransform:g}}function gp(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>_p(n)+_p(t[r])))}function _p(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function yp(){return document.body.offsetHeight}function dw(t,e,n){const r=t[Yo];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const vp=Symbol("_vod"),fw=Symbol("_vsh"),hw=Symbol(""),pw=/(^|;)\s*display\s*:/;function mw(t,e,n){const r=t.style,s=gt(n);let i=!1;if(n&&!s){if(e)if(gt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Eu(r,a,"")}else for(const o in e)n[o]==null&&Eu(r,o,"");for(const o in n)o==="display"&&(i=!0),Eu(r,o,n[o])}else if(s){if(e!==n){const o=r[hw];o&&(n+=";"+o),r.cssText=n,i=pw.test(n)}}else e&&t.removeAttribute("style");vp in t&&(t[vp]=i?r.display:"",t[fw]&&(r.display="none"))}const bp=/\s*!important$/;function Eu(t,e,n){if(ve(n))n.forEach(r=>Eu(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=gw(t,e);bp.test(n)?t.setProperty(Ys(r),n.replace(bp,""),"important"):t[r]=n}}const Ep=["Webkit","Moz","ms"],Oc={};function gw(t,e){const n=Oc[e];if(n)return n;let r=ss(e);if(r!=="filter"&&r in t)return Oc[e]=r;r=T1(r);for(let s=0;s<Ep.length;s++){const i=Ep[s]+r;if(i in t)return Oc[e]=i}return e}const wp="http://www.w3.org/1999/xlink";function Ap(t,e,n,r,s,i=_3(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(wp,e.slice(6,e.length)):t.setAttributeNS(wp,e,n):n==null||i&&!I1(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Kn(n)?String(n):n)}function Tp(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?R_(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,u=n==null?t.type==="checkbox"?"on":"":String(n);(a!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=I1(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function zr(t,e,n,r){t.addEventListener(e,n,r)}function _w(t,e,n,r){t.removeEventListener(e,n,r)}const Ip=Symbol("_vei");function yw(t,e,n,r,s=null){const i=t[Ip]||(t[Ip]={}),o=i[e];if(r&&o)o.value=r;else{const[a,u]=vw(e);if(r){const c=i[e]=ww(r,s);zr(t,a,c,u)}else o&&(_w(t,a,o,u),i[e]=void 0)}}const Sp=/(?:Once|Passive|Capture)$/;function vw(t){let e;if(Sp.test(t)){e={};let r;for(;r=t.match(Sp);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ys(t.slice(2)),e]}let Nc=0;const bw=Promise.resolve(),Ew=()=>Nc||(bw.then(()=>Nc=0),Nc=Date.now());function ww(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Cn(Aw(r,n.value),e,5,[r])};return n.value=t,n.attached=Ew(),n}function Aw(t,e){if(ve(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Cp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Tw=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?dw(t,r,o):e==="style"?mw(t,n,r):_l(e)?wf(e)||yw(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Iw(t,e,r,o))?(Tp(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Ap(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!gt(r))?Tp(t,ss(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Ap(t,e,r,o))};function Iw(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Cp(e)&&Re(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Cp(e)&&gt(n)?!1:e in t}const Ci=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ve(e)?n=>yu(e,n):e};function Sw(t){t.target.composing=!0}function xp(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const hr=Symbol("_assign"),me={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[hr]=Ci(s);const i=r||s.props&&s.props.type==="number";zr(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Nu(a)),t[hr](a)}),n&&zr(t,"change",()=>{t.value=t.value.trim()}),e||(zr(t,"compositionstart",Sw),zr(t,"compositionend",xp),zr(t,"change",xp))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[hr]=Ci(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Nu(t.value):t.value,u=e??"";a!==u&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===u)||(t.value=u))}},ya={deep:!0,created(t,e,n){t[hr]=Ci(n),zr(t,"change",()=>{const r=t._modelValue,s=Qo(t),i=t.checked,o=t[hr];if(ve(r)){const a=If(r,s),u=a!==-1;if(i&&!u)o(r.concat(s));else if(!i&&u){const c=[...r];c.splice(a,1),o(c)}}else if(Ui(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(N_(t,i))})},mounted:kp,beforeUpdate(t,e,n){t[hr]=Ci(n),kp(t,e,n)}};function kp(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(ve(e))s=If(e,r.props.value)>-1;else if(Ui(e))s=e.has(r.props.value);else{if(e===n)return;s=ma(e,N_(t,!0))}t.checked!==s&&(t.checked=s)}const ct={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Ui(e);zr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Nu(Qo(o)):Qo(o));t[hr](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Al(()=>{t._assigning=!1})}),t[hr]=Ci(r)},mounted(t,{value:e}){Dp(t,e)},beforeUpdate(t,e,n){t[hr]=Ci(n)},updated(t,{value:e}){t._assigning||Dp(t,e)}};function Dp(t,e){const n=t.multiple,r=ve(e);if(!(n&&!r&&!Ui(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],a=Qo(o);if(n)if(r){const u=typeof a;u==="string"||u==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=If(e,a)>-1}else o.selected=e.has(a);else if(ma(Qo(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Qo(t){return"_value"in t?t._value:t.value}function N_(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Cw=["ctrl","shift","alt","meta"],xw={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Cw.some(n=>t[`${n}Key`]&&!e.includes(n))},st=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=xw[e[o]];if(a&&a(s,e))return}return t(s,...i)})},kw=Ct({patchProp:Tw},sw);let Pp;function Dw(){return Pp||(Pp=xE(kw))}const Pw=(...t)=>{const e=Dw().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=Ow(r);if(!s)return;const i=e._component;!Re(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,Rw(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function Rw(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Ow(t){return gt(t)?document.querySelector(t):t}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const li=typeof document<"u";function F_(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Nw(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&F_(t.default)}const We=Object.assign;function Fc(t,e){const n={};for(const r in e){const s=e[r];n[r]=xn(s)?s.map(t):t(s)}return n}const Ro=()=>{},xn=Array.isArray,V_=/#/g,Fw=/&/g,Vw=/\//g,Mw=/=/g,Lw=/\?/g,M_=/\+/g,$w=/%5B/g,Uw=/%5D/g,L_=/%5E/g,Bw=/%60/g,$_=/%7B/g,jw=/%7C/g,U_=/%7D/g,qw=/%20/g;function Uf(t){return encodeURI(""+t).replace(jw,"|").replace($w,"[").replace(Uw,"]")}function zw(t){return Uf(t).replace($_,"{").replace(U_,"}").replace(L_,"^")}function Ed(t){return Uf(t).replace(M_,"%2B").replace(qw,"+").replace(V_,"%23").replace(Fw,"%26").replace(Bw,"`").replace($_,"{").replace(U_,"}").replace(L_,"^")}function Hw(t){return Ed(t).replace(Mw,"%3D")}function Gw(t){return Uf(t).replace(V_,"%23").replace(Lw,"%3F")}function Ww(t){return t==null?"":Gw(t).replace(Vw,"%2F")}function Xo(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Kw=/\/$/,Yw=t=>t.replace(Kw,"");function Vc(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let u=e.indexOf("?");return a<u&&a>=0&&(u=-1),u>-1&&(r=e.slice(0,u),i=e.slice(u+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=Zw(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:Xo(o)}}function Qw(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Rp(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Xw(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&xi(e.matched[r],n.matched[s])&&B_(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function xi(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function B_(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Jw(t[n],e[n]))return!1;return!0}function Jw(t,e){return xn(t)?Op(t,e):xn(e)?Op(e,t):t===e}function Op(t,e){return xn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Zw(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Fr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Jo;(function(t){t.pop="pop",t.push="push"})(Jo||(Jo={}));var Oo;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Oo||(Oo={}));function e6(t){if(!t)if(li){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Yw(t)}const t6=/^[^#]+#/;function n6(t,e){return t.replace(t6,"#")+e}function r6(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const kl=()=>({left:window.scrollX,top:window.scrollY});function s6(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=r6(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Np(t,e){return(history.state?history.state.position-e:-1)+t}const wd=new Map;function i6(t,e){wd.set(t,e)}function o6(t){const e=wd.get(t);return wd.delete(t),e}let a6=()=>location.protocol+"//"+location.host;function j_(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,u=s.slice(a);return u[0]!=="/"&&(u="/"+u),Rp(u,"")}return Rp(n,t)+r+s}function u6(t,e,n,r){let s=[],i=[],o=null;const a=({state:m})=>{const g=j_(t,location),v=n.value,E=e.value;let A=0;if(m){if(n.value=g,e.value=m,o&&o===v){o=null;return}A=E?m.position-E.position:0}else r(g);s.forEach(C=>{C(n.value,v,{delta:A,type:Jo.pop,direction:A?A>0?Oo.forward:Oo.back:Oo.unknown})})};function u(){o=n.value}function c(m){s.push(m);const g=()=>{const v=s.indexOf(m);v>-1&&s.splice(v,1)};return i.push(g),g}function d(){const{history:m}=window;m.state&&m.replaceState(We({},m.state,{scroll:kl()}),"")}function h(){for(const m of i)m();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:u,listen:c,destroy:h}}function Fp(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?kl():null}}function l6(t){const{history:e,location:n}=window,r={value:j_(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(u,c,d){const h=t.indexOf("#"),m=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+u:a6()+t+u;try{e[d?"replaceState":"pushState"](c,"",m),s.value=c}catch(g){console.error(g),n[d?"replace":"assign"](m)}}function o(u,c){const d=We({},e.state,Fp(s.value.back,u,s.value.forward,!0),c,{position:s.value.position});i(u,d,!0),r.value=u}function a(u,c){const d=We({},s.value,e.state,{forward:u,scroll:kl()});i(d.current,d,!0);const h=We({},Fp(r.value,u,null),{position:d.position+1},c);i(u,h,!1),r.value=u}return{location:r,state:s,push:a,replace:o}}function c6(t){t=e6(t);const e=l6(t),n=u6(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=We({location:"",base:t,go:r,createHref:n6.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function d6(t){return typeof t=="string"||t&&typeof t=="object"}function q_(t){return typeof t=="string"||typeof t=="symbol"}const z_=Symbol("");var Vp;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Vp||(Vp={}));function ki(t,e){return We(new Error,{type:t,[z_]:!0},e)}function sr(t,e){return t instanceof Error&&z_ in t&&(e==null||!!(t.type&e))}const Mp="[^/]+?",f6={sensitive:!1,strict:!1,start:!0,end:!0},h6=/[.+*?^${}()[\]/\\]/g;function p6(t,e){const n=We({},f6,e),r=[];let s=n.start?"^":"";const i=[];for(const c of t){const d=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const m=c[h];let g=40+(n.sensitive?.25:0);if(m.type===0)h||(s+="/"),s+=m.value.replace(h6,"\\$&"),g+=40;else if(m.type===1){const{value:v,repeatable:E,optional:A,regexp:C}=m;i.push({name:v,repeatable:E,optional:A});const R=C||Mp;if(R!==Mp){g+=10;try{new RegExp(`(${R})`)}catch(V){throw new Error(`Invalid custom RegExp for param "${v}" (${R}): `+V.message)}}let F=E?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;h||(F=A&&c.length<2?`(?:/${F})`:"/"+F),A&&(F+="?"),s+=F,g+=20,A&&(g+=-8),E&&(g+=-20),R===".*"&&(g+=-50)}d.push(g)}r.push(d)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const d=c.match(o),h={};if(!d)return null;for(let m=1;m<d.length;m++){const g=d[m]||"",v=i[m-1];h[v.name]=g&&v.repeatable?g.split("/"):g}return h}function u(c){let d="",h=!1;for(const m of t){(!h||!d.endsWith("/"))&&(d+="/"),h=!1;for(const g of m)if(g.type===0)d+=g.value;else if(g.type===1){const{value:v,repeatable:E,optional:A}=g,C=v in c?c[v]:"";if(xn(C)&&!E)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const R=xn(C)?C.join("/"):C;if(!R)if(A)m.length<2&&(d.endsWith("/")?d=d.slice(0,-1):h=!0);else throw new Error(`Missing required param "${v}"`);d+=R}}return d||"/"}return{re:o,score:r,keys:i,parse:a,stringify:u}}function m6(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function H_(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=m6(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Lp(r))return 1;if(Lp(s))return-1}return s.length-r.length}function Lp(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const g6={type:0,value:""},_6=/[a-zA-Z0-9_]/;function y6(t){if(!t)return[[]];if(t==="/")return[[g6]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${c}": ${g}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,u,c="",d="";function h(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:d,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),c="")}function m(){c+=u}for(;a<t.length;){if(u=t[a++],u==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:u==="/"?(c&&h(),o()):u===":"?(h(),n=1):m();break;case 4:m(),n=r;break;case 1:u==="("?n=2:_6.test(u)?m():(h(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&a--);break;case 2:u===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+u:n=3:d+=u;break;case 3:h(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&a--,d="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}function v6(t,e,n){const r=p6(y6(t.path),n),s=We(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function b6(t,e){const n=[],r=new Map;e=jp({strict:!1,end:!0,sensitive:!1},e);function s(h){return r.get(h)}function i(h,m,g){const v=!g,E=Up(h);E.aliasOf=g&&g.record;const A=jp(e,h),C=[E];if("alias"in h){const V=typeof h.alias=="string"?[h.alias]:h.alias;for(const U of V)C.push(Up(We({},E,{components:g?g.record.components:E.components,path:U,aliasOf:g?g.record:E})))}let R,F;for(const V of C){const{path:U}=V;if(m&&U[0]!=="/"){const M=m.record.path,S=M[M.length-1]==="/"?"":"/";V.path=m.record.path+(U&&S+U)}if(R=v6(V,m,A),g?g.alias.push(R):(F=F||R,F!==R&&F.alias.push(R),v&&h.name&&!Bp(R)&&o(h.name)),G_(R)&&u(R),E.children){const M=E.children;for(let S=0;S<M.length;S++)i(M[S],R,g&&g.children[S])}g=g||R}return F?()=>{o(F)}:Ro}function o(h){if(q_(h)){const m=r.get(h);m&&(r.delete(h),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(h);m>-1&&(n.splice(m,1),h.record.name&&r.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return n}function u(h){const m=A6(h,n);n.splice(m,0,h),h.record.name&&!Bp(h)&&r.set(h.record.name,h)}function c(h,m){let g,v={},E,A;if("name"in h&&h.name){if(g=r.get(h.name),!g)throw ki(1,{location:h});A=g.record.name,v=We($p(m.params,g.keys.filter(F=>!F.optional).concat(g.parent?g.parent.keys.filter(F=>F.optional):[]).map(F=>F.name)),h.params&&$p(h.params,g.keys.map(F=>F.name))),E=g.stringify(v)}else if(h.path!=null)E=h.path,g=n.find(F=>F.re.test(E)),g&&(v=g.parse(E),A=g.record.name);else{if(g=m.name?r.get(m.name):n.find(F=>F.re.test(m.path)),!g)throw ki(1,{location:h,currentLocation:m});A=g.record.name,v=We({},m.params,h.params),E=g.stringify(v)}const C=[];let R=g;for(;R;)C.unshift(R.record),R=R.parent;return{name:A,path:E,params:v,matched:C,meta:w6(C)}}t.forEach(h=>i(h));function d(){n.length=0,r.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:d,getRoutes:a,getRecordMatcher:s}}function $p(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Up(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:E6(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function E6(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Bp(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function w6(t){return t.reduce((e,n)=>We(e,n.meta),{})}function jp(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function A6(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;H_(t,e[i])<0?r=i:n=i+1}const s=T6(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function T6(t){let e=t;for(;e=e.parent;)if(G_(e)&&H_(t,e)===0)return e}function G_({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function I6(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(M_," "),o=i.indexOf("="),a=Xo(o<0?i:i.slice(0,o)),u=o<0?null:Xo(i.slice(o+1));if(a in e){let c=e[a];xn(c)||(c=e[a]=[c]),c.push(u)}else e[a]=u}return e}function qp(t){let e="";for(let n in t){const r=t[n];if(n=Hw(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(xn(r)?r.map(i=>i&&Ed(i)):[r&&Ed(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function S6(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=xn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const C6=Symbol(""),zp=Symbol(""),Dl=Symbol(""),Bf=Symbol(""),Ad=Symbol("");function po(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function jr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,u)=>{const c=m=>{m===!1?u(ki(4,{from:n,to:e})):m instanceof Error?u(m):d6(m)?u(ki(2,{from:e,to:m})):(o&&r.enterCallbacks[s]===o&&typeof m=="function"&&o.push(m),a())},d=i(()=>t.call(r&&r.instances[s],e,n,c));let h=Promise.resolve(d);t.length<3&&(h=h.then(c)),h.catch(m=>u(m))})}function Mc(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let u=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(F_(u)){const d=(u.__vccOpts||u)[e];d&&i.push(jr(d,n,r,o,a,s))}else{let c=u();i.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const h=Nw(d)?d.default:d;o.mods[a]=d,o.components[a]=h;const g=(h.__vccOpts||h)[e];return g&&jr(g,n,r,o,a,s)()}))}}return i}function Hp(t){const e=Me(Dl),n=Me(Bf),r=Ee(()=>{const u=y(t.to);return e.resolve(u)}),s=Ee(()=>{const{matched:u}=r.value,{length:c}=u,d=u[c-1],h=n.matched;if(!d||!h.length)return-1;const m=h.findIndex(xi.bind(null,d));if(m>-1)return m;const g=Gp(u[c-2]);return c>1&&Gp(d)===g&&h[h.length-1].path!==g?h.findIndex(xi.bind(null,u[c-2])):m}),i=Ee(()=>s.value>-1&&R6(n.params,r.value.params)),o=Ee(()=>s.value>-1&&s.value===n.matched.length-1&&B_(n.params,r.value.params));function a(u={}){if(P6(u)){const c=e[y(t.replace)?"replace":"push"](y(t.to)).catch(Ro);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:Ee(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function x6(t){return t.length===1?t[0]:t}const k6=Ff({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Hp,setup(t,{slots:e}){const n=Qn(Hp(t)),{options:r}=Me(Dl),s=Ee(()=>({[Wp(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Wp(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&x6(e.default(n));return t.custom?i:Si("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),D6=k6;function P6(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function R6(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!xn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Gp(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Wp=(t,e,n)=>t??e??n,O6=Ff({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Me(Ad),s=Ee(()=>t.route||r.value),i=Me(zp,0),o=Ee(()=>{let c=y(i);const{matched:d}=s.value;let h;for(;(h=d[c])&&!h.components;)c++;return c}),a=Ee(()=>s.value.matched[o.value]);ur(zp,Ee(()=>o.value+1)),ur(C6,a),ur(Ad,s);const u=Ae();return Ze(()=>[u.value,a.value,t.name],([c,d,h],[m,g,v])=>{d&&(d.instances[h]=c,g&&g!==d&&c&&c===m&&(d.leaveGuards.size||(d.leaveGuards=g.leaveGuards),d.updateGuards.size||(d.updateGuards=g.updateGuards))),c&&d&&(!g||!xi(d,g)||!m)&&(d.enterCallbacks[h]||[]).forEach(E=>E(c))},{flush:"post"}),()=>{const c=s.value,d=t.name,h=a.value,m=h&&h.components[d];if(!m)return Kp(n.default,{Component:m,route:c});const g=h.props[d],v=g?g===!0?c.params:typeof g=="function"?g(c):g:null,A=Si(m,We({},v,e,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(h.instances[d]=null)},ref:u}));return Kp(n.default,{Component:A,route:c})||A}}});function Kp(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const W_=O6;function N6(t){const e=b6(t.routes,t),n=t.parseQuery||I6,r=t.stringifyQuery||qp,s=t.history,i=po(),o=po(),a=po(),u=$3(Fr);let c=Fr;li&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Fc.bind(null,H=>""+H),h=Fc.bind(null,Ww),m=Fc.bind(null,Xo);function g(H,le){let re,fe;return q_(H)?(re=e.getRecordMatcher(H),fe=le):fe=H,e.addRoute(fe,re)}function v(H){const le=e.getRecordMatcher(H);le&&e.removeRoute(le)}function E(){return e.getRoutes().map(H=>H.record)}function A(H){return!!e.getRecordMatcher(H)}function C(H,le){if(le=We({},le||u.value),typeof H=="string"){const L=Vc(n,H,le.path),G=e.resolve({path:L.path},le),Y=s.createHref(L.fullPath);return We(L,G,{params:m(G.params),hash:Xo(L.hash),redirectedFrom:void 0,href:Y})}let re;if(H.path!=null)re=We({},H,{path:Vc(n,H.path,le.path).path});else{const L=We({},H.params);for(const G in L)L[G]==null&&delete L[G];re=We({},H,{params:h(L)}),le.params=h(le.params)}const fe=e.resolve(re,le),qe=H.hash||"";fe.params=d(m(fe.params));const D=Qw(r,We({},H,{hash:zw(qe),path:fe.path})),O=s.createHref(D);return We({fullPath:D,hash:qe,query:r===qp?S6(H.query):H.query||{}},fe,{redirectedFrom:void 0,href:O})}function R(H){return typeof H=="string"?Vc(n,H,u.value.path):We({},H)}function F(H,le){if(c!==H)return ki(8,{from:le,to:H})}function V(H){return S(H)}function U(H){return V(We(R(H),{replace:!0}))}function M(H){const le=H.matched[H.matched.length-1];if(le&&le.redirect){const{redirect:re}=le;let fe=typeof re=="function"?re(H):re;return typeof fe=="string"&&(fe=fe.includes("?")||fe.includes("#")?fe=R(fe):{path:fe},fe.params={}),We({query:H.query,hash:H.hash,params:fe.path!=null?{}:H.params},fe)}}function S(H,le){const re=c=C(H),fe=u.value,qe=H.state,D=H.force,O=H.replace===!0,L=M(re);if(L)return S(We(R(L),{state:typeof L=="object"?We({},qe,L.state):qe,force:D,replace:O}),le||re);const G=re;G.redirectedFrom=le;let Y;return!D&&Xw(r,fe,re)&&(Y=ki(16,{to:G,from:fe}),pe(fe,fe,!0,!1)),(Y?Promise.resolve(Y):k(G,fe)).catch(W=>sr(W)?sr(W,2)?W:ne(W):Fe(W,G,fe)).then(W=>{if(W){if(sr(W,2))return S(We({replace:O},R(W.to),{state:typeof W.to=="object"?We({},qe,W.to.state):qe,force:D}),le||G)}else W=P(G,fe,!0,O,qe);return N(G,fe,W),W})}function w(H,le){const re=F(H,le);return re?Promise.reject(re):Promise.resolve()}function T(H){const le=hn.values().next().value;return le&&typeof le.runWithContext=="function"?le.runWithContext(H):H()}function k(H,le){let re;const[fe,qe,D]=F6(H,le);re=Mc(fe.reverse(),"beforeRouteLeave",H,le);for(const L of fe)L.leaveGuards.forEach(G=>{re.push(jr(G,H,le))});const O=w.bind(null,H,le);return re.push(O),wt(re).then(()=>{re=[];for(const L of i.list())re.push(jr(L,H,le));return re.push(O),wt(re)}).then(()=>{re=Mc(qe,"beforeRouteUpdate",H,le);for(const L of qe)L.updateGuards.forEach(G=>{re.push(jr(G,H,le))});return re.push(O),wt(re)}).then(()=>{re=[];for(const L of D)if(L.beforeEnter)if(xn(L.beforeEnter))for(const G of L.beforeEnter)re.push(jr(G,H,le));else re.push(jr(L.beforeEnter,H,le));return re.push(O),wt(re)}).then(()=>(H.matched.forEach(L=>L.enterCallbacks={}),re=Mc(D,"beforeRouteEnter",H,le,T),re.push(O),wt(re))).then(()=>{re=[];for(const L of o.list())re.push(jr(L,H,le));return re.push(O),wt(re)}).catch(L=>sr(L,8)?L:Promise.reject(L))}function N(H,le,re){a.list().forEach(fe=>T(()=>fe(H,le,re)))}function P(H,le,re,fe,qe){const D=F(H,le);if(D)return D;const O=le===Fr,L=li?history.state:{};re&&(fe||O?s.replace(H.fullPath,We({scroll:O&&L&&L.scroll},qe)):s.push(H.fullPath,qe)),u.value=H,pe(H,le,re,O),ne()}let x;function Pe(){x||(x=s.listen((H,le,re)=>{if(!ft.listening)return;const fe=C(H),qe=M(fe);if(qe){S(We(qe,{replace:!0,force:!0}),fe).catch(Ro);return}c=fe;const D=u.value;li&&i6(Np(D.fullPath,re.delta),kl()),k(fe,D).catch(O=>sr(O,12)?O:sr(O,2)?(S(We(R(O.to),{force:!0}),fe).then(L=>{sr(L,20)&&!re.delta&&re.type===Jo.pop&&s.go(-1,!1)}).catch(Ro),Promise.reject()):(re.delta&&s.go(-re.delta,!1),Fe(O,fe,D))).then(O=>{O=O||P(fe,D,!1),O&&(re.delta&&!sr(O,8)?s.go(-re.delta,!1):re.type===Jo.pop&&sr(O,20)&&s.go(-1,!1)),N(fe,D,O)}).catch(Ro)}))}let ae=po(),ue=po(),de;function Fe(H,le,re){ne(H);const fe=ue.list();return fe.length?fe.forEach(qe=>qe(H,le,re)):console.error(H),Promise.reject(H)}function Se(){return de&&u.value!==Fr?Promise.resolve():new Promise((H,le)=>{ae.add([H,le])})}function ne(H){return de||(de=!H,Pe(),ae.list().forEach(([le,re])=>H?re(H):le()),ae.reset()),H}function pe(H,le,re,fe){const{scrollBehavior:qe}=t;if(!li||!qe)return Promise.resolve();const D=!re&&o6(Np(H.fullPath,0))||(fe||!re)&&history.state&&history.state.scroll||null;return Al().then(()=>qe(H,le,D)).then(O=>O&&s6(O)).catch(O=>Fe(O,H,le))}const Ue=H=>s.go(H);let Ge;const hn=new Set,ft={currentRoute:u,listening:!0,addRoute:g,removeRoute:v,clearRoutes:e.clearRoutes,hasRoute:A,getRoutes:E,resolve:C,options:t,push:V,replace:U,go:Ue,back:()=>Ue(-1),forward:()=>Ue(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ue.add,isReady:Se,install(H){const le=this;H.component("RouterLink",D6),H.component("RouterView",W_),H.config.globalProperties.$router=le,Object.defineProperty(H.config.globalProperties,"$route",{enumerable:!0,get:()=>y(u)}),li&&!Ge&&u.value===Fr&&(Ge=!0,V(s.location).catch(qe=>{}));const re={};for(const qe in Fr)Object.defineProperty(re,qe,{get:()=>u.value[qe],enumerable:!0});H.provide(Dl,le),H.provide(Bf,H1(re)),H.provide(Ad,u);const fe=H.unmount;hn.add(H),H.unmount=function(){hn.delete(H),hn.size<1&&(c=Fr,x&&x(),x=null,u.value=Fr,Ge=!1,de=!1),fe()}}};function wt(H){return H.reduce((le,re)=>le.then(()=>T(re)),Promise.resolve())}return ft}function F6(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>xi(c,a))?r.push(a):n.push(a));const u=t.matched[o];u&&(e.matched.find(c=>xi(c,u))||s.push(u))}return[n,r,s]}function bs(){return Me(Dl)}function K_(t){return Me(Bf)}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Y_;const Pl=t=>Y_=t,Q_=Symbol();function Td(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var No;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(No||(No={}));function V6(){const t=k1(!0),e=t.run(()=>Ae({}));let n=[],r=[];const s=Of({install(i){Pl(s),s._a=i,i.provide(Q_,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const X_=()=>{};function Yp(t,e,n,r=X_){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&D1()&&v3(s),s}function si(t,...e){t.slice().forEach(n=>{n(...e)})}const M6=t=>t(),Qp=Symbol(),Lc=Symbol();function Id(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];Td(s)&&Td(r)&&t.hasOwnProperty(n)&&!mt(r)&&!Jr(r)?t[n]=Id(s,r):t[n]=r}return t}const L6=Symbol();function $6(t){return!Td(t)||!Object.prototype.hasOwnProperty.call(t,L6)}const{assign:Lr}=Object;function U6(t){return!!(mt(t)&&t.effect)}function B6(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let u;function c(){a||(n.state.value[t]=s?s():{});const d=j3(n.state.value[t]);return Lr(d,i,Object.keys(o||{}).reduce((h,m)=>(h[m]=Of(Ee(()=>{Pl(n);const g=n._s.get(t);return o[m].call(g,g)})),h),{}))}return u=J_(t,c,e,n,r,!0),u}function J_(t,e,n={},r,s,i){let o;const a=Lr({actions:{}},n),u={deep:!0};let c,d,h=[],m=[],g;const v=r.state.value[t];!i&&!v&&(r.state.value[t]={}),Ae({});let E;function A(w){let T;c=d=!1,typeof w=="function"?(w(r.state.value[t]),T={type:No.patchFunction,storeId:t,events:g}):(Id(r.state.value[t],w),T={type:No.patchObject,payload:w,storeId:t,events:g});const k=E=Symbol();Al().then(()=>{E===k&&(c=!0)}),d=!0,si(h,T,r.state.value[t])}const C=i?function(){const{state:T}=n,k=T?T():{};this.$patch(N=>{Lr(N,k)})}:X_;function R(){o.stop(),h=[],m=[],r._s.delete(t)}const F=(w,T="")=>{if(Qp in w)return w[Lc]=T,w;const k=function(){Pl(r);const N=Array.from(arguments),P=[],x=[];function Pe(de){P.push(de)}function ae(de){x.push(de)}si(m,{args:N,name:k[Lc],store:U,after:Pe,onError:ae});let ue;try{ue=w.apply(this&&this.$id===t?this:U,N)}catch(de){throw si(x,de),de}return ue instanceof Promise?ue.then(de=>(si(P,de),de)).catch(de=>(si(x,de),Promise.reject(de))):(si(P,ue),ue)};return k[Qp]=!0,k[Lc]=T,k},V={_p:r,$id:t,$onAction:Yp.bind(null,m),$patch:A,$reset:C,$subscribe(w,T={}){const k=Yp(h,w,T.detached,()=>N()),N=o.run(()=>Ze(()=>r.state.value[t],P=>{(T.flush==="sync"?d:c)&&w({storeId:t,type:No.direct,events:g},P)},Lr({},u,T)));return k},$dispose:R},U=Qn(V);r._s.set(t,U);const S=(r._a&&r._a.runWithContext||M6)(()=>r._e.run(()=>(o=k1()).run(()=>e({action:F}))));for(const w in S){const T=S[w];if(mt(T)&&!U6(T)||Jr(T))i||(v&&$6(T)&&(mt(T)?T.value=v[w]:Id(T,v[w])),r.state.value[t][w]=T);else if(typeof T=="function"){const k=F(T,w);S[w]=k,a.actions[w]=T}}return Lr(U,S),Lr(ze(U),S),Object.defineProperty(U,"$state",{get:()=>r.state.value[t],set:w=>{A(T=>{Lr(T,w)})}}),r._p.forEach(w=>{Lr(U,o.run(()=>w({store:U,app:r._a,pinia:r,options:a})))}),v&&i&&n.hydrate&&n.hydrate(U.$state,v),c=!0,d=!0,U}/*! #__NO_SIDE_EFFECTS__ */function Z_(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function i(o,a){const u=EE();return o=o||(u?Me(Q_,null):null),o&&Pl(o),o=Y_,o._s.has(t)||(s?J_(t,e,r,o):B6(t,r,o)),o._s.get(t)}return i.$id=t,i}const j6=()=>{};var Xp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},q6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},ty={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,g=c&63;u||(g=64,o||(m=64)),r.push(n[d],n[h],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ey(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):q6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new z6;const m=i<<2|a>>4;if(r.push(m),c!==64){const g=a<<4&240|c>>2;if(r.push(g),h!==64){const v=c<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class z6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const H6=function(t){const e=ey(t);return ty.encodeByteArray(e,!0)},qu=function(t){return H6(t).replace(/\./g,"")},ny=function(t){try{return ty.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6=()=>G6().__FIREBASE_DEFAULTS__,K6=()=>{if(typeof process>"u"||typeof Xp>"u")return;const t=Xp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Y6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ny(t[1]);return e&&JSON.parse(e)},Rl=()=>{try{return j6()||W6()||K6()||Y6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ry=t=>{var e,n;return(n=(e=Rl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Q6=t=>{const e=ry(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sy=()=>{var t;return(t=Rl())===null||t===void 0?void 0:t.config},iy=t=>{var e;return(e=Rl())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function oy(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qu(JSON.stringify(n)),qu(JSON.stringify(o)),""].join(".")}const Fo={};function Z6(){const t={prod:[],emulator:[]};for(const e of Object.keys(Fo))Fo[e]?t.emulator.push(e):t.prod.push(e);return t}function eA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Jp=!1;function ay(t,e){if(typeof window>"u"||typeof document>"u"||!Bi(window.location.host)||Fo[t]===e||Fo[t]||Jp)return;Fo[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=Z6().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Jp=!0,o()},m}function d(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=eA(r),g=n("text"),v=document.getElementById(g)||document.createElement("span"),E=n("learnmore"),A=document.getElementById(E)||document.createElement("a"),C=n("preprendIcon"),R=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const F=m.element;a(F),d(A,E);const V=c();u(R,C),F.append(R,v,A,V),document.body.appendChild(F)}i?(v.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function nA(){var t;const e=(t=Rl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function iA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oA(){const t=Ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function aA(){return!nA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uA(){try{return typeof indexedDB=="object"}catch{return!1}}function lA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="FirebaseError";class Sr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cA,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,va.prototype.create)}}class va{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?dA(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Sr(s,a,r)}}function dA(t,e){return t.replace(fA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const fA=/\{\$([^}]+)}/g;function hA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Bs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Zp(i)&&Zp(o)){if(!Bs(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Zp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _o(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function yo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function pA(t,e){const n=new mA(t,e);return n.subscribe.bind(n)}class mA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=$c),s.error===void 0&&(s.error=$c),s.complete===void 0&&(s.complete=$c);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $c(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(t){return t&&t._delegate?t._delegate:t}class js{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new X6;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vA(e))try{this.getOrInitializeService({instanceIdentifier:Os})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Os){return this.instances.has(e)}getOptions(e=Os){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Os){return this.component?this.component.multipleInstances?e:Os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yA(t){return t===Os?void 0:t}function vA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _A(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Le||(Le={}));const EA={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},wA=Le.INFO,AA={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},TA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=AA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jf{constructor(e){this.name=e,this._logLevel=wA,this._logHandler=TA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const IA=(t,e)=>e.some(n=>t instanceof n);let em,tm;function SA(){return em||(em=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CA(){return tm||(tm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uy=new WeakMap,Sd=new WeakMap,ly=new WeakMap,Uc=new WeakMap,qf=new WeakMap;function xA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Zr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&uy.set(n,t)}).catch(()=>{}),qf.set(e,t),e}function kA(t){if(Sd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Sd.set(t,e)}let Cd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ly.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DA(t){Cd=t(Cd)}function PA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bc(this),e,...n);return ly.set(r,e.sort?e.sort():[e]),Zr(r)}:CA().includes(t)?function(...e){return t.apply(Bc(this),e),Zr(uy.get(this))}:function(...e){return Zr(t.apply(Bc(this),e))}}function RA(t){return typeof t=="function"?PA(t):(t instanceof IDBTransaction&&kA(t),IA(t,SA())?new Proxy(t,Cd):t)}function Zr(t){if(t instanceof IDBRequest)return xA(t);if(Uc.has(t))return Uc.get(t);const e=RA(t);return e!==t&&(Uc.set(t,e),qf.set(e,t)),e}const Bc=t=>qf.get(t);function OA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Zr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Zr(o.result),u.oldVersion,u.newVersion,Zr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const NA=["get","getKey","getAll","getAllKeys","count"],FA=["put","add","delete","clear"],jc=new Map;function nm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jc.get(e))return jc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=FA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||NA.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&u.done]))[0]};return jc.set(e,i),i}DA(t=>({...t,get:(e,n,r)=>nm(e,n)||t.get(e,n,r),has:(e,n)=>!!nm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(MA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function MA(t){const e=t.getComponent();return e?.type==="VERSION"}const xd="@firebase/app",rm="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new jf("@firebase/app"),LA="@firebase/app-compat",$A="@firebase/analytics-compat",UA="@firebase/analytics",BA="@firebase/app-check-compat",jA="@firebase/app-check",qA="@firebase/auth",zA="@firebase/auth-compat",HA="@firebase/database",GA="@firebase/data-connect",WA="@firebase/database-compat",KA="@firebase/functions",YA="@firebase/functions-compat",QA="@firebase/installations",XA="@firebase/installations-compat",JA="@firebase/messaging",ZA="@firebase/messaging-compat",eT="@firebase/performance",tT="@firebase/performance-compat",nT="@firebase/remote-config",rT="@firebase/remote-config-compat",sT="@firebase/storage",iT="@firebase/storage-compat",oT="@firebase/firestore",aT="@firebase/ai",uT="@firebase/firestore-compat",lT="firebase",cT="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="[DEFAULT]",dT={[xd]:"fire-core",[LA]:"fire-core-compat",[UA]:"fire-analytics",[$A]:"fire-analytics-compat",[jA]:"fire-app-check",[BA]:"fire-app-check-compat",[qA]:"fire-auth",[zA]:"fire-auth-compat",[HA]:"fire-rtdb",[GA]:"fire-data-connect",[WA]:"fire-rtdb-compat",[KA]:"fire-fn",[YA]:"fire-fn-compat",[QA]:"fire-iid",[XA]:"fire-iid-compat",[JA]:"fire-fcm",[ZA]:"fire-fcm-compat",[eT]:"fire-perf",[tT]:"fire-perf-compat",[nT]:"fire-rc",[rT]:"fire-rc-compat",[sT]:"fire-gcs",[iT]:"fire-gcs-compat",[oT]:"fire-fst",[uT]:"fire-fst-compat",[aT]:"fire-vertex","fire-js":"fire-js",[lT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=new Map,fT=new Map,Dd=new Map;function sm(t,e){try{t.container.addComponent(e)}catch(n){yr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Di(t){const e=t.name;if(Dd.has(e))return yr.debug(`There were multiple attempts to register component ${e}.`),!1;Dd.set(e,t);for(const n of zu.values())sm(n,t);for(const n of fT.values())sm(n,t);return!0}function zf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function an(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},es=new va("app","Firebase",hT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=cT;function cy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:kd,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw es.create("bad-app-name",{appName:String(s)});if(n||(n=sy()),!n)throw es.create("no-options");const i=zu.get(s);if(i){if(Bs(n,i.options)&&Bs(r,i.config))return i;throw es.create("duplicate-app",{appName:s})}const o=new bA(s);for(const u of Dd.values())o.addComponent(u);const a=new pT(n,r,o);return zu.set(s,a),a}function dy(t=kd){const e=zu.get(t);if(!e&&t===kd&&sy())return cy();if(!e)throw es.create("no-app",{appName:t});return e}function ts(t,e,n){var r;let s=(r=dT[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yr.warn(a.join(" "));return}Di(new js(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="firebase-heartbeat-database",gT=1,Zo="firebase-heartbeat-store";let qc=null;function fy(){return qc||(qc=OA(mT,gT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zo)}catch(n){console.warn(n)}}}}).catch(t=>{throw es.create("idb-open",{originalErrorMessage:t.message})})),qc}async function _T(t){try{const n=(await fy()).transaction(Zo),r=await n.objectStore(Zo).get(hy(t));return await n.done,r}catch(e){if(e instanceof Sr)yr.warn(e.message);else{const n=es.create("idb-get",{originalErrorMessage:e?.message});yr.warn(n.message)}}}async function im(t,e){try{const r=(await fy()).transaction(Zo,"readwrite");await r.objectStore(Zo).put(e,hy(t)),await r.done}catch(n){if(n instanceof Sr)yr.warn(n.message);else{const r=es.create("idb-set",{originalErrorMessage:n?.message});yr.warn(r.message)}}}function hy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=1024,vT=30;class bT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=om();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>vT){const o=AT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){yr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=om(),{heartbeatsToSend:r,unsentEntries:s}=ET(this._heartbeatsCache.heartbeats),i=qu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return yr.warn(n),""}}}function om(){return new Date().toISOString().substring(0,10)}function ET(t,e=yT){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),am(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),am(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uA()?lA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _T(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return im(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return im(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function am(t){return qu(JSON.stringify({version:2,heartbeats:t})).length}function AT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t){Di(new js("platform-logger",e=>new VA(e),"PRIVATE")),Di(new js("heartbeat",e=>new bT(e),"PRIVATE")),ts(xd,rm,t),ts(xd,rm,"esm2017"),ts("fire-js","")}TT("");function Hf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function py(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IT=py,my=new va("auth","Firebase",py());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=new jf("@firebase/auth");function ST(t,...e){Hu.logLevel<=Le.WARN&&Hu.warn(`Auth (${ji}): ${t}`,...e)}function wu(t,...e){Hu.logLevel<=Le.ERROR&&Hu.error(`Auth (${ji}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t,...e){throw Wf(t,...e)}function Sn(t,...e){return Wf(t,...e)}function Gf(t,e,n){const r=Object.assign(Object.assign({},IT()),{[e]:n});return new va("auth","Firebase",r).create(e,{appName:t.name})}function pr(t){return Gf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function CT(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&bn(t,"argument-error"),Gf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return my.create(t,...e)}function Te(t,e,...n){if(!t)throw Wf(e,...n)}function dr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw wu(e),new Error(e)}function vr(t,e){t||dr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function xT(){return um()==="http:"||um()==="https:"}function um(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xT()||sA()||"connection"in navigator)?navigator.onLine:!0}function DT(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n){this.shortDelay=e,this.longDelay=n,vr(n>e,"Short delay should be less than long delay!"),this.isMobile=tA()||iA()}get(){return kT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(t,e){vr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],OT=new Ea(3e4,6e4);function Xn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Pn(t,e,n,r,s={}){return _y(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=ba(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},i);return rA()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Bi(t.emulatorConfig.host)&&(c.credentials="include"),gy.fetch()(await yy(t,t.config.apiHost,n,a),c)})}async function _y(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},PT),e);try{const s=new FT(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw iu(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw iu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw iu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw iu(t,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Gf(t,d,c);bn(t,d)}}catch(s){if(s instanceof Sr)throw s;bn(t,"network-request-failed",{message:String(s)})}}async function wa(t,e,n,r,s={}){const i=await Pn(t,e,n,r,s);return"mfaPendingCredential"in i&&bn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function yy(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Kf(t.config,s):`${t.config.apiScheme}://${s}`;return RT.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function NT(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class FT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sn(this.auth,"network-request-failed")),OT.get())})}}function iu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Sn(t,e,r);return s.customData._tokenResponse=n,s}function lm(t){return t!==void 0&&t.enterprise!==void 0}class VT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return NT(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function MT(t,e){return Pn(t,"GET","/v2/recaptchaConfig",Xn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LT(t,e){return Pn(t,"POST","/v1/accounts:delete",e)}async function Gu(t,e){return Pn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $T(t,e=!1){const n=dt(t),r=await n.getIdToken(e),s=Yf(r);Te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:Vo(zc(s.auth_time)),issuedAtTime:Vo(zc(s.iat)),expirationTime:Vo(zc(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function zc(t){return Number(t)*1e3}function Yf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return wu("JWT malformed, contained fewer than 3 sections"),null;try{const s=ny(n);return s?JSON.parse(s):(wu("Failed to decode base64 JWT payload"),null)}catch(s){return wu("Caught error parsing JWT payload as JSON",s?.toString()),null}}function cm(t){const e=Yf(t);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Sr&&UT(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function UT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vo(this.lastLoginAt),this.creationTime=Vo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Pi(t,Gu(n,{idToken:r}));Te(s?.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?vy(i.providerUserInfo):[],a=qT(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!a?.length,d=u?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Rd(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function jT(t){const e=dt(t);await Wu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qT(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function vy(t){return t.map(e=>{var{providerId:n}=e,r=Hf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zT(t,e){const n=await _y(t,{},async()=>{const r=ba({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await yy(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Bi(t.emulatorConfig.host)&&(u.credentials="include"),gy.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function HT(t,e){return Pn(t,"POST","/v2/accounts:revokeToken",Xn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=cm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await zT(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new vi;return r&&(Te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vi,this.toJSON())}_performRefresh(){return dr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(t,e){Te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Tn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Hf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Rd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Pi(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $T(this,e)}reload(){return jT(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Tn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(pr(this.auth));const e=await this.getIdToken();return await Pi(this,LT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,u,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,C=(c=n.createdAt)!==null&&c!==void 0?c:void 0,R=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:F,emailVerified:V,isAnonymous:U,providerData:M,stsTokenManager:S}=n;Te(F&&S,e,"internal-error");const w=vi.fromJSON(this.name,S);Te(typeof F=="string",e,"internal-error"),Vr(h,e.name),Vr(m,e.name),Te(typeof V=="boolean",e,"internal-error"),Te(typeof U=="boolean",e,"internal-error"),Vr(g,e.name),Vr(v,e.name),Vr(E,e.name),Vr(A,e.name),Vr(C,e.name),Vr(R,e.name);const T=new Tn({uid:F,auth:e,email:m,emailVerified:V,displayName:h,isAnonymous:U,photoURL:v,phoneNumber:g,tenantId:E,stsTokenManager:w,createdAt:C,lastLoginAt:R});return M&&Array.isArray(M)&&(T.providerData=M.map(k=>Object.assign({},k))),A&&(T._redirectEventId=A),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new vi;s.updateFromServerResponse(n);const i=new Tn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Wu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?vy(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,a=new vi;a.updateFromIdToken(r);const u=new Tn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Rd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm=new Map;function fr(t){vr(t instanceof Function,"Expected a class definition");let e=dm.get(t);return e?(vr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,dm.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}by.type="NONE";const fm=by;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t,e,n){return`firebase:${t}:${e}:${n}`}class bi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Au(this.userKey,s.apiKey,i),this.fullPersistenceKey=Au("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Gu(this.auth,{idToken:e}).catch(()=>{});return n?Tn._fromGetAccountInfoResponse(this.auth,n,e):null}return Tn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new bi(fr(fm),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||fr(fm);const o=Au(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const m=await Gu(e,{idToken:d}).catch(()=>{});if(!m)break;h=await Tn._fromGetAccountInfoResponse(e,m,d)}else h=Tn._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new bi(i,e,r):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new bi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ty(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ey(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Sy(e))return"Blackberry";if(Cy(e))return"Webos";if(wy(e))return"Safari";if((e.includes("chrome/")||Ay(e))&&!e.includes("edge/"))return"Chrome";if(Iy(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Ey(t=Ht()){return/firefox\//i.test(t)}function wy(t=Ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ay(t=Ht()){return/crios\//i.test(t)}function Ty(t=Ht()){return/iemobile/i.test(t)}function Iy(t=Ht()){return/android/i.test(t)}function Sy(t=Ht()){return/blackberry/i.test(t)}function Cy(t=Ht()){return/webos/i.test(t)}function Qf(t=Ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function GT(t=Ht()){var e;return Qf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function WT(){return oA()&&document.documentMode===10}function xy(t=Ht()){return Qf(t)||Iy(t)||Cy(t)||Sy(t)||/windows phone/i.test(t)||Ty(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(t,e=[]){let n;switch(t){case"Browser":n=hm(Ht());break;case"Worker":n=`${hm(Ht())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ji}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YT(t,e={}){return Pn(t,"GET","/v2/passwordPolicy",Xn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=6;class XT{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:QT,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pm(this),this.idTokenSubscription=new pm(this),this.beforeStateQueue=new KT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=my,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await bi.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Gu(this,{idToken:e}),r=await Tn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(an(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wu(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(an(this.app))return Promise.reject(pr(this));const n=e?dt(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(pr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return an(this.app)?Promise.reject(pr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YT(this),n=new XT(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new va("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await HT(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fr(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await bi.create(this,[fr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ky(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&ST(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Cr(t){return dt(t)}class pm{constructor(e){this.auth=e,this.observer=null,this.addObserver=pA(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZT(t){Ol=t}function Dy(t){return Ol.loadJS(t)}function e4(){return Ol.recaptchaEnterpriseScript}function t4(){return Ol.gapiScript}function n4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class r4{constructor(){this.enterprise=new s4}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class s4{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const i4="recaptcha-enterprise",Py="NO_RECAPTCHA";class o4{constructor(e){this.type=i4,this.auth=Cr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{MT(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new VT(u);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function s(i,o,a){const u=window.grecaptcha;lm(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(Py)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new r4().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&lm(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=e4();u.length!==0&&(u+=a),Dy(u).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function mm(t,e,n,r=!1,s=!1){const i=new o4(t);let o;if(s)o=Py;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const u=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ku(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await mm(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await mm(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(t,e){const n=zf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Bs(i,e??{}))return s;bn(s,"already-initialized")}return n.initialize({options:e})}function u4(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(fr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function l4(t,e,n){const r=Cr(t);Te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Ry(e),{host:o,port:a}=c4(e),u=a===null?"":`:${a}`,c={url:`${i}//${o}${u}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Te(Bs(c,r.config.emulator)&&Bs(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Bi(o)?(oy(`${i}//${o}${u}`),ay("Auth",!0)):d4()}function Ry(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function c4(t){const e=Ry(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:gm(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:gm(o)}}}function gm(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function d4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return dr("not implemented")}_getIdTokenResponse(e){return dr("not implemented")}_linkToIdToken(e,n){return dr("not implemented")}_getReauthenticationResolver(e){return dr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f4(t,e){return Pn(t,"POST","/v1/accounts:resetPassword",Xn(t,e))}async function h4(t,e){return Pn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p4(t,e){return wa(t,"POST","/v1/accounts:signInWithPassword",Xn(t,e))}async function m4(t,e){return Pn(t,"POST","/v1/accounts:sendOobCode",Xn(t,e))}async function g4(t,e){return m4(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _4(t,e){return wa(t,"POST","/v1/accounts:signInWithEmailLink",Xn(t,e))}async function y4(t,e){return wa(t,"POST","/v1/accounts:signInWithEmailLink",Xn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends Xf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ea(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ea(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ku(e,n,"signInWithPassword",p4);case"emailLink":return _4(e,{email:this._email,oobCode:this._password});default:bn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ku(e,r,"signUpPassword",h4);case"emailLink":return y4(e,{idToken:n,email:this._email,oobCode:this._password});default:bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ei(t,e){return wa(t,"POST","/v1/accounts:signInWithIdp",Xn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4="http://localhost";class qs extends Xf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Hf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new qs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ei(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ei(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ei(e,n)}buildRequest(){const e={requestUri:v4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ba(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function E4(t){const e=_o(yo(t)).link,n=e?_o(yo(e)).deep_link_id:null,r=_o(yo(t)).deep_link_id;return(r?_o(yo(r)).link:null)||r||n||e||t}class Jf{constructor(e){var n,r,s,i,o,a;const u=_o(yo(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,d=(r=u.oobCode)!==null&&r!==void 0?r:null,h=b4((s=u.mode)!==null&&s!==void 0?s:null);Te(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=E4(e);try{return new Jf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(){this.providerId=qi.PROVIDER_ID}static credential(e,n){return ea._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Jf.parseLink(n);return Te(r,"argument-error"),ea._fromEmailAndCode(e,r.code,r.tenantId)}}qi.PROVIDER_ID="password";qi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends Zf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Aa{constructor(){super("facebook.com")}static credential(e){return qs._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hr.credential(e.oauthAccessToken)}catch{return null}}}Hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends Aa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qs._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return lr.credential(n,r)}catch{return null}}}lr.GOOGLE_SIGN_IN_METHOD="google.com";lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Aa{constructor(){super("github.com")}static credential(e){return qs._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gr.credential(e.oauthAccessToken)}catch{return null}}}Gr.GITHUB_SIGN_IN_METHOD="github.com";Gr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Aa{constructor(){super("twitter.com")}static credential(e,n){return qs._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Wr.credential(n,r)}catch{return null}}}Wr.TWITTER_SIGN_IN_METHOD="twitter.com";Wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w4(t,e){return wa(t,"POST","/v1/accounts:signUp",Xn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Tn._fromIdTokenResponse(e,r,s),o=_m(r);return new zs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=_m(r);return new zs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function _m(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends Sr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Yu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Yu(e,n,r,s)}}function Oy(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Yu._fromErrorAndOperation(t,i,e,r):i})}async function A4(t,e,n=!1){const r=await Pi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return zs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(t,e,n=!1){const{auth:r}=t;if(an(r.app))return Promise.reject(pr(r));const s="reauthenticate";try{const i=await Pi(t,Oy(r,s,e,t),n);Te(i.idToken,r,"internal-error");const o=Yf(i.idToken);Te(o,r,"internal-error");const{sub:a}=o;return Te(t.uid===a,r,"user-mismatch"),zs._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&bn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ny(t,e,n=!1){if(an(t.app))return Promise.reject(pr(t));const r="signIn",s=await Oy(t,r,e),i=await zs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function I4(t,e){return Ny(Cr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eh(t){const e=Cr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function S4(t,e,n){const r=Cr(t);await Ku(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",g4)}async function C4(t,e,n){await f4(dt(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&eh(t),r})}async function x4(t,e,n){if(an(t.app))return Promise.reject(pr(t));const r=Cr(t),o=await Ku(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",w4).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&eh(t),u}),a=await zs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function k4(t,e,n){return an(t.app)?Promise.reject(pr(t)):I4(dt(t),qi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&eh(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(t,e){return Pn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P4(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=dt(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Pi(r,D4(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function R4(t,e,n,r){return dt(t).onIdTokenChanged(e,n,r)}function O4(t,e,n){return dt(t).beforeAuthStateChanged(e,n)}function Fy(t,e,n,r){return dt(t).onAuthStateChanged(e,n,r)}function N4(t){return dt(t).signOut()}const Qu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qu,"1"),this.storage.removeItem(Qu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=1e3,V4=10;class My extends Vy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);WT()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,V4):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},F4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}My.type="LOCAL";const M4=My;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly extends Vy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ly.type="SESSION";const $y=Ly;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Nl(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await L4(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=th("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(d),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(){return window}function U4(t){qn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(){return typeof qn().WorkerGlobalScope<"u"&&typeof qn().importScripts=="function"}async function B4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function j4(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function q4(){return Uy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="firebaseLocalStorageDb",z4=1,Xu="firebaseLocalStorage",jy="fbase_key";class Ta{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fl(t,e){return t.transaction([Xu],e?"readwrite":"readonly").objectStore(Xu)}function H4(){const t=indexedDB.deleteDatabase(By);return new Ta(t).toPromise()}function Od(){const t=indexedDB.open(By,z4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Xu,{keyPath:jy})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Xu)?e(r):(r.close(),await H4(),e(await Od()))})})}async function ym(t,e,n){const r=Fl(t,!0).put({[jy]:e,value:n});return new Ta(r).toPromise()}async function G4(t,e){const n=Fl(t,!1).get(e),r=await new Ta(n).toPromise();return r===void 0?null:r.value}function vm(t,e){const n=Fl(t,!0).delete(e);return new Ta(n).toPromise()}const W4=800,K4=3;class qy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Od(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>K4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Uy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nl._getInstance(q4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await B4(),!this.activeServiceWorker)return;this.sender=new $4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||j4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Od();return await ym(e,Qu,"1"),await vm(e,Qu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ym(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>G4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>vm(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Fl(s,!1).getAll();return new Ta(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),W4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qy.type="LOCAL";const Y4=qy;new Ea(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(t,e){return e?fr(e):(Te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends Xf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ei(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ei(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ei(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Q4(t){return Ny(t.auth,new nh(t),t.bypassAuthState)}function X4(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),T4(n,new nh(t),t.bypassAuthState)}async function J4(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),A4(n,new nh(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Q4;case"linkViaPopup":case"linkViaRedirect":return J4;case"reauthViaPopup":case"reauthViaRedirect":return X4;default:bn(this.auth,"internal-error")}}resolve(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=new Ea(2e3,1e4);async function eI(t,e,n){if(an(t.app))return Promise.reject(Sn(t,"operation-not-supported-in-this-environment"));const r=Cr(t);CT(t,e,Zf);const s=zy(r,n);return new Fs(r,"signInViaPopup",e,s).executeNotNull()}class Fs extends Hy{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Fs.currentPopupAction&&Fs.currentPopupAction.cancel(),Fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){vr(this.filter.length===1,"Popup operations only handle one event");const e=th();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Z4.get())};e()}}Fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="pendingRedirect",Tu=new Map;class nI extends Hy{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Tu.get(this.auth._key());if(!e){try{const r=await rI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Tu.set(this.auth._key(),e)}return this.bypassAuthState||Tu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rI(t,e){const n=oI(e),r=iI(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function sI(t,e){Tu.set(t._key(),e)}function iI(t){return fr(t._redirectPersistence)}function oI(t){return Au(tI,t.config.apiKey,t.name)}async function aI(t,e,n=!1){if(an(t.app))return Promise.reject(pr(t));const r=Cr(t),s=zy(r,e),o=await new nI(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=10*60*1e3;class lI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Gy(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Sn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uI&&this.cachedEventUids.clear(),this.cachedEventUids.has(bm(e))}saveEventToCache(e){this.cachedEventUids.add(bm(e)),this.lastProcessedEventTime=Date.now()}}function bm(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Gy({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function cI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gy(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(t,e={}){return Pn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hI=/^https?/;async function pI(t){if(t.config.emulator)return;const{authorizedDomains:e}=await dI(t);for(const n of e)try{if(mI(n))return}catch{}bn(t,"unauthorized-domain")}function mI(t){const e=Pd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!hI.test(n))return!1;if(fI.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new Ea(3e4,6e4);function Em(){const t=qn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _I(t){return new Promise((e,n)=>{var r,s,i;function o(){Em(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Em(),n(Sn(t,"network-request-failed"))},timeout:gI.get()})}if(!((s=(r=qn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=qn().gapi)===null||i===void 0)&&i.load)o();else{const a=n4("iframefcb");return qn()[a]=()=>{gapi.load?o():n(Sn(t,"network-request-failed"))},Dy(`${t4()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Iu=null,e})}let Iu=null;function yI(t){return Iu=Iu||_I(t),Iu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=new Ea(5e3,15e3),bI="__/auth/iframe",EI="emulator/auth/iframe",wI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function TI(t){const e=t.config;Te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Kf(e,EI):`https://${t.config.authDomain}/${bI}`,r={apiKey:e.apiKey,appName:t.name,v:ji},s=AI.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ba(r).slice(1)}`}async function II(t){const e=await yI(t),n=qn().gapi;return Te(n,t,"internal-error"),e.open({where:document.body,url:TI(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wI,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Sn(t,"network-request-failed"),a=qn().setTimeout(()=>{i(o)},vI.get());function u(){qn().clearTimeout(a),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CI=500,xI=600,kI="_blank",DI="http://localhost";class wm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PI(t,e,n,r=CI,s=xI){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},SI),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Ht().toLowerCase();n&&(a=Ay(c)?kI:n),Ey(c)&&(e=e||DI,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[g,v])=>`${m}${g}=${v},`,"");if(GT(c)&&a!=="_self")return RI(e||"",a),new wm(null);const h=window.open(e||"",a,d);Te(h,t,"popup-blocked");try{h.focus()}catch{}return new wm(h)}function RI(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="__/auth/handler",NI="emulator/auth/handler",FI=encodeURIComponent("fac");async function Am(t,e,n,r,s,i){Te(t.config.authDomain,t,"auth-domain-config-required"),Te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ji,eventId:s};if(e instanceof Zf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",hA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Aa){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const u=await t._getAppCheckToken(),c=u?`#${FI}=${encodeURIComponent(u)}`:"";return`${VI(t)}?${ba(a).slice(1)}${c}`}function VI({config:t}){return t.emulator?Kf(t,NI):`https://${t.authDomain}/${OI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc="webStorageSupport";class MI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$y,this._completeRedirectFn=aI,this._overrideRedirectResult=sI}async _openPopup(e,n,r,s){var i;vr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Am(e,n,r,Pd(),s);return PI(e,o,th())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Am(e,n,r,Pd(),s);return U4(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(vr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await II(e),r=new lI(e);return n.register("authEvent",s=>(Te(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hc,{type:Hc},s=>{var i;const o=(i=s?.[0])===null||i===void 0?void 0:i[Hc];o!==void 0&&n(!!o),bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xy()||wy()||Qf()}}const LI=MI;var Tm="@firebase/auth",Im="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BI(t){Di(new js("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ky(t)},c=new JT(r,s,i,u);return u4(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Di(new js("auth-internal",e=>{const n=Cr(e.getProvider("auth").getImmediate());return(r=>new $I(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ts(Tm,Im,UI(t)),ts(Tm,Im,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=5*60,qI=iy("authIdTokenMaxAge")||jI;let Sm=null;const zI=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>qI)return;const s=n?.token;Sm!==s&&(Sm=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function HI(t=dy()){const e=zf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=a4(t,{popupRedirectResolver:LI,persistence:[Y4,M4,$y]}),r=iy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=zI(i.toString());O4(n,o,()=>o(n.currentUser)),R4(n,a=>o(a))}}const s=ry("auth");return s&&l4(n,`http://${s}`),n}function GI(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ZT({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Sn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",GI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BI("Browser");var Cm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ns,Wy;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,w){function T(){}T.prototype=w.prototype,S.D=w.prototype,S.prototype=new T,S.prototype.constructor=S,S.C=function(k,N,P){for(var x=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)x[Pe-2]=arguments[Pe];return w.prototype[N].apply(k,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,w,T){T||(T=0);var k=Array(16);if(typeof w=="string")for(var N=0;16>N;++N)k[N]=w.charCodeAt(T++)|w.charCodeAt(T++)<<8|w.charCodeAt(T++)<<16|w.charCodeAt(T++)<<24;else for(N=0;16>N;++N)k[N]=w[T++]|w[T++]<<8|w[T++]<<16|w[T++]<<24;w=S.g[0],T=S.g[1],N=S.g[2];var P=S.g[3],x=w+(P^T&(N^P))+k[0]+3614090360&4294967295;w=T+(x<<7&4294967295|x>>>25),x=P+(N^w&(T^N))+k[1]+3905402710&4294967295,P=w+(x<<12&4294967295|x>>>20),x=N+(T^P&(w^T))+k[2]+606105819&4294967295,N=P+(x<<17&4294967295|x>>>15),x=T+(w^N&(P^w))+k[3]+3250441966&4294967295,T=N+(x<<22&4294967295|x>>>10),x=w+(P^T&(N^P))+k[4]+4118548399&4294967295,w=T+(x<<7&4294967295|x>>>25),x=P+(N^w&(T^N))+k[5]+1200080426&4294967295,P=w+(x<<12&4294967295|x>>>20),x=N+(T^P&(w^T))+k[6]+2821735955&4294967295,N=P+(x<<17&4294967295|x>>>15),x=T+(w^N&(P^w))+k[7]+4249261313&4294967295,T=N+(x<<22&4294967295|x>>>10),x=w+(P^T&(N^P))+k[8]+1770035416&4294967295,w=T+(x<<7&4294967295|x>>>25),x=P+(N^w&(T^N))+k[9]+2336552879&4294967295,P=w+(x<<12&4294967295|x>>>20),x=N+(T^P&(w^T))+k[10]+4294925233&4294967295,N=P+(x<<17&4294967295|x>>>15),x=T+(w^N&(P^w))+k[11]+2304563134&4294967295,T=N+(x<<22&4294967295|x>>>10),x=w+(P^T&(N^P))+k[12]+1804603682&4294967295,w=T+(x<<7&4294967295|x>>>25),x=P+(N^w&(T^N))+k[13]+4254626195&4294967295,P=w+(x<<12&4294967295|x>>>20),x=N+(T^P&(w^T))+k[14]+2792965006&4294967295,N=P+(x<<17&4294967295|x>>>15),x=T+(w^N&(P^w))+k[15]+1236535329&4294967295,T=N+(x<<22&4294967295|x>>>10),x=w+(N^P&(T^N))+k[1]+4129170786&4294967295,w=T+(x<<5&4294967295|x>>>27),x=P+(T^N&(w^T))+k[6]+3225465664&4294967295,P=w+(x<<9&4294967295|x>>>23),x=N+(w^T&(P^w))+k[11]+643717713&4294967295,N=P+(x<<14&4294967295|x>>>18),x=T+(P^w&(N^P))+k[0]+3921069994&4294967295,T=N+(x<<20&4294967295|x>>>12),x=w+(N^P&(T^N))+k[5]+3593408605&4294967295,w=T+(x<<5&4294967295|x>>>27),x=P+(T^N&(w^T))+k[10]+38016083&4294967295,P=w+(x<<9&4294967295|x>>>23),x=N+(w^T&(P^w))+k[15]+3634488961&4294967295,N=P+(x<<14&4294967295|x>>>18),x=T+(P^w&(N^P))+k[4]+3889429448&4294967295,T=N+(x<<20&4294967295|x>>>12),x=w+(N^P&(T^N))+k[9]+568446438&4294967295,w=T+(x<<5&4294967295|x>>>27),x=P+(T^N&(w^T))+k[14]+3275163606&4294967295,P=w+(x<<9&4294967295|x>>>23),x=N+(w^T&(P^w))+k[3]+4107603335&4294967295,N=P+(x<<14&4294967295|x>>>18),x=T+(P^w&(N^P))+k[8]+1163531501&4294967295,T=N+(x<<20&4294967295|x>>>12),x=w+(N^P&(T^N))+k[13]+2850285829&4294967295,w=T+(x<<5&4294967295|x>>>27),x=P+(T^N&(w^T))+k[2]+4243563512&4294967295,P=w+(x<<9&4294967295|x>>>23),x=N+(w^T&(P^w))+k[7]+1735328473&4294967295,N=P+(x<<14&4294967295|x>>>18),x=T+(P^w&(N^P))+k[12]+2368359562&4294967295,T=N+(x<<20&4294967295|x>>>12),x=w+(T^N^P)+k[5]+4294588738&4294967295,w=T+(x<<4&4294967295|x>>>28),x=P+(w^T^N)+k[8]+2272392833&4294967295,P=w+(x<<11&4294967295|x>>>21),x=N+(P^w^T)+k[11]+1839030562&4294967295,N=P+(x<<16&4294967295|x>>>16),x=T+(N^P^w)+k[14]+4259657740&4294967295,T=N+(x<<23&4294967295|x>>>9),x=w+(T^N^P)+k[1]+2763975236&4294967295,w=T+(x<<4&4294967295|x>>>28),x=P+(w^T^N)+k[4]+1272893353&4294967295,P=w+(x<<11&4294967295|x>>>21),x=N+(P^w^T)+k[7]+4139469664&4294967295,N=P+(x<<16&4294967295|x>>>16),x=T+(N^P^w)+k[10]+3200236656&4294967295,T=N+(x<<23&4294967295|x>>>9),x=w+(T^N^P)+k[13]+681279174&4294967295,w=T+(x<<4&4294967295|x>>>28),x=P+(w^T^N)+k[0]+3936430074&4294967295,P=w+(x<<11&4294967295|x>>>21),x=N+(P^w^T)+k[3]+3572445317&4294967295,N=P+(x<<16&4294967295|x>>>16),x=T+(N^P^w)+k[6]+76029189&4294967295,T=N+(x<<23&4294967295|x>>>9),x=w+(T^N^P)+k[9]+3654602809&4294967295,w=T+(x<<4&4294967295|x>>>28),x=P+(w^T^N)+k[12]+3873151461&4294967295,P=w+(x<<11&4294967295|x>>>21),x=N+(P^w^T)+k[15]+530742520&4294967295,N=P+(x<<16&4294967295|x>>>16),x=T+(N^P^w)+k[2]+3299628645&4294967295,T=N+(x<<23&4294967295|x>>>9),x=w+(N^(T|~P))+k[0]+4096336452&4294967295,w=T+(x<<6&4294967295|x>>>26),x=P+(T^(w|~N))+k[7]+1126891415&4294967295,P=w+(x<<10&4294967295|x>>>22),x=N+(w^(P|~T))+k[14]+2878612391&4294967295,N=P+(x<<15&4294967295|x>>>17),x=T+(P^(N|~w))+k[5]+4237533241&4294967295,T=N+(x<<21&4294967295|x>>>11),x=w+(N^(T|~P))+k[12]+1700485571&4294967295,w=T+(x<<6&4294967295|x>>>26),x=P+(T^(w|~N))+k[3]+2399980690&4294967295,P=w+(x<<10&4294967295|x>>>22),x=N+(w^(P|~T))+k[10]+4293915773&4294967295,N=P+(x<<15&4294967295|x>>>17),x=T+(P^(N|~w))+k[1]+2240044497&4294967295,T=N+(x<<21&4294967295|x>>>11),x=w+(N^(T|~P))+k[8]+1873313359&4294967295,w=T+(x<<6&4294967295|x>>>26),x=P+(T^(w|~N))+k[15]+4264355552&4294967295,P=w+(x<<10&4294967295|x>>>22),x=N+(w^(P|~T))+k[6]+2734768916&4294967295,N=P+(x<<15&4294967295|x>>>17),x=T+(P^(N|~w))+k[13]+1309151649&4294967295,T=N+(x<<21&4294967295|x>>>11),x=w+(N^(T|~P))+k[4]+4149444226&4294967295,w=T+(x<<6&4294967295|x>>>26),x=P+(T^(w|~N))+k[11]+3174756917&4294967295,P=w+(x<<10&4294967295|x>>>22),x=N+(w^(P|~T))+k[2]+718787259&4294967295,N=P+(x<<15&4294967295|x>>>17),x=T+(P^(N|~w))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+w&4294967295,S.g[1]=S.g[1]+(N+(x<<21&4294967295|x>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+P&4294967295}r.prototype.u=function(S,w){w===void 0&&(w=S.length);for(var T=w-this.blockSize,k=this.B,N=this.h,P=0;P<w;){if(N==0)for(;P<=T;)s(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<w;)if(k[N++]=S.charCodeAt(P++),N==this.blockSize){s(this,k),N=0;break}}else for(;P<w;)if(k[N++]=S[P++],N==this.blockSize){s(this,k),N=0;break}}this.h=N,this.o+=w},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var w=1;w<S.length-8;++w)S[w]=0;var T=8*this.o;for(w=S.length-8;w<S.length;++w)S[w]=T&255,T/=256;for(this.u(S),S=Array(16),w=T=0;4>w;++w)for(var k=0;32>k;k+=8)S[T++]=this.g[w]>>>k&255;return S};function i(S,w){var T=a;return Object.prototype.hasOwnProperty.call(T,S)?T[S]:T[S]=w(S)}function o(S,w){this.h=w;for(var T=[],k=!0,N=S.length-1;0<=N;N--){var P=S[N]|0;k&&P==w||(T[N]=P,k=!1)}this.g=T}var a={};function u(S){return-128<=S&&128>S?i(S,function(w){return new o([w|0],0>w?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(0>S)return A(c(-S));for(var w=[],T=1,k=0;S>=T;k++)w[k]=S/T|0,T*=4294967296;return new o(w,0)}function d(S,w){if(S.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S.charAt(0)=="-")return A(d(S.substring(1),w));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(w,8)),k=h,N=0;N<S.length;N+=8){var P=Math.min(8,S.length-N),x=parseInt(S.substring(N,N+P),w);8>P?(P=c(Math.pow(w,P)),k=k.j(P).add(c(x))):(k=k.j(T),k=k.add(c(x)))}return k}var h=u(0),m=u(1),g=u(16777216);t=o.prototype,t.m=function(){if(E(this))return-A(this).m();for(var S=0,w=1,T=0;T<this.g.length;T++){var k=this.i(T);S+=(0<=k?k:4294967296+k)*w,w*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(v(this))return"0";if(E(this))return"-"+A(this).toString(S);for(var w=c(Math.pow(S,6)),T=this,k="";;){var N=V(T,w).g;T=C(T,N.j(w));var P=((0<T.g.length?T.g[0]:T.h)>>>0).toString(S);if(T=N,v(T))return P+k;for(;6>P.length;)P="0"+P;k=P+k}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function v(S){if(S.h!=0)return!1;for(var w=0;w<S.g.length;w++)if(S.g[w]!=0)return!1;return!0}function E(S){return S.h==-1}t.l=function(S){return S=C(this,S),E(S)?-1:v(S)?0:1};function A(S){for(var w=S.g.length,T=[],k=0;k<w;k++)T[k]=~S.g[k];return new o(T,~S.h).add(m)}t.abs=function(){return E(this)?A(this):this},t.add=function(S){for(var w=Math.max(this.g.length,S.g.length),T=[],k=0,N=0;N<=w;N++){var P=k+(this.i(N)&65535)+(S.i(N)&65535),x=(P>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);k=x>>>16,P&=65535,x&=65535,T[N]=x<<16|P}return new o(T,T[T.length-1]&-2147483648?-1:0)};function C(S,w){return S.add(A(w))}t.j=function(S){if(v(this)||v(S))return h;if(E(this))return E(S)?A(this).j(A(S)):A(A(this).j(S));if(E(S))return A(this.j(A(S)));if(0>this.l(g)&&0>S.l(g))return c(this.m()*S.m());for(var w=this.g.length+S.g.length,T=[],k=0;k<2*w;k++)T[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<S.g.length;N++){var P=this.i(k)>>>16,x=this.i(k)&65535,Pe=S.i(N)>>>16,ae=S.i(N)&65535;T[2*k+2*N]+=x*ae,R(T,2*k+2*N),T[2*k+2*N+1]+=P*ae,R(T,2*k+2*N+1),T[2*k+2*N+1]+=x*Pe,R(T,2*k+2*N+1),T[2*k+2*N+2]+=P*Pe,R(T,2*k+2*N+2)}for(k=0;k<w;k++)T[k]=T[2*k+1]<<16|T[2*k];for(k=w;k<2*w;k++)T[k]=0;return new o(T,0)};function R(S,w){for(;(S[w]&65535)!=S[w];)S[w+1]+=S[w]>>>16,S[w]&=65535,w++}function F(S,w){this.g=S,this.h=w}function V(S,w){if(v(w))throw Error("division by zero");if(v(S))return new F(h,h);if(E(S))return w=V(A(S),w),new F(A(w.g),A(w.h));if(E(w))return w=V(S,A(w)),new F(A(w.g),w.h);if(30<S.g.length){if(E(S)||E(w))throw Error("slowDivide_ only works with positive integers.");for(var T=m,k=w;0>=k.l(S);)T=U(T),k=U(k);var N=M(T,1),P=M(k,1);for(k=M(k,2),T=M(T,2);!v(k);){var x=P.add(k);0>=x.l(S)&&(N=N.add(T),P=x),k=M(k,1),T=M(T,1)}return w=C(S,N.j(w)),new F(N,w)}for(N=h;0<=S.l(w);){for(T=Math.max(1,Math.floor(S.m()/w.m())),k=Math.ceil(Math.log(T)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),P=c(T),x=P.j(w);E(x)||0<x.l(S);)T-=k,P=c(T),x=P.j(w);v(P)&&(P=m),N=N.add(P),S=C(S,x)}return new F(N,S)}t.A=function(S){return V(this,S).h},t.and=function(S){for(var w=Math.max(this.g.length,S.g.length),T=[],k=0;k<w;k++)T[k]=this.i(k)&S.i(k);return new o(T,this.h&S.h)},t.or=function(S){for(var w=Math.max(this.g.length,S.g.length),T=[],k=0;k<w;k++)T[k]=this.i(k)|S.i(k);return new o(T,this.h|S.h)},t.xor=function(S){for(var w=Math.max(this.g.length,S.g.length),T=[],k=0;k<w;k++)T[k]=this.i(k)^S.i(k);return new o(T,this.h^S.h)};function U(S){for(var w=S.g.length+1,T=[],k=0;k<w;k++)T[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(T,S.h)}function M(S,w){var T=w>>5;w%=32;for(var k=S.g.length-T,N=[],P=0;P<k;P++)N[P]=0<w?S.i(P+T)>>>w|S.i(P+T+1)<<32-w:S.i(P+T);return new o(N,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Wy=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,ns=o}).apply(typeof Cm<"u"?Cm:typeof self<"u"?self:typeof window<"u"?window:{});var ou=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ky,vo,Yy,Su,Nd,Qy,Xy,Jy;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,p,_){return l==Array.prototype||l==Object.prototype||(l[p]=_.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ou=="object"&&ou];for(var p=0;p<l.length;++p){var _=l[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function s(l,p){if(p)e:{var _=r;l=l.split(".");for(var I=0;I<l.length-1;I++){var $=l[I];if(!($ in _))break e;_=_[$]}l=l[l.length-1],I=_[l],p=p(I),p!=I&&p!=null&&e(_,l,{configurable:!0,writable:!0,value:p})}}function i(l,p){l instanceof String&&(l+="");var _=0,I=!1,$={next:function(){if(!I&&_<l.length){var j=_++;return{value:p(j,l[j]),done:!1}}return I=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}s("Array.prototype.values",function(l){return l||function(){return i(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var p=typeof l;return p=p!="object"?p:l?Array.isArray(l)?"array":p:"null",p=="array"||p=="object"&&typeof l.length=="number"}function c(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function d(l,p,_){return l.call.apply(l.bind,arguments)}function h(l,p,_){if(!l)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,I),l.apply(p,$)}}return function(){return l.apply(p,arguments)}}function m(l,p,_){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function g(l,p){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),l.apply(this,I)}}function v(l,p){function _(){}_.prototype=p.prototype,l.aa=p.prototype,l.prototype=new _,l.prototype.constructor=l,l.Qb=function(I,$,j){for(var te=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)te[Qe-2]=arguments[Qe];return p.prototype[$].apply(I,te)}}function E(l){const p=l.length;if(0<p){const _=Array(p);for(let I=0;I<p;I++)_[I]=l[I];return _}return[]}function A(l,p){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(u(I)){const $=l.length||0,j=I.length||0;l.length=$+j;for(let te=0;te<j;te++)l[$+te]=I[te]}else l.push(I)}}class C{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function R(l){return/^[\s\xa0]*$/.test(l)}function F(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function V(l){return V[" "](l),l}V[" "]=function(){};var U=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function M(l,p,_){for(const I in l)p.call(_,l[I],I,l)}function S(l,p){for(const _ in l)p.call(void 0,l[_],_,l)}function w(l){const p={};for(const _ in l)p[_]=l[_];return p}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,p){let _,I;for(let $=1;$<arguments.length;$++){I=arguments[$];for(_ in I)l[_]=I[_];for(let j=0;j<T.length;j++)_=T[j],Object.prototype.hasOwnProperty.call(I,_)&&(l[_]=I[_])}}function N(l){var p=1;l=l.split(":");const _=[];for(;0<p&&l.length;)_.push(l.shift()),p--;return l.length&&_.push(l.join(":")),_}function P(l){a.setTimeout(()=>{throw l},0)}function x(){var l=Se;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class Pe{constructor(){this.h=this.g=null}add(p,_){const I=ae.get();I.set(p,_),this.h?this.h.next=I:this.g=I,this.h=I}}var ae=new C(()=>new ue,l=>l.reset());class ue{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let de,Fe=!1,Se=new Pe,ne=()=>{const l=a.Promise.resolve(void 0);de=()=>{l.then(pe)}};var pe=()=>{for(var l;l=x();){try{l.h.call(l.g)}catch(_){P(_)}var p=ae;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}Fe=!1};function Ue(){this.s=this.s,this.C=this.C}Ue.prototype.s=!1,Ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ge(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}Ge.prototype.h=function(){this.defaultPrevented=!0};var hn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const _=()=>{};a.addEventListener("test",_,p),a.removeEventListener("test",_,p)}catch{}return l}();function ft(l,p){if(Ge.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var _=this.type=l.type,I=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(U){e:{try{V(p.nodeName);var $=!0;break e}catch{}$=!1}$||(p=null)}}else _=="mouseover"?p=l.fromElement:_=="mouseout"&&(p=l.toElement);this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:wt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ft.aa.h.call(this)}}v(ft,Ge);var wt={2:"touch",3:"pen",4:"mouse"};ft.prototype.h=function(){ft.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var H="closure_listenable_"+(1e6*Math.random()|0),le=0;function re(l,p,_,I,$){this.listener=l,this.proxy=null,this.src=p,this.type=_,this.capture=!!I,this.ha=$,this.key=++le,this.da=this.fa=!1}function fe(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function qe(l){this.src=l,this.g={},this.h=0}qe.prototype.add=function(l,p,_,I,$){var j=l.toString();l=this.g[j],l||(l=this.g[j]=[],this.h++);var te=O(l,p,I,$);return-1<te?(p=l[te],_||(p.fa=!1)):(p=new re(p,this.src,j,!!I,$),p.fa=_,l.push(p)),p};function D(l,p){var _=p.type;if(_ in l.g){var I=l.g[_],$=Array.prototype.indexOf.call(I,p,void 0),j;(j=0<=$)&&Array.prototype.splice.call(I,$,1),j&&(fe(p),l.g[_].length==0&&(delete l.g[_],l.h--))}}function O(l,p,_,I){for(var $=0;$<l.length;++$){var j=l[$];if(!j.da&&j.listener==p&&j.capture==!!_&&j.ha==I)return $}return-1}var L="closure_lm_"+(1e6*Math.random()|0),G={};function Y(l,p,_,I,$){if(Array.isArray(p)){for(var j=0;j<p.length;j++)Y(l,p[j],_,I,$);return null}return _=Ce(_),l&&l[H]?l.K(p,_,c(I)?!!I.capture:!1,$):W(l,p,_,!1,I,$)}function W(l,p,_,I,$,j){if(!p)throw Error("Invalid event type");var te=c($)?!!$.capture:!!$,Qe=se(l);if(Qe||(l[L]=Qe=new qe(l)),_=Qe.add(p,_,I,te,j),_.proxy)return _;if(I=ie(),_.proxy=I,I.src=l,I.listener=_,l.addEventListener)hn||($=te),$===void 0&&($=!1),l.addEventListener(p.toString(),I,$);else if(l.attachEvent)l.attachEvent(Q(p.toString()),I);else if(l.addListener&&l.removeListener)l.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ie(){function l(_){return p.call(l.src,l.listener,_)}const p=ye;return l}function ee(l,p,_,I,$){if(Array.isArray(p))for(var j=0;j<p.length;j++)ee(l,p[j],_,I,$);else I=c(I)?!!I.capture:!!I,_=Ce(_),l&&l[H]?(l=l.i,p=String(p).toString(),p in l.g&&(j=l.g[p],_=O(j,_,I,$),-1<_&&(fe(j[_]),Array.prototype.splice.call(j,_,1),j.length==0&&(delete l.g[p],l.h--)))):l&&(l=se(l))&&(p=l.g[p.toString()],l=-1,p&&(l=O(p,_,I,$)),(_=-1<l?p[l]:null)&&Z(_))}function Z(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[H])D(p.i,l);else{var _=l.type,I=l.proxy;p.removeEventListener?p.removeEventListener(_,I,l.capture):p.detachEvent?p.detachEvent(Q(_),I):p.addListener&&p.removeListener&&p.removeListener(I),(_=se(p))?(D(_,l),_.h==0&&(_.src=null,p[L]=null)):fe(l)}}}function Q(l){return l in G?G[l]:G[l]="on"+l}function ye(l,p){if(l.da)l=!0;else{p=new ft(p,this);var _=l.listener,I=l.ha||l.src;l.fa&&Z(l),l=_.call(I,p)}return l}function se(l){return l=l[L],l instanceof qe?l:null}var ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ce(l){return typeof l=="function"?l:(l[ge]||(l[ge]=function(p){return l.handleEvent(p)}),l[ge])}function we(){Ue.call(this),this.i=new qe(this),this.M=this,this.F=null}v(we,Ue),we.prototype[H]=!0,we.prototype.removeEventListener=function(l,p,_,I){ee(this,l,p,_,I)};function Oe(l,p){var _,I=l.F;if(I)for(_=[];I;I=I.F)_.push(I);if(l=l.M,I=p.type||p,typeof p=="string")p=new Ge(p,l);else if(p instanceof Ge)p.target=p.target||l;else{var $=p;p=new Ge(I,l),k(p,$)}if($=!0,_)for(var j=_.length-1;0<=j;j--){var te=p.g=_[j];$=Be(te,I,!0,p)&&$}if(te=p.g=l,$=Be(te,I,!0,p)&&$,$=Be(te,I,!1,p)&&$,_)for(j=0;j<_.length;j++)te=p.g=_[j],$=Be(te,I,!1,p)&&$}we.prototype.N=function(){if(we.aa.N.call(this),this.i){var l=this.i,p;for(p in l.g){for(var _=l.g[p],I=0;I<_.length;I++)fe(_[I]);delete l.g[p],l.h--}}this.F=null},we.prototype.K=function(l,p,_,I){return this.i.add(String(l),p,!1,_,I)},we.prototype.L=function(l,p,_,I){return this.i.add(String(l),p,!0,_,I)};function Be(l,p,_,I){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();for(var $=!0,j=0;j<p.length;++j){var te=p[j];if(te&&!te.da&&te.capture==_){var Qe=te.listener,Pt=te.ha||te.src;te.fa&&D(l.i,te),$=Qe.call(Pt,I)!==!1&&$}}return $&&!I.defaultPrevented}function xt(l,p,_){if(typeof l=="function")_&&(l=m(l,_));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(l,p||0)}function kt(l){l.g=xt(()=>{l.g=null,l.i&&(l.i=!1,kt(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class pn extends Ue{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:kt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mt(l){Ue.call(this),this.h=l,this.g={}}v(Mt,Ue);var Dr=[];function Ji(l){M(l.g,function(p,_){this.g.hasOwnProperty(_)&&Z(p)},l),l.g={}}Mt.prototype.N=function(){Mt.aa.N.call(this),Ji(this)},Mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dt=a.JSON.stringify,mn=a.JSON.parse,$a=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function lc(){}lc.prototype.h=null;function r0(l){return l.h||(l.h=l.i())}function s0(){}var Zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cc(){Ge.call(this,"d")}v(cc,Ge);function dc(){Ge.call(this,"c")}v(dc,Ge);var Ts={},i0=null;function Ua(){return i0=i0||new we}Ts.La="serverreachability";function o0(l){Ge.call(this,Ts.La,l)}v(o0,Ge);function eo(l){const p=Ua();Oe(p,new o0(p))}Ts.STAT_EVENT="statevent";function a0(l,p){Ge.call(this,Ts.STAT_EVENT,l),this.stat=p}v(a0,Ge);function Wt(l){const p=Ua();Oe(p,new a0(p,l))}Ts.Ma="timingevent";function u0(l,p){Ge.call(this,Ts.Ma,l),this.size=p}v(u0,Ge);function to(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},p)}function no(){this.g=!0}no.prototype.xa=function(){this.g=!1};function M2(l,p,_,I,$,j){l.info(function(){if(l.g)if(j)for(var te="",Qe=j.split("&"),Pt=0;Pt<Qe.length;Pt++){var He=Qe[Pt].split("=");if(1<He.length){var Lt=He[0];He=He[1];var $t=Lt.split("_");te=2<=$t.length&&$t[1]=="type"?te+(Lt+"="+He+"&"):te+(Lt+"=redacted&")}}else te=null;else te=j;return"XMLHTTP REQ ("+I+") [attempt "+$+"]: "+p+`
`+_+`
`+te})}function L2(l,p,_,I,$,j,te){l.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+$+"]: "+p+`
`+_+`
`+j+" "+te})}function Zs(l,p,_,I){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+U2(l,_)+(I?" "+I:"")})}function $2(l,p){l.info(function(){return"TIMEOUT: "+p})}no.prototype.info=function(){};function U2(l,p){if(!l.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(l=0;l<_.length;l++)if(Array.isArray(_[l])){var I=_[l];if(!(2>I.length)){var $=I[1];if(Array.isArray($)&&!(1>$.length)){var j=$[0];if(j!="noop"&&j!="stop"&&j!="close")for(var te=1;te<$.length;te++)$[te]=""}}}}return Dt(_)}catch{return p}}var Ba={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},l0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fc;function ja(){}v(ja,lc),ja.prototype.g=function(){return new XMLHttpRequest},ja.prototype.i=function(){return{}},fc=new ja;function Pr(l,p,_,I){this.j=l,this.i=p,this.l=_,this.R=I||1,this.U=new Mt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new c0}function c0(){this.i=null,this.g="",this.h=!1}var d0={},hc={};function pc(l,p,_){l.L=1,l.v=Ga(er(p)),l.m=_,l.P=!0,f0(l,null)}function f0(l,p){l.F=Date.now(),qa(l),l.A=er(l.v);var _=l.A,I=l.R;Array.isArray(I)||(I=[String(I)]),S0(_.i,"t",I),l.C=0,_=l.j.J,l.h=new c0,l.g=z0(l.j,_?p:null,!l.m),0<l.O&&(l.M=new pn(m(l.Y,l,l.g),l.O)),p=l.U,_=l.g,I=l.ca;var $="readystatechange";Array.isArray($)||($&&(Dr[0]=$.toString()),$=Dr);for(var j=0;j<$.length;j++){var te=Y(_,$[j],I||p.handleEvent,!1,p.h||p);if(!te)break;p.g[te.key]=te}p=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),eo(),M2(l.i,l.u,l.A,l.l,l.R,l.m)}Pr.prototype.ca=function(l){l=l.target;const p=this.M;p&&tr(l)==3?p.j():this.Y(l)},Pr.prototype.Y=function(l){try{if(l==this.g)e:{const $t=tr(this.g);var p=this.g.Ba();const ni=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||O0(this.g)))){this.J||$t!=4||p==7||(p==8||0>=ni?eo(3):eo(2)),mc(this);var _=this.g.Z();this.X=_;t:if(h0(this)){var I=O0(this.g);l="";var $=I.length,j=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Is(this),ro(this);var te="";break t}this.h.i=new a.TextDecoder}for(p=0;p<$;p++)this.h.h=!0,l+=this.h.i.decode(I[p],{stream:!(j&&p==$-1)});I.length=0,this.h.g+=l,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=_==200,L2(this.i,this.u,this.A,this.l,this.R,$t,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Pt=this.g;if((Qe=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(Qe)){var He=Qe;break t}}He=null}if(_=He)Zs(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gc(this,_);else{this.o=!1,this.s=3,Wt(12),Is(this),ro(this);break e}}if(this.P){_=!0;let An;for(;!this.J&&this.C<te.length;)if(An=B2(this,te),An==hc){$t==4&&(this.s=4,Wt(14),_=!1),Zs(this.i,this.l,null,"[Incomplete Response]");break}else if(An==d0){this.s=4,Wt(15),Zs(this.i,this.l,te,"[Invalid Chunk]"),_=!1;break}else Zs(this.i,this.l,An,null),gc(this,An);if(h0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||te.length!=0||this.h.h||(this.s=1,Wt(16),_=!1),this.o=this.o&&_,!_)Zs(this.i,this.l,te,"[Invalid Chunked Response]"),Is(this),ro(this);else if(0<te.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),wc(Lt),Lt.M=!0,Wt(11))}}else Zs(this.i,this.l,te,null),gc(this,te);$t==4&&Is(this),this.o&&!this.J&&($t==4?U0(this.j,this):(this.o=!1,qa(this)))}else s3(this.g),_==400&&0<te.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),Is(this),ro(this)}}}catch{}finally{}};function h0(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function B2(l,p){var _=l.C,I=p.indexOf(`
`,_);return I==-1?hc:(_=Number(p.substring(_,I)),isNaN(_)?d0:(I+=1,I+_>p.length?hc:(p=p.slice(I,I+_),l.C=I+_,p)))}Pr.prototype.cancel=function(){this.J=!0,Is(this)};function qa(l){l.S=Date.now()+l.I,p0(l,l.I)}function p0(l,p){if(l.B!=null)throw Error("WatchDog timer not null");l.B=to(m(l.ba,l),p)}function mc(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Pr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?($2(this.i,this.A),this.L!=2&&(eo(),Wt(17)),Is(this),this.s=2,ro(this)):p0(this,this.S-l)};function ro(l){l.j.G==0||l.J||U0(l.j,l)}function Is(l){mc(l);var p=l.M;p&&typeof p.ma=="function"&&p.ma(),l.M=null,Ji(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function gc(l,p){try{var _=l.j;if(_.G!=0&&(_.g==l||_c(_.h,l))){if(!l.K&&_c(_.h,l)&&_.G==3){try{var I=_.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var $=I;if($[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<l.F)Ja(_),Qa(_);else break e;Ec(_),Wt(18)}}else _.za=$[1],0<_.za-_.T&&37500>$[2]&&_.F&&_.v==0&&!_.C&&(_.C=to(m(_.Za,_),6e3));if(1>=_0(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Cs(_,11)}else if((l.K||_.g==l)&&Ja(_),!R(p))for($=_.Da.g.parse(p),p=0;p<$.length;p++){let He=$[p];if(_.T=He[0],He=He[1],_.G==2)if(He[0]=="c"){_.K=He[1],_.ia=He[2];const Lt=He[3];Lt!=null&&(_.la=Lt,_.j.info("VER="+_.la));const $t=He[4];$t!=null&&(_.Aa=$t,_.j.info("SVER="+_.Aa));const ni=He[5];ni!=null&&typeof ni=="number"&&0<ni&&(I=1.5*ni,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const An=l.g;if(An){const eu=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eu){var j=I.h;j.g||eu.indexOf("spdy")==-1&&eu.indexOf("quic")==-1&&eu.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(yc(j,j.h),j.h=null))}if(I.D){const Ac=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;Ac&&(I.ya=Ac,it(I.I,I.D,Ac))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-l.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var te=l;if(I.qa=q0(I,I.J?I.ia:null,I.W),te.K){y0(I.h,te);var Qe=te,Pt=I.L;Pt&&(Qe.I=Pt),Qe.B&&(mc(Qe),qa(Qe)),I.g=te}else L0(I);0<_.i.length&&Xa(_)}else He[0]!="stop"&&He[0]!="close"||Cs(_,7);else _.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Cs(_,7):bc(_):He[0]!="noop"&&_.l&&_.l.ta(He),_.v=0)}}eo(4)}catch{}}var j2=class{constructor(l,p){this.g=l,this.map=p}};function m0(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function g0(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function _0(l){return l.h?1:l.g?l.g.size:0}function _c(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function yc(l,p){l.g?l.g.add(p):l.h=p}function y0(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}m0.prototype.cancel=function(){if(this.i=v0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function v0(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const _ of l.g.values())p=p.concat(_.D);return p}return E(l.i)}function q2(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var p=[],_=l.length,I=0;I<_;I++)p.push(l[I]);return p}p=[],_=0;for(I in l)p[_++]=l[I];return p}function z2(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var p=[];l=l.length;for(var _=0;_<l;_++)p.push(_);return p}p=[],_=0;for(const I in l)p[_++]=I;return p}}}function b0(l,p){if(l.forEach&&typeof l.forEach=="function")l.forEach(p,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,p,void 0);else for(var _=z2(l),I=q2(l),$=I.length,j=0;j<$;j++)p.call(void 0,I[j],_&&_[j],l)}var E0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function H2(l,p){if(l){l=l.split("&");for(var _=0;_<l.length;_++){var I=l[_].indexOf("="),$=null;if(0<=I){var j=l[_].substring(0,I);$=l[_].substring(I+1)}else j=l[_];p(j,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Ss(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Ss){this.h=l.h,za(this,l.j),this.o=l.o,this.g=l.g,Ha(this,l.s),this.l=l.l;var p=l.i,_=new oo;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),w0(this,_),this.m=l.m}else l&&(p=String(l).match(E0))?(this.h=!1,za(this,p[1]||"",!0),this.o=so(p[2]||""),this.g=so(p[3]||"",!0),Ha(this,p[4]),this.l=so(p[5]||"",!0),w0(this,p[6]||"",!0),this.m=so(p[7]||"")):(this.h=!1,this.i=new oo(null,this.h))}Ss.prototype.toString=function(){var l=[],p=this.j;p&&l.push(io(p,A0,!0),":");var _=this.g;return(_||p=="file")&&(l.push("//"),(p=this.o)&&l.push(io(p,A0,!0),"@"),l.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&l.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&l.push("/"),l.push(io(_,_.charAt(0)=="/"?K2:W2,!0))),(_=this.i.toString())&&l.push("?",_),(_=this.m)&&l.push("#",io(_,Q2)),l.join("")};function er(l){return new Ss(l)}function za(l,p,_){l.j=_?so(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Ha(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function w0(l,p,_){p instanceof oo?(l.i=p,X2(l.i,l.h)):(_||(p=io(p,Y2)),l.i=new oo(p,l.h))}function it(l,p,_){l.i.set(p,_)}function Ga(l){return it(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function so(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function io(l,p,_){return typeof l=="string"?(l=encodeURI(l).replace(p,G2),_&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function G2(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var A0=/[#\/\?@]/g,W2=/[#\?:]/g,K2=/[#\?]/g,Y2=/[#\?@]/g,Q2=/#/g;function oo(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Rr(l){l.g||(l.g=new Map,l.h=0,l.i&&H2(l.i,function(p,_){l.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}t=oo.prototype,t.add=function(l,p){Rr(this),this.i=null,l=ei(this,l);var _=this.g.get(l);return _||this.g.set(l,_=[]),_.push(p),this.h+=1,this};function T0(l,p){Rr(l),p=ei(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function I0(l,p){return Rr(l),p=ei(l,p),l.g.has(p)}t.forEach=function(l,p){Rr(this),this.g.forEach(function(_,I){_.forEach(function($){l.call(p,$,I,this)},this)},this)},t.na=function(){Rr(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let I=0;I<p.length;I++){const $=l[I];for(let j=0;j<$.length;j++)_.push(p[I])}return _},t.V=function(l){Rr(this);let p=[];if(typeof l=="string")I0(this,l)&&(p=p.concat(this.g.get(ei(this,l))));else{l=Array.from(this.g.values());for(let _=0;_<l.length;_++)p=p.concat(l[_])}return p},t.set=function(l,p){return Rr(this),this.i=null,l=ei(this,l),I0(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l?(l=this.V(l),0<l.length?String(l[0]):p):p};function S0(l,p,_){T0(l,p),0<_.length&&(l.i=null,l.g.set(ei(l,p),E(_)),l.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var I=p[_];const j=encodeURIComponent(String(I)),te=this.V(I);for(I=0;I<te.length;I++){var $=j;te[I]!==""&&($+="="+encodeURIComponent(String(te[I]))),l.push($)}}return this.i=l.join("&")};function ei(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function X2(l,p){p&&!l.j&&(Rr(l),l.i=null,l.g.forEach(function(_,I){var $=I.toLowerCase();I!=$&&(T0(this,I),S0(this,$,_))},l)),l.j=p}function J2(l,p){const _=new no;if(a.Image){const I=new Image;I.onload=g(Or,_,"TestLoadImage: loaded",!0,p,I),I.onerror=g(Or,_,"TestLoadImage: error",!1,p,I),I.onabort=g(Or,_,"TestLoadImage: abort",!1,p,I),I.ontimeout=g(Or,_,"TestLoadImage: timeout",!1,p,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=l}else p(!1)}function Z2(l,p){const _=new no,I=new AbortController,$=setTimeout(()=>{I.abort(),Or(_,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:I.signal}).then(j=>{clearTimeout($),j.ok?Or(_,"TestPingServer: ok",!0,p):Or(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout($),Or(_,"TestPingServer: error",!1,p)})}function Or(l,p,_,I,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),I(_)}catch{}}function e3(){this.g=new $a}function t3(l,p,_){const I=_||"";try{b0(l,function($,j){let te=$;c($)&&(te=Dt($)),p.push(I+j+"="+encodeURIComponent(te))})}catch($){throw p.push(I+"type="+encodeURIComponent("_badmap")),$}}function Wa(l){this.l=l.Ub||null,this.j=l.eb||!1}v(Wa,lc),Wa.prototype.g=function(){return new Ka(this.l,this.j)},Wa.prototype.i=function(l){return function(){return l}}({});function Ka(l,p){we.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Ka,we),t=Ka.prototype,t.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,uo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ao(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,uo(this)),this.g&&(this.readyState=3,uo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;C0(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function C0(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?ao(this):uo(this),this.readyState==3&&C0(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,ao(this))},t.Qa=function(l){this.g&&(this.response=l,ao(this))},t.ga=function(){this.g&&ao(this)};function ao(l){l.readyState=4,l.l=null,l.j=null,l.v=null,uo(l)}t.setRequestHeader=function(l,p){this.u.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,l.push(_[0]+": "+_[1]),_=p.next();return l.join(`\r
`)};function uo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ka.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function x0(l){let p="";return M(l,function(_,I){p+=I,p+=":",p+=_,p+=`\r
`}),p}function vc(l,p,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=x0(_),typeof l=="string"?_!=null&&encodeURIComponent(String(_)):it(l,p,_))}function ut(l){we.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(ut,we);var n3=/^https?$/i,r3=["POST","PUT"];t=ut.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,p,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fc.g(),this.v=this.o?r0(this.o):r0(fc),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(j){k0(this,j);return}if(l=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var $ in I)_.set($,I[$]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const j of I.keys())_.set(j,I.get(j));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(j=>j.toLowerCase()=="content-type"),$=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(r3,p,void 0))||I||$||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,te]of _)this.g.setRequestHeader(j,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{R0(this),this.u=!0,this.g.send(l),this.u=!1}catch(j){k0(this,j)}};function k0(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,D0(l),Ya(l)}function D0(l){l.A||(l.A=!0,Oe(l,"complete"),Oe(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Oe(this,"complete"),Oe(this,"abort"),Ya(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ya(this,!0)),ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?P0(this):this.bb())},t.bb=function(){P0(this)};function P0(l){if(l.h&&typeof o<"u"&&(!l.v[1]||tr(l)!=4||l.Z()!=2)){if(l.u&&tr(l)==4)xt(l.Ea,0,l);else if(Oe(l,"readystatechange"),tr(l)==4){l.h=!1;try{const te=l.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var I;if(I=te===0){var $=String(l.D).match(E0)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),I=!n3.test($?$.toLowerCase():"")}_=I}if(_)Oe(l,"complete"),Oe(l,"success");else{l.m=6;try{var j=2<tr(l)?l.g.statusText:""}catch{j=""}l.l=j+" ["+l.Z()+"]",D0(l)}}finally{Ya(l)}}}}function Ya(l,p){if(l.g){R0(l);const _=l.g,I=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||Oe(l,"ready");try{_.onreadystatechange=I}catch{}}}function R0(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function tr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),mn(p)}};function O0(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function s3(l){const p={};l=(l.g&&2<=tr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<l.length;I++){if(R(l[I]))continue;var _=N(l[I]);const $=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const j=p[$]||[];p[$]=j,j.push(_)}S(p,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lo(l,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[l]||p}function N0(l){this.Aa=0,this.i=[],this.j=new no,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lo("baseRetryDelayMs",5e3,l),this.cb=lo("retryDelaySeedMs",1e4,l),this.Wa=lo("forwardChannelMaxRetries",2,l),this.wa=lo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new m0(l&&l.concurrentRequestLimit),this.Da=new e3,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=N0.prototype,t.la=8,t.G=1,t.connect=function(l,p,_,I){Wt(0),this.W=l,this.H=p||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=q0(this,null,this.W),Xa(this)};function bc(l){if(F0(l),l.G==3){var p=l.U++,_=er(l.I);if(it(_,"SID",l.K),it(_,"RID",p),it(_,"TYPE","terminate"),co(l,_),p=new Pr(l,l.j,p),p.L=2,p.v=Ga(er(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=p.v,_=!0),_||(p.g=z0(p.j,null),p.g.ea(p.v)),p.F=Date.now(),qa(p)}j0(l)}function Qa(l){l.g&&(wc(l),l.g.cancel(),l.g=null)}function F0(l){Qa(l),l.u&&(a.clearTimeout(l.u),l.u=null),Ja(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Xa(l){if(!g0(l.h)&&!l.s){l.s=!0;var p=l.Ga;de||ne(),Fe||(de(),Fe=!0),Se.add(p,l),l.B=0}}function i3(l,p){return _0(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=p.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=to(m(l.Ga,l,p),B0(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const $=new Pr(this,this.j,l);let j=this.o;if(this.S&&(j?(j=w(j),k(j,this.S)):j=this.S),this.m!==null||this.O||($.H=j,j=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=M0(this,$,p),_=er(this.I),it(_,"RID",l),it(_,"CVER",22),this.D&&it(_,"X-HTTP-Session-Id",this.D),co(this,_),j&&(this.O?p="headers="+encodeURIComponent(String(x0(j)))+"&"+p:this.m&&vc(_,this.m,j)),yc(this.h,$),this.Ua&&it(_,"TYPE","init"),this.P?(it(_,"$req",p),it(_,"SID","null"),$.T=!0,pc($,_,null)):pc($,_,p),this.G=2}}else this.G==3&&(l?V0(this,l):this.i.length==0||g0(this.h)||V0(this))};function V0(l,p){var _;p?_=p.l:_=l.U++;const I=er(l.I);it(I,"SID",l.K),it(I,"RID",_),it(I,"AID",l.T),co(l,I),l.m&&l.o&&vc(I,l.m,l.o),_=new Pr(l,l.j,_,l.B+1),l.m===null&&(_.H=l.o),p&&(l.i=p.D.concat(l.i)),p=M0(l,_,1e3),_.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),yc(l.h,_),pc(_,I,p)}function co(l,p){l.H&&M(l.H,function(_,I){it(p,I,_)}),l.l&&b0({},function(_,I){it(p,I,_)})}function M0(l,p,_){_=Math.min(l.i.length,_);var I=l.l?m(l.l.Na,l.l,l):null;e:{var $=l.i;let j=-1;for(;;){const te=["count="+_];j==-1?0<_?(j=$[0].g,te.push("ofs="+j)):j=0:te.push("ofs="+j);let Qe=!0;for(let Pt=0;Pt<_;Pt++){let He=$[Pt].g;const Lt=$[Pt].map;if(He-=j,0>He)j=Math.max(0,$[Pt].g-100),Qe=!1;else try{t3(Lt,te,"req"+He+"_")}catch{I&&I(Lt)}}if(Qe){I=te.join("&");break e}}}return l=l.i.splice(0,_),p.D=l,I}function L0(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;de||ne(),Fe||(de(),Fe=!0),Se.add(p,l),l.v=0}}function Ec(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=to(m(l.Fa,l),B0(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,$0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=to(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),Qa(this),$0(this))};function wc(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function $0(l){l.g=new Pr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var p=er(l.qa);it(p,"RID","rpc"),it(p,"SID",l.K),it(p,"AID",l.T),it(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&it(p,"TO",l.ja),it(p,"TYPE","xmlhttp"),co(l,p),l.m&&l.o&&vc(p,l.m,l.o),l.L&&(l.g.I=l.L);var _=l.g;l=l.ia,_.L=1,_.v=Ga(er(p)),_.m=null,_.P=!0,f0(_,l)}t.Za=function(){this.C!=null&&(this.C=null,Qa(this),Ec(this),Wt(19))};function Ja(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function U0(l,p){var _=null;if(l.g==p){Ja(l),wc(l),l.g=null;var I=2}else if(_c(l.h,p))_=p.D,y0(l.h,p),I=1;else return;if(l.G!=0){if(p.o)if(I==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var $=l.B;I=Ua(),Oe(I,new u0(I,_)),Xa(l)}else L0(l);else if($=p.s,$==3||$==0&&0<p.X||!(I==1&&i3(l,p)||I==2&&Ec(l)))switch(_&&0<_.length&&(p=l.h,p.i=p.i.concat(_)),$){case 1:Cs(l,5);break;case 4:Cs(l,10);break;case 3:Cs(l,6);break;default:Cs(l,2)}}}function B0(l,p){let _=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(_*=2),_*p}function Cs(l,p){if(l.j.info("Error code "+p),p==2){var _=m(l.fb,l),I=l.Xa;const $=!I;I=new Ss(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||za(I,"https"),Ga(I),$?J2(I.toString(),_):Z2(I.toString(),_)}else Wt(2);l.G=0,l.l&&l.l.sa(p),j0(l),F0(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function j0(l){if(l.G=0,l.ka=[],l.l){const p=v0(l.h);(p.length!=0||l.i.length!=0)&&(A(l.ka,p),A(l.ka,l.i),l.h.i.length=0,E(l.i),l.i.length=0),l.l.ra()}}function q0(l,p,_){var I=_ instanceof Ss?er(_):new Ss(_);if(I.g!="")p&&(I.g=p+"."+I.g),Ha(I,I.s);else{var $=a.location;I=$.protocol,p=p?p+"."+$.hostname:$.hostname,$=+$.port;var j=new Ss(null);I&&za(j,I),p&&(j.g=p),$&&Ha(j,$),_&&(j.l=_),I=j}return _=l.D,p=l.ya,_&&p&&it(I,_,p),it(I,"VER",l.la),co(l,I),I}function z0(l,p,_){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Ca&&!l.pa?new ut(new Wa({eb:_})):new ut(l.pa),p.Ha(l.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function H0(){}t=H0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Za(){}Za.prototype.g=function(l,p){return new sn(l,p)};function sn(l,p){we.call(this),this.g=new N0(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!R(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!R(p)&&(this.g.D=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new ti(this)}v(sn,we),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){bc(this.g)},sn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var _={};_.__data__=l,l=_}else this.u&&(_={},_.__data__=Dt(l),l=_);p.i.push(new j2(p.Ya++,l)),p.G==3&&Xa(p)},sn.prototype.N=function(){this.g.l=null,delete this.j,bc(this.g),delete this.g,sn.aa.N.call(this)};function G0(l){cc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const _ in p){l=_;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}v(G0,cc);function W0(){dc.call(this),this.status=1}v(W0,dc);function ti(l){this.g=l}v(ti,H0),ti.prototype.ua=function(){Oe(this.g,"a")},ti.prototype.ta=function(l){Oe(this.g,new G0(l))},ti.prototype.sa=function(l){Oe(this.g,new W0)},ti.prototype.ra=function(){Oe(this.g,"b")},Za.prototype.createWebChannel=Za.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,Jy=function(){return new Za},Xy=function(){return Ua()},Qy=Ts,Nd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ba.NO_ERROR=0,Ba.TIMEOUT=8,Ba.HTTP_ERROR=6,Su=Ba,l0.COMPLETE="complete",Yy=l0,s0.EventType=Zi,Zi.OPEN="a",Zi.CLOSE="b",Zi.ERROR="c",Zi.MESSAGE="d",we.prototype.listen=we.prototype.K,vo=s0,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,Ky=ut}).apply(typeof ou<"u"?ou:typeof self<"u"?self:typeof window<"u"?window:{});const xm="@firebase/firestore",km="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zi="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=new jf("@firebase/firestore");function ci(){return Hs.logLevel}function ce(t,...e){if(Hs.logLevel<=Le.DEBUG){const n=e.map(rh);Hs.debug(`Firestore (${zi}): ${t}`,...n)}}function br(t,...e){if(Hs.logLevel<=Le.ERROR){const n=e.map(rh);Hs.error(`Firestore (${zi}): ${t}`,...n)}}function us(t,...e){if(Hs.logLevel<=Le.WARN){const n=e.map(rh);Hs.warn(`Firestore (${zi}): ${t}`,...n)}}function rh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Zy(t,r,n)}function Zy(t,e,n){let r=`FIRESTORE (${zi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw br(r),new Error(r)}function Ye(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Zy(e,s,r)}function De(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(jt.UNAUTHENTICATED))}shutdown(){}}class KI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class YI{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new mr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye(typeof r.accessToken=="string",31837,{l:r}),new ev(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new jt(e)}}class QI{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XI{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new QI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,an(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ye(this.o===void 0,3512);const r=i=>{i.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Dm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Dm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=ZI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ve(t,e){return t<e?-1:t>e?1:0}function Fd(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return Ve(r,s);{const i=tv(),o=eS(i.encode(Pm(t,n)),i.encode(Pm(e,n)));return o!==0?o:Ve(r,s)}}n+=r>65535?2:1}return Ve(t.length,e.length)}function Pm(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function eS(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ve(t[n],e[n]);return Ve(t.length,e.length)}function Ri(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="__name__";class Vn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ie(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ie(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Vn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ve(e.length,n.length)}static compareSegments(e,n){const r=Vn.isNumericId(e),s=Vn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Vn.extractNumericId(e).compare(Vn.extractNumericId(n)):Fd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ns.fromString(e.substring(4,e.length-2))}}class nt extends Vn{construct(e,n,r){return new nt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new nt(n)}static emptyPath(){return new nt([])}}const tS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Vn{construct(e,n,r){return new Ft(e,n,r)}static isValidIdentifier(e){return tS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Rm}static keyField(){return new Ft([Rm])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new oe(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new oe(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new oe(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new oe(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(nt.fromString(e))}static fromName(e){return new be(nt.fromString(e).popFirst(5))}static empty(){return new be(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t,e,n){if(!n)throw new oe(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nS(t,e,n,r){if(e===!0&&r===!0)throw new oe(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Om(t){if(!be.isDocumentKey(t))throw new oe(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Nm(t){if(be.isDocumentKey(t))throw new oe(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Vl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ie(12329,{type:typeof t})}function En(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vl(t);throw new oe(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ia(t,e){if(!rv(t))throw new oe(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new oe(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=-62135596800,Vm=1e6;class Ne{static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Vm);return new Ne(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Fm)throw new oe(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vm}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ne._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ia(e,Ne._jsonSchema))return new Ne(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Fm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ne._jsonSchemaVersion="firestore/timestamp/1.0",Ne._jsonSchema={type:vt("string",Ne._jsonSchemaVersion),seconds:vt("number"),nanoseconds:vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Ne(0,0))}static max(){return new xe(new Ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=-1;function rS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=xe.fromTimestamp(r===1e9?new Ne(n+1,0):new Ne(n,r));return new ls(s,be.empty(),e)}function sS(t){return new ls(t.readTime,t.key,ta)}class ls{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ls(xe.min(),be.empty(),ta)}static max(){return new ls(xe.max(),be.empty(),ta)}}function iS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hi(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==oS)throw t;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,r)=>{n(e)})}static reject(e){return new K((n,r)=>{r(e)})}static waitFor(e){return new K((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=K.resolve(!1);for(const r of e)n=n.next(s=>s?K.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new K((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new K((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function uS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Ml.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=-1;function Ll(t){return t==null}function Ju(t){return t===0&&1/t==-1/0}function lS(t){return typeof t=="number"&&Number.isInteger(t)&&!Ju(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="";function cS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Mm(e)),e=dS(t.get(n),e);return Mm(e)}function dS(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case sv:n+="";break;default:n+=i}}return n}function Mm(t){return t+sv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Es(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new at(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new au(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new au(this.root,e,this.comparator,!1)}getReverseIterator(){return new au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new au(this.root,e,this.comparator,!0)}}class au{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Rt.RED,this.left=s??Rt.EMPTY,this.right=i??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Rt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Rt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $m(this.data.getIterator())}getIteratorFrom(e){return new $m(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Et(this.comparator);return n.data=e,n}}class $m{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new ln([])}unionWith(e){let n=new Et(Ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ri(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ov("Invalid base64 string: "+i):i}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const fS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cs(t){if(Ye(!!t,39018),typeof t=="string"){let e=0;const n=fS.exec(t);if(Ye(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ht(t.seconds),nanos:ht(t.nanos)}}function ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ds(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="server_timestamp",uv="__type__",lv="__previous_value__",cv="__local_write_time__";function oh(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[uv])===null||n===void 0?void 0:n.stringValue)===av}function $l(t){const e=t.mapValue.fields[lv];return oh(e)?$l(e):e}function na(t){const e=cs(t.mapValue.fields[cv].timestampValue);return new Ne(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n,r,s,i,o,a,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=d}}const Zu="(default)";class ra{constructor(e,n){this.projectId=e,this.database=n||Zu}static empty(){return new ra("","")}get isDefaultDatabase(){return this.database===Zu}isEqual(e){return e instanceof ra&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="__type__",pS="__max__",uu={mapValue:{}},fv="__vector__",el="value";function fs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?oh(t)?4:gS(t)?9007199254740991:mS(t)?10:11:Ie(28295,{value:t})}function Yn(t,e){if(t===e)return!0;const n=fs(t);if(n!==fs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return na(t).isEqual(na(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=cs(s.timestampValue),a=cs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ds(s.bytesValue).isEqual(ds(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ht(s.geoPointValue.latitude)===ht(i.geoPointValue.latitude)&&ht(s.geoPointValue.longitude)===ht(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ht(s.integerValue)===ht(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ht(s.doubleValue),a=ht(i.doubleValue);return o===a?Ju(o)===Ju(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ri(t.arrayValue.values||[],e.arrayValue.values||[],Yn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Lm(o)!==Lm(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Yn(o[u],a[u])))return!1;return!0}(t,e);default:return Ie(52216,{left:t})}}function sa(t,e){return(t.values||[]).find(n=>Yn(n,e))!==void 0}function Oi(t,e){if(t===e)return 0;const n=fs(t),r=fs(e);if(n!==r)return Ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=ht(i.integerValue||i.doubleValue),u=ht(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Um(t.timestampValue,e.timestampValue);case 4:return Um(na(t),na(e));case 5:return Fd(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ds(i),u=ds(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const d=Ve(a[c],u[c]);if(d!==0)return d}return Ve(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ve(ht(i.latitude),ht(o.latitude));return a!==0?a:Ve(ht(i.longitude),ht(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Bm(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,u,c,d;const h=i.fields||{},m=o.fields||{},g=(a=h[el])===null||a===void 0?void 0:a.arrayValue,v=(u=m[el])===null||u===void 0?void 0:u.arrayValue,E=Ve(((c=g?.values)===null||c===void 0?void 0:c.length)||0,((d=v?.values)===null||d===void 0?void 0:d.length)||0);return E!==0?E:Bm(g,v)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===uu.mapValue&&o===uu.mapValue)return 0;if(i===uu.mapValue)return 1;if(o===uu.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),c=o.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let h=0;h<u.length&&h<d.length;++h){const m=Fd(u[h],d[h]);if(m!==0)return m;const g=Oi(a[u[h]],c[d[h]]);if(g!==0)return g}return Ve(u.length,d.length)}(t.mapValue,e.mapValue);default:throw Ie(23264,{le:n})}}function Um(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const n=cs(t),r=cs(e),s=Ve(n.seconds,r.seconds);return s!==0?s:Ve(n.nanos,r.nanos)}function Bm(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Oi(n[s],r[s]);if(i)return i}return Ve(n.length,r.length)}function Ni(t){return Vd(t)}function Vd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=cs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ds(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return be.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Vd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Vd(n.fields[o])}`;return s+"}"}(t.mapValue):Ie(61005,{value:t})}function Cu(t){switch(fs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$l(t);return e?16+Cu(e):16;case 5:return 2*t.stringValue.length;case 6:return ds(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Cu(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Es(r.fields,(i,o)=>{s+=i.length+Cu(o)}),s}(t.mapValue);default:throw Ie(13486,{value:t})}}function jm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Md(t){return!!t&&"integerValue"in t}function ah(t){return!!t&&"arrayValue"in t}function qm(t){return!!t&&"nullValue"in t}function zm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xu(t){return!!t&&"mapValue"in t}function mS(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[dv])===null||n===void 0?void 0:n.stringValue)===fv}function Mo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Es(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Mo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Mo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===pS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mo(n)}setAll(e){let n=Ft.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Mo(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());xu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Yn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];xu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Es(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new en(Mo(this.value))}}function hv(t){const e=[];return Es(t.fields,(n,r)=>{const s=new Ft([n]);if(xu(r)){const i=hv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new zt(e,0,xe.min(),xe.min(),xe.min(),en.empty(),0)}static newFoundDocument(e,n,r,s){return new zt(e,1,n,xe.min(),r,s,0)}static newNoDocument(e,n){return new zt(e,2,n,xe.min(),xe.min(),en.empty(),0)}static newUnknownDocument(e,n){return new zt(e,3,n,xe.min(),xe.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n){this.position=e,this.inclusive=n}}function Hm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=be.comparator(be.fromName(o.referenceValue),n.key):r=Oi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Gm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Yn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n="asc"){this.field=e,this.dir=n}}function _S(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{}class yt extends pv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vS(e,n,r):n==="array-contains"?new wS(e,r):n==="in"?new AS(e,r):n==="not-in"?new TS(e,r):n==="array-contains-any"?new IS(e,r):new yt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new bS(e,r):new ES(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Oi(n,this.value)):n!==null&&fs(this.value)===fs(n)&&this.matchesComparison(Oi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kn extends pv{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new kn(e,n)}matches(e){return mv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function mv(t){return t.op==="and"}function gv(t){return yS(t)&&mv(t)}function yS(t){for(const e of t.filters)if(e instanceof kn)return!1;return!0}function Ld(t){if(t instanceof yt)return t.field.canonicalString()+t.op.toString()+Ni(t.value);if(gv(t))return t.filters.map(e=>Ld(e)).join(",");{const e=t.filters.map(n=>Ld(n)).join(",");return`${t.op}(${e})`}}function _v(t,e){return t instanceof yt?function(r,s){return s instanceof yt&&r.op===s.op&&r.field.isEqual(s.field)&&Yn(r.value,s.value)}(t,e):t instanceof kn?function(r,s){return s instanceof kn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&_v(o,s.filters[a]),!0):!1}(t,e):void Ie(19439)}function yv(t){return t instanceof yt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ni(n.value)}`}(t):t instanceof kn?function(n){return n.op.toString()+" {"+n.getFilters().map(yv).join(" ,")+"}"}(t):"Filter"}class vS extends yt{constructor(e,n,r){super(e,n,r),this.key=be.fromName(r.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class bS extends yt{constructor(e,n){super(e,"in",n),this.keys=vv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ES extends yt{constructor(e,n){super(e,"not-in",n),this.keys=vv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>be.fromName(r.referenceValue))}class wS extends yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ah(n)&&sa(n.arrayValue,this.value)}}class AS extends yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sa(this.value.arrayValue,n)}}class TS extends yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(sa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!sa(this.value.arrayValue,n)}}class IS extends yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ah(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Pe=null}}function Wm(t,e=null,n=[],r=[],s=null,i=null,o=null){return new SS(t,e,n,r,s,i,o)}function uh(t){const e=De(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ld(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ll(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ni(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ni(r)).join(",")),e.Pe=n}return e.Pe}function lh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_S(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_v(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Gm(t.startAt,e.startAt)&&Gm(t.endAt,e.endAt)}function $d(t){return be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function CS(t,e,n,r,s,i,o,a){return new Wi(t,e,n,r,s,i,o,a)}function ch(t){return new Wi(t)}function Km(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bv(t){return t.collectionGroup!==null}function Lo(t){const e=De(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Et(Ft.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new ia(i,r))}),n.has(Ft.keyField().canonicalString())||e.Te.push(new ia(Ft.keyField(),r))}return e.Te}function zn(t){const e=De(t);return e.Ie||(e.Ie=xS(e,Lo(t))),e.Ie}function xS(t,e){if(t.limitType==="F")return Wm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ia(s.field,i)});const n=t.endAt?new tl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new tl(t.startAt.position,t.startAt.inclusive):null;return Wm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ud(t,e){const n=t.filters.concat([e]);return new Wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Bd(t,e,n){return new Wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ul(t,e){return lh(zn(t),zn(e))&&t.limitType===e.limitType}function Ev(t){return`${uh(zn(t))}|lt:${t.limitType}`}function di(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>yv(s)).join(", ")}]`),Ll(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ni(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ni(s)).join(",")),`Target(${r})`}(zn(t))}; limitType=${t.limitType})`}function Bl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):be.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Lo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,u){const c=Hm(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,Lo(r),s)||r.endAt&&!function(o,a,u){const c=Hm(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,Lo(r),s))}(t,e)}function kS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wv(t){return(e,n)=>{let r=!1;for(const s of Lo(t)){const i=DS(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function DS(t,e,n){const r=t.field.isKeyField()?be.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),c=a.data.field(i);return u!==null&&c!==null?Oi(u,c):Ie(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ie(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return iv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=new at(be.comparator);function Er(){return PS}const Av=new at(be.comparator);function bo(...t){let e=Av;for(const n of t)e=e.insert(n.key,n);return e}function Tv(t){let e=Av;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Vs(){return $o()}function Iv(){return $o()}function $o(){return new Qs(t=>t.toString(),(t,e)=>t.isEqual(e))}const RS=new at(be.comparator),OS=new Et(be.comparator);function $e(...t){let e=OS;for(const n of t)e=e.add(n);return e}const NS=new Et(Ve);function FS(){return NS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(e)?"-0":e}}function Sv(t){return{integerValue:""+t}}function VS(t,e){return lS(e)?Sv(e):dh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this._=void 0}}function MS(t,e,n){return t instanceof nl?function(s,i){const o={fields:{[uv]:{stringValue:av},[cv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&oh(i)&&(i=$l(i)),i&&(o.fields[lv]=i),{mapValue:o}}(n,e):t instanceof oa?xv(t,e):t instanceof aa?kv(t,e):function(s,i){const o=Cv(s,i),a=Ym(o)+Ym(s.Ee);return Md(o)&&Md(s.Ee)?Sv(a):dh(s.serializer,a)}(t,e)}function LS(t,e,n){return t instanceof oa?xv(t,e):t instanceof aa?kv(t,e):n}function Cv(t,e){return t instanceof rl?function(r){return Md(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class nl extends jl{}class oa extends jl{constructor(e){super(),this.elements=e}}function xv(t,e){const n=Dv(e);for(const r of t.elements)n.some(s=>Yn(s,r))||n.push(r);return{arrayValue:{values:n}}}class aa extends jl{constructor(e){super(),this.elements=e}}function kv(t,e){let n=Dv(e);for(const r of t.elements)n=n.filter(s=>!Yn(s,r));return{arrayValue:{values:n}}}class rl extends jl{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Ym(t){return ht(t.integerValue||t.doubleValue)}function Dv(t){return ah(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function $S(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof oa&&s instanceof oa||r instanceof aa&&s instanceof aa?Ri(r.elements,s.elements,Yn):r instanceof rl&&s instanceof rl?Yn(r.Ee,s.Ee):r instanceof nl&&s instanceof nl}(t.transform,e.transform)}class US{constructor(e,n){this.version=e,this.transformResults=n}}class Xt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xt}static exists(e){return new Xt(void 0,e)}static updateTime(e){return new Xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ku(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ql{}function Pv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new zl(t.key,Xt.none()):new Sa(t.key,t.data,Xt.none());{const n=t.data,r=en.empty();let s=new Et(Ft.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ws(t.key,r,new ln(s.toArray()),Xt.none())}}function BS(t,e,n){t instanceof Sa?function(s,i,o){const a=s.value.clone(),u=Xm(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ws?function(s,i,o){if(!ku(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Xm(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Rv(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Uo(t,e,n,r){return t instanceof Sa?function(i,o,a,u){if(!ku(i.precondition,o))return a;const c=i.value.clone(),d=Jm(i.fieldTransforms,u,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ws?function(i,o,a,u){if(!ku(i.precondition,o))return a;const c=Jm(i.fieldTransforms,u,o),d=o.data;return d.setAll(Rv(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return ku(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function jS(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Cv(r.transform,s||null);i!=null&&(n===null&&(n=en.empty()),n.set(r.field,i))}return n||null}function Qm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ri(r,s,(i,o)=>$S(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Sa extends ql{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ws extends ql{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Rv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Xm(t,e,n){const r=new Map;Ye(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,LS(o,a,n[s]))}return r}function Jm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,MS(i,o,e))}return r}class zl extends ql{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qS extends ql{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&BS(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Uo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Uo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Iv();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=Pv(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),$e())}isEqual(e){return this.batchId===e.batchId&&Ri(this.mutations,e.mutations,(n,r)=>Qm(n,r))&&Ri(this.baseMutations,e.baseMutations,(n,r)=>Qm(n,r))}}class fh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ye(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return RS}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new fh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,je;function WS(t){switch(t){case z.OK:return Ie(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return Ie(15467,{code:t})}}function Ov(t){if(t===void 0)return br("GRPC error has no .code"),z.UNKNOWN;switch(t){case _t.OK:return z.OK;case _t.CANCELLED:return z.CANCELLED;case _t.UNKNOWN:return z.UNKNOWN;case _t.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case _t.INTERNAL:return z.INTERNAL;case _t.UNAVAILABLE:return z.UNAVAILABLE;case _t.UNAUTHENTICATED:return z.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case _t.NOT_FOUND:return z.NOT_FOUND;case _t.ALREADY_EXISTS:return z.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return z.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case _t.ABORTED:return z.ABORTED;case _t.OUT_OF_RANGE:return z.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return z.UNIMPLEMENTED;case _t.DATA_LOSS:return z.DATA_LOSS;default:return Ie(39323,{code:t})}}(je=_t||(_t={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=new ns([4294967295,4294967295],0);function Zm(t){const e=tv().encode(t),n=new Wy;return n.update(e),new Uint8Array(n.digest())}function eg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ns([n,r],0),new ns([s,i],0)]}class hh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Eo(`Invalid padding: ${n}`);if(r<0)throw new Eo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Eo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Eo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ns.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(ns.fromNumber(r)));return s.compare(KS)===1&&(s=new ns([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Zm(e),[r,s]=eg(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new hh(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=Zm(e),[r,s]=eg(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Eo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ca.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hl(xe.min(),s,new at(Ve),Er(),$e())}}class Ca{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ca(r,n,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class Nv{constructor(e,n){this.targetId=e,this.De=n}}class Fv{constructor(e,n,r=Vt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class tg{constructor(){this.ve=0,this.Ce=ng(),this.Fe=Vt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=$e(),n=$e(),r=$e();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ie(38017,{changeType:i})}}),new Ca(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=ng()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class YS{constructor(e){this.We=e,this.Ge=new Map,this.ze=Er(),this.je=lu(),this.Je=lu(),this.He=new at(Ve)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Ie(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if($d(i))if(r===0){const o=new be(i.path);this.Xe(n,o,zt.newNoDocument(o,xe.min()))}else Ye(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const a=this._t(e),u=a?this.ut(a,e,o):1;if(u!==0){this.rt(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=ds(r).toUint8Array()}catch(u){if(u instanceof ov)return us("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new hh(o,s,i)}catch(u){return us(u instanceof Eo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const a=this.st(o);if(a){if(i.current&&$d(a.target)){const u=new be(a.target.path);this.Tt(u).has(o)||this.It(o,u)||this.Xe(o,u,zt.newNoDocument(u,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=$e();this.Je.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.st(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new Hl(e,n,this.He,this.ze,r);return this.ze=Er(),this.je=lu(),this.Je=lu(),this.He=new at(Ve),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new tg,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Et(Ve),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Et(Ve),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ce("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new tg),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function lu(){return new at(be.comparator)}function ng(){return new at(be.comparator)}const QS={asc:"ASCENDING",desc:"DESCENDING"},XS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JS={and:"AND",or:"OR"};class ZS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function jd(t,e){return t.useProto3Json||Ll(e)?e:{value:e}}function sl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function eC(t,e){return sl(t,e.toTimestamp())}function Hn(t){return Ye(!!t,49232),xe.fromTimestamp(function(n){const r=cs(n);return new Ne(r.seconds,r.nanos)}(t))}function ph(t,e){return qd(t,e).canonicalString()}function qd(t,e){const n=function(s){return new nt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Mv(t){const e=nt.fromString(t);return Ye(jv(e),10190,{key:e.toString()}),e}function zd(t,e){return ph(t.databaseId,e.path)}function Gc(t,e){const n=Mv(e);if(n.get(1)!==t.databaseId.projectId)throw new oe(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new oe(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new be($v(n))}function Lv(t,e){return ph(t.databaseId,e)}function tC(t){const e=Mv(t);return e.length===4?nt.emptyPath():$v(e)}function Hd(t){return new nt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $v(t){return Ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function rg(t,e,n){return{name:zd(t,e),fields:n.value.mapValue.fields}}function nC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ie(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Ye(d===void 0||typeof d=="string",58123),Vt.fromBase64String(d||"")):(Ye(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Vt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?z.UNKNOWN:Ov(c.code);return new oe(d,c.message||"")}(o);n=new Fv(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Gc(t,r.document.name),i=Hn(r.document.updateTime),o=r.document.createTime?Hn(r.document.createTime):xe.min(),a=new en({mapValue:{fields:r.document.fields}}),u=zt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Du(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Gc(t,r.document),i=r.readTime?Hn(r.readTime):xe.min(),o=zt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Du([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Gc(t,r.document),i=r.removedTargetIds||[];n=new Du([],i,s,null)}else{if(!("filter"in e))return Ie(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new GS(s,i),a=r.targetId;n=new Nv(a,o)}}return n}function rC(t,e){let n;if(e instanceof Sa)n={update:rg(t,e.key,e.value)};else if(e instanceof zl)n={delete:zd(t,e.key)};else if(e instanceof ws)n={update:rg(t,e.key,e.data),updateMask:fC(e.fieldMask)};else{if(!(e instanceof qS))return Ie(16599,{Rt:e.type});n={verify:zd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof nl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof oa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof aa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof rl)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw Ie(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:eC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ie(27497)}(t,e.precondition)),n}function sC(t,e){return t&&t.length>0?(Ye(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Hn(s.updateTime):Hn(i);return o.isEqual(xe.min())&&(o=Hn(i)),new US(o,s.transformResults||[])}(n,e))):[]}function iC(t,e){return{documents:[Lv(t,e.path)]}}function oC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Lv(t,s);const i=function(c){if(c.length!==0)return Bv(kn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:fi(m.field),direction:lC(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=jd(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{Vt:n,parent:s}}function aC(t){let e=tC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ye(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const m=Uv(h);return m instanceof kn&&gv(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(v){return new ia(hi(v.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,Ll(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(h){const m=!!h.before,g=h.values||[];return new tl(g,m)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const m=!h.before,g=h.values||[];return new tl(g,m)}(n.endAt)),CS(e,s,o,i,a,"F",u,c)}function uC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Uv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=hi(n.unaryFilter.field);return yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=hi(n.unaryFilter.field);return yt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=hi(n.unaryFilter.field);return yt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=hi(n.unaryFilter.field);return yt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}}(t):t.fieldFilter!==void 0?function(n){return yt.create(hi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return kn.create(n.compositeFilter.filters.map(r=>Uv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}}(n.compositeFilter.op))}(t):Ie(30097,{filter:t})}function lC(t){return QS[t]}function cC(t){return XS[t]}function dC(t){return JS[t]}function fi(t){return{fieldPath:t.canonicalString()}}function hi(t){return Ft.fromServerFormat(t.fieldPath)}function Bv(t){return t instanceof yt?function(n){if(n.op==="=="){if(zm(n.value))return{unaryFilter:{field:fi(n.field),op:"IS_NAN"}};if(qm(n.value))return{unaryFilter:{field:fi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zm(n.value))return{unaryFilter:{field:fi(n.field),op:"IS_NOT_NAN"}};if(qm(n.value))return{unaryFilter:{field:fi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fi(n.field),op:cC(n.op),value:n.value}}}(t):t instanceof kn?function(n){const r=n.getFilters().map(s=>Bv(s));return r.length===1?r[0]:{compositeFilter:{op:dC(n.op),filters:r}}}(t):Ie(54877,{filter:t})}function fC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n,r,s,i=xe.min(),o=xe.min(),a=Vt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.gt=e}}function pC(t){const e=aC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Bd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.Dn=new gC}addToCollectionParentIndex(e,n){return this.Dn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(ls.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(ls.min())}updateCollectionGroup(e,n,r){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class gC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Et(nt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Et(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qv=41943040;class Zt{static withCacheSize(e){return new Zt(e,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(qv,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Fi(0)}static ur(){return new Fi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="LruGarbageCollector",_C=1048576;function og([t,e],[n,r]){const s=Ve(t,n);return s===0?Ve(e,r):s}class yC{constructor(e){this.Tr=e,this.buffer=new Et(og),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();og(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ce(ig,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Gi(n)?ce(ig,"Ignoring IndexedDB error during garbage collection: ",n):await Hi(n)}await this.Rr(3e5)})}}class bC{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return K.resolve(Ml.ue);const r=new yC(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(sg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sg):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,a,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),ci()<=Le.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(u-a)+`ms
	Removed ${h} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function EC(t,e){return new bC(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.changes=new Qs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?K.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Uo(r.mutation,s,ln.empty(),Ne.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,$e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=$e()){const s=Vs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=bo();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Vs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,$e()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Er();const o=$o(),a=function(){return $o()}();return n.forEach((u,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof ws)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Uo(d.mutation,c,d.mutation.getFieldMask(),Ne.now())):o.set(c.key,ln.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new AC(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=$o();let s=new at((o,a)=>o-a),i=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||ln.empty();d=a.applyToLocalView(c,d),r.set(u,d);const h=(s.get(a.batchId)||$e()).add(u);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,d=u.value,h=Iv();d.forEach(m=>{if(!i.has(m)){const g=Pv(n.get(m),r.get(m));g!==null&&h.set(m,g),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return K.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return be.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):K.resolve(Vs());let a=ta,u=i;return o.next(c=>K.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?K.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,$e())).next(d=>({batchId:a,changes:Tv(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(r=>{let s=bo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=bo();return this.indexManager.getCollectionParents(e,i).next(a=>K.forEach(a,u=>{const c=function(h,m){return new Wi(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,zt.newInvalidDocument(d)))});let a=bo();return o.forEach((u,c)=>{const d=i.get(u);d!==void 0&&Uo(d.mutation,c,ln.empty(),Ne.now()),Bl(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return K.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Hn(s.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:pC(s.bundledQuery),readTime:Hn(s.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.overlays=new at(be.comparator),this.kr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Vs();return K.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),K.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),K.resolve()}getOverlaysForCollection(e,n,r){const s=Vs(),i=n.length+1,o=new be(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return K.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new at((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Vs(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Vs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return K.resolve(a)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new HS(n,r));let i=this.kr.get(n);i===void 0&&(i=$e(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(){this.qr=new Et(Tt.Qr),this.$r=new Et(Tt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Tt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Tt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new be(new nt([])),r=new Tt(n,e),s=new Tt(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new be(new nt([])),r=new Tt(n,e),s=new Tt(n,e+1);let i=$e();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Tt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Tt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return be.comparator(e.key,n.key)||Ve(e.Hr,n.Hr)}static Ur(e,n){return Ve(e.Hr,n.Hr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Et(Tt.Qr)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new zS(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Yr=this.Yr.add(new Tt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return K.resolve(o)}lookupMutationBatch(e,n){return K.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return K.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?ih:this.er-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Tt(n,0),s=new Tt(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const a=this.Zr(o.Hr);i.push(a)}),K.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(Ve);return n.forEach(s=>{const i=new Tt(s,0),o=new Tt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],a=>{r=r.add(a.Hr)})}),K.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;be.isDocumentKey(i)||(i=i.child(""));const o=new Tt(new be(i),0);let a=new Et(Ve);return this.Yr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(u.Hr)),!0)},o),K.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ye(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return K.forEach(n.mutations,s=>{const i=new Tt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Tt(n,0),s=this.Yr.firstAfterOrEqual(r);return K.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.ni=e,this.docs=function(){return new at(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return K.resolve(r?r.document.mutableCopy():zt.newInvalidDocument(n))}getEntries(e,n){let r=Er();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():zt.newInvalidDocument(s))}),K.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Er();const o=n.path,a=new be(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||iS(sS(d),r)<=0||(s.has(d.key)||Bl(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return K.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Ie(9500)}ri(e,n){return K.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new DC(this)}getSize(e){return K.resolve(this.size)}}class DC extends wC{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),K.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.persistence=e,this.ii=new Qs(n=>uh(n),lh),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.si=0,this.oi=new mh,this.targetCount=0,this._i=Fi.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),K.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Fi(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.hr(n),K.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),K.waitFor(i).next(()=>s)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return K.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),K.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),K.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return K.resolve(r)}containsKey(e,n){return K.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n){this.ai={},this.overlays={},this.ui=new Ml(0),this.ci=!1,this.ci=!0,this.li=new CC,this.referenceDelegate=e(this),this.hi=new PC(this),this.indexManager=new mC,this.remoteDocumentCache=function(s){return new kC(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new hC(n),this.Ti=new IC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new xC(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){ce("MemoryPersistence","Starting transaction:",e);const s=new RC(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return K.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class RC extends aS{constructor(e){super(),this.currentSequenceNumber=e}}class gh{constructor(e){this.persistence=e,this.Ai=new mh,this.Ri=null}static Vi(e){return new gh(e)}get mi(){if(this.Ri)return this.Ri;throw Ie(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),K.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.mi,r=>{const s=be.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,xe.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return K.or([()=>K.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class il{constructor(e,n){this.persistence=e,this.gi=new Qs(r=>cS(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=EC(this,n)}static Vi(e,n){return new il(e,n)}Ii(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return K.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?K.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,xe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),K.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),K.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Cu(e.data.value)),n}Sr(e,n,r){return K.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return K.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=$e(),s=$e();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new _h(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return aA()?8:uS(Ht())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new OC;return this.ws(e,n,o).next(a=>{if(i.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(ci()<=Le.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",di(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),K.resolve()):(ci()<=Le.DEBUG&&ce("QueryEngine","Query:",di(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(ci()<=Le.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",di(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zn(n))):K.resolve())}ps(e,n){if(Km(n))return K.resolve(null);let r=zn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Bd(n,null,"F"),r=zn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=$e(...i);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.bs(n,a);return this.Ds(n,c,o,u.readTime)?this.ps(e,Bd(n,null,"F")):this.vs(e,c,n,u)}))})))}ys(e,n,r,s){return Km(n)||s.isEqual(xe.min())?K.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?K.resolve(null):(ci()<=Le.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),di(n)),this.vs(e,o,n,rS(s,ta)).next(a=>a))})}bs(e,n){let r=new Et(wv(e));return n.forEach((s,i)=>{Bl(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return ci()<=Le.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",di(n)),this.gs.getDocumentsMatchingQuery(e,n,ls.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh="LocalStore",FC=3e8;class VC{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new at(Ve),this.Ms=new Qs(i=>uh(i),lh),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TC(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function MC(t,e,n,r){return new VC(t,e,n,r)}async function Hv(t,e){const n=De(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=$e();for(const c of s){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Bs:c,removedBatchIds:o,addedBatchIds:a}))})})}function LC(t,e){const n=De(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,c,d){const h=c.batch,m=h.keys();let g=K.resolve();return m.forEach(v=>{g=g.next(()=>d.getEntry(u,v)).next(E=>{const A=c.docVersions.get(v);Ye(A!==null,48541),E.version.compareTo(A)<0&&(h.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),d.addEntry(E)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(u,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=$e();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Gv(t){const e=De(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function $C(t,e){const n=De(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const a=[];e.targetChanges.forEach((d,h)=>{const m=s.get(h);if(!m)return;a.push(n.hi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.hi.addMatchingKeys(i,d.addedDocuments,h)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Vt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),s=s.insert(h,g),function(E,A,C){return E.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=FC?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(m,g,d)&&a.push(n.hi.updateTargetData(i,g))});let u=Er(),c=$e();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(UC(i,o,e.documentUpdates).next(d=>{u=d.Ls,c=d.ks})),!r.isEqual(xe.min())){const d=n.hi.getLastRemoteSnapshotVersion(i).next(h=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return K.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.Fs=s,i))}function UC(t,e,n){let r=$e(),s=$e();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Er();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(xe.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ce(yh,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ls:o,ks:s}})}function BC(t,e){const n=De(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ih),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jC(t,e){const n=De(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,K.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new Yr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Gd(t,e,n){const r=De(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Gi(o))throw o;ce(yh,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function ag(t,e,n){const r=De(t);let s=xe.min(),i=$e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,d){const h=De(u),m=h.Ms.get(d);return m!==void 0?K.resolve(h.Fs.get(m)):h.hi.getTargetData(c,d)}(r,o,zn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:xe.min(),n?i:$e())).next(a=>(qC(r,kS(e),a),{documents:a,qs:i})))}function qC(t,e,n){let r=t.xs.get(e)||xe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class ug{constructor(){this.activeTargetIds=FS()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zC{constructor(){this.Fo=new ug,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new ug,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="ConnectivityMonitor";class cg{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ce(lg,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ce(lg,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu=null;function Wd(){return cu===null?cu=function(){return 268435456+Math.round(2147483648*Math.random())}():cu++,"0x"+cu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc="RestConnection",GC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WC{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Zu?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=Wd(),a=this.Go(e,n.toUriEncodedString());ce(Wc,`Sending RPC '${e}' ${o}:`,a,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,s,i);const{host:c}=new URL(a),d=Bi(c);return this.jo(e,a,u,r,d).then(h=>(ce(Wc,`Received RPC '${e}' ${o}: `,h),h),h=>{throw us(Wc,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=GC[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class YC extends WC{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=Wd();return new Promise((a,u)=>{const c=new Ky;c.setWithCredentials(!0),c.listenOnce(Yy.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Su.NO_ERROR:const h=c.getResponseJson();ce(Ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Su.TIMEOUT:ce(Ut,`RPC '${e}' ${o} timed out`),u(new oe(z.DEADLINE_EXCEEDED,"Request time out"));break;case Su.HTTP_ERROR:const m=c.getStatus();if(ce(Ut,`RPC '${e}' ${o} failed with status:`,m,"response text:",c.getResponseText()),m>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g?.error;if(v&&v.status&&v.message){const E=function(C){const R=C.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(R)>=0?R:z.UNKNOWN}(v.status);u(new oe(E,v.message))}else u(new oe(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new oe(z.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{c_:e,streamId:o,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{ce(Ut,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);ce(Ut,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}P_(e,n,r){const s=Wd(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Jy(),a=Xy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");ce(Ut,`Creating RPC '${e}' stream ${s}: ${d}`,u);const h=o.createWebChannel(d,u);this.T_(h);let m=!1,g=!1;const v=new KC({Ho:A=>{g?ce(Ut,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(m||(ce(Ut,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),ce(Ut,`RPC '${e}' stream ${s} sending:`,A),h.send(A))},Yo:()=>h.close()}),E=(A,C,R)=>{A.listen(C,F=>{try{R(F)}catch(V){setTimeout(()=>{throw V},0)}})};return E(h,vo.EventType.OPEN,()=>{g||(ce(Ut,`RPC '${e}' stream ${s} transport opened.`),v.s_())}),E(h,vo.EventType.CLOSE,()=>{g||(g=!0,ce(Ut,`RPC '${e}' stream ${s} transport closed`),v.__(),this.I_(h))}),E(h,vo.EventType.ERROR,A=>{g||(g=!0,us(Ut,`RPC '${e}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),v.__(new oe(z.UNAVAILABLE,"The operation could not be completed")))}),E(h,vo.EventType.MESSAGE,A=>{var C;if(!g){const R=A.data[0];Ye(!!R,16349);const F=R,V=F?.error||((C=F[0])===null||C===void 0?void 0:C.error);if(V){ce(Ut,`RPC '${e}' stream ${s} received error:`,V);const U=V.status;let M=function(T){const k=_t[T];if(k!==void 0)return Ov(k)}(U),S=V.message;M===void 0&&(M=z.INTERNAL,S="Unknown error status: "+U+" with message "+V.message),g=!0,v.__(new oe(M,S)),h.close()}else ce(Ut,`RPC '${e}' stream ${s} received:`,R),v.a_(R)}}),E(a,Qy.STAT_EVENT,A=>{A.stat===Nd.PROXY?ce(Ut,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Nd.NOPROXY&&ce(Ut,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.o_()},0),v}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Kc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(t){return new ZS(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&ce("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="PersistentStream";class Kv{constructor(e,n,r,s,i,o,a,u){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Wv(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(br(n.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new oe(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ce(dg,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ce(dg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QC extends Kv{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=nC(this.serializer,e),r=function(i){if(!("targetChange"in i))return xe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?xe.min():o.readTime?Hn(o.readTime):xe.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Hd(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=$d(u)?{documents:iC(i,u)}:{query:oC(i,u).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Vv(i,o.resumeToken);const c=jd(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(xe.min())>0){a.readTime=sl(i,o.snapshotVersion.toTimestamp());const c=jd(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=uC(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Hd(this.serializer),n.removeTarget=e,this.k_(n)}}class XC extends Kv{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=sC(e.writeResults,e.commitTime),r=Hn(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Hd(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>rC(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{}class ZC extends JC{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new oe(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,qd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(z.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,qd(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(z.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class ex{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(br(n),this._a=!1):ce("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="RemoteStore";class tx{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Xs(this)&&(ce(Gs,"Restarting streams for network reachability change."),await async function(u){const c=De(u);c.Ia.add(4),await xa(c),c.Aa.set("Unknown"),c.Ia.delete(4),await Wl(c)}(this))})}),this.Aa=new ex(r,s)}}async function Wl(t){if(Xs(t))for(const e of t.da)await e(!0)}async function xa(t){for(const e of t.da)await e(!1)}function Yv(t,e){const n=De(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),wh(n)?Eh(n):Ki(n).x_()&&bh(n,e))}function vh(t,e){const n=De(t),r=Ki(n);n.Ta.delete(e),r.x_()&&Qv(n,e),n.Ta.size===0&&(r.x_()?r.B_():Xs(n)&&n.Aa.set("Unknown"))}function bh(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ki(t).H_(e)}function Qv(t,e){t.Ra.$e(e),Ki(t).Y_(e)}function Eh(t){t.Ra=new YS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ki(t).start(),t.Aa.aa()}function wh(t){return Xs(t)&&!Ki(t).M_()&&t.Ta.size>0}function Xs(t){return De(t).Ia.size===0}function Xv(t){t.Ra=void 0}async function nx(t){t.Aa.set("Online")}async function rx(t){t.Ta.forEach((e,n)=>{bh(t,e)})}async function sx(t,e){Xv(t),wh(t)?(t.Aa.la(e),Eh(t)):t.Aa.set("Unknown")}async function ix(t,e,n){if(t.Aa.set("Online"),e instanceof Fv&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ta.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ta.delete(a),s.Ra.removeTarget(a))}(t,e)}catch(r){ce(Gs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ol(t,r)}else if(e instanceof Du?t.Ra.Ye(e):e instanceof Nv?t.Ra.it(e):t.Ra.et(e),!n.isEqual(xe.min()))try{const r=await Gv(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Ra.Pt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.Ta.get(c);d&&i.Ta.set(c,d.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const d=i.Ta.get(u);if(!d)return;i.Ta.set(u,d.withResumeToken(Vt.EMPTY_BYTE_STRING,d.snapshotVersion)),Qv(i,u);const h=new Yr(d.target,u,c,d.sequenceNumber);bh(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ce(Gs,"Failed to raise snapshot:",r),await ol(t,r)}}async function ol(t,e,n){if(!Gi(e))throw e;t.Ia.add(1),await xa(t),t.Aa.set("Offline"),n||(n=()=>Gv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ce(Gs,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Wl(t)})}function Jv(t,e){return e().catch(n=>ol(t,n,e))}async function Kl(t){const e=De(t),n=hs(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ih;for(;ox(e);)try{const s=await BC(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,ax(e,s)}catch(s){await ol(e,s)}Zv(e)&&eb(e)}function ox(t){return Xs(t)&&t.Pa.length<10}function ax(t,e){t.Pa.push(e);const n=hs(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function Zv(t){return Xs(t)&&!hs(t).M_()&&t.Pa.length>0}function eb(t){hs(t).start()}async function ux(t){hs(t).na()}async function lx(t){const e=hs(t);for(const n of t.Pa)e.X_(n.mutations)}async function cx(t,e,n){const r=t.Pa.shift(),s=fh.from(r,e,n);await Jv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Kl(t)}async function dx(t,e){e&&hs(t).Z_&&await async function(r,s){if(function(o){return WS(o)&&o!==z.ABORTED}(s.code)){const i=r.Pa.shift();hs(r).N_(),await Jv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Kl(r)}}(t,e),Zv(t)&&eb(t)}async function fg(t,e){const n=De(t);n.asyncQueue.verifyOperationInProgress(),ce(Gs,"RemoteStore received new credentials");const r=Xs(n);n.Ia.add(3),await xa(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Wl(n)}async function fx(t,e){const n=De(t);e?(n.Ia.delete(2),await Wl(n)):e||(n.Ia.add(2),await xa(n),n.Aa.set("Unknown"))}function Ki(t){return t.Va||(t.Va=function(n,r,s){const i=De(n);return i.ia(),new QC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:nx.bind(null,t),e_:rx.bind(null,t),n_:sx.bind(null,t),J_:ix.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),wh(t)?Eh(t):t.Aa.set("Unknown")):(await t.Va.stop(),Xv(t))})),t.Va}function hs(t){return t.ma||(t.ma=function(n,r,s){const i=De(n);return i.ia(),new XC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:ux.bind(null,t),n_:dx.bind(null,t),ea:lx.bind(null,t),ta:cx.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Kl(t)):(await t.ma.stop(),t.Pa.length>0&&(ce(Gs,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Ah(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Th(t,e){if(br("AsyncQueue",`${e}: ${t}`),Gi(t))return new oe(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{static emptySet(e){return new wi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||be.comparator(n.key,r.key):(n,r)=>be.comparator(n.key,r.key),this.keyedMap=bo(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new wi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.fa=new at(be.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Ie(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Vi{constructor(e,n,r,s,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Vi(e,n,wi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ul(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class px{constructor(){this.queries=pg(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=De(n),i=s.queries;s.queries=pg(),i.forEach((o,a)=>{for(const u of a.wa)u.onError(r)})})(this,new oe(z.ABORTED,"Firestore shutting down"))}}function pg(){return new Qs(t=>Ev(t),Ul)}async function tb(t,e){const n=De(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new hx,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Th(o,`Initialization of query '${di(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&Ih(n)}async function nb(t,e){const n=De(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function mx(t,e){const n=De(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.wa)a.Ca(s)&&(r=!0);o.ya=s}}r&&Ih(n)}function gx(t,e,n){const r=De(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function Ih(t){t.Da.forEach(e=>{e.next()})}var Kd,mg;(mg=Kd||(Kd={})).Fa="default",mg.Cache="cache";class rb{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Vi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Vi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Kd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e){this.key=e}}class ib{constructor(e){this.key=e}}class _x{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=$e(),this.mutatedKeys=$e(),this.Xa=wv(e),this.eu=new wi(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new hg,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const m=s.get(d),g=Bl(this.query,h)?h:null,v=!!m&&this.mutatedKeys.has(m.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let A=!1;m&&g?m.data.isEqual(g.data)?v!==E&&(r.track({type:3,doc:g}),A=!0):this.iu(m,g)||(r.track({type:2,doc:g}),A=!0,(u&&this.Xa(g,u)>0||c&&this.Xa(g,c)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),A=!0):m&&!g&&(r.track({type:1,doc:m}),A=!0,(u||c)&&(a=!0)),A&&(g?(o=o.add(g),i=E?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{eu:o,ru:r,Ds:a,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((d,h)=>function(g,v){const E=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{At:A})}};return E(g)-E(v)}(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),s=s!=null&&s;const a=n&&!s?this.ou():[],u=this.Za.size===0&&this.current&&!s?1:0,c=u!==this.Ya;return this.Ya=u,o.length!==0||c?{snapshot:new Vi(this.query,e.eu,i,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new hg,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=$e(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new ib(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new sb(r))}),n}uu(e){this.Ha=e.qs,this.Za=$e();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Vi.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Sh="SyncEngine";class yx{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vx{constructor(e){this.key=e,this.lu=!1}}class bx{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Qs(a=>Ev(a),Ul),this.Tu=new Map,this.Iu=new Set,this.du=new at(be.comparator),this.Eu=new Map,this.Au=new mh,this.Ru={},this.Vu=new Map,this.mu=Fi.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Ex(t,e,n=!0){const r=db(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await ob(r,e,n,!0),s}async function wx(t,e){const n=db(t);await ob(n,e,!0,!1)}async function ob(t,e,n,r){const s=await jC(t.localStore,zn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Ax(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Yv(t.remoteStore,s),a}async function Ax(t,e,n,r,s){t.gu=(h,m,g)=>async function(E,A,C,R){let F=A.view.nu(C);F.Ds&&(F=await ag(E.localStore,A.query,!1).then(({documents:S})=>A.view.nu(S,F)));const V=R&&R.targetChanges.get(A.targetId),U=R&&R.targetMismatches.get(A.targetId)!=null,M=A.view.applyChanges(F,E.isPrimaryClient,V,U);return _g(E,A.targetId,M._u),M.snapshot}(t,h,m,g);const i=await ag(t.localStore,e,!0),o=new _x(e,i.qs),a=o.nu(i.documents),u=Ca.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,u);_g(t,n,c._u);const d=new yx(e,n,o);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),c.snapshot}async function Tx(t,e,n){const r=De(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!Ul(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Gd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&vh(r.remoteStore,s.targetId),Yd(r,s.targetId)}).catch(Hi)):(Yd(r,s.targetId),await Gd(r.localStore,s.targetId,!0))}async function Ix(t,e){const n=De(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vh(n.remoteStore,r.targetId))}async function Sx(t,e,n){const r=Ox(t);try{const s=await function(o,a){const u=De(o),c=Ne.now(),d=a.reduce((g,v)=>g.add(v.key),$e());let h,m;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Er(),E=$e();return u.Os.getEntries(g,d).next(A=>{v=A,v.forEach((C,R)=>{R.isValidDocument()||(E=E.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,v)).next(A=>{h=A;const C=[];for(const R of a){const F=jS(R,h.get(R.key).overlayedDocument);F!=null&&C.push(new ws(R.key,F,hv(F.value.mapValue),Xt.exists(!0)))}return u.mutationQueue.addMutationBatch(g,c,C,a)}).next(A=>{m=A;const C=A.applyToLocalDocumentSet(h,E);return u.documentOverlayCache.saveOverlays(g,A.batchId,C)})}).then(()=>({batchId:m.batchId,changes:Tv(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let c=o.Ru[o.currentUser.toKey()];c||(c=new at(Ve)),c=c.insert(a,u),o.Ru[o.currentUser.toKey()]=c}(r,s.batchId,n),await ka(r,s.changes),await Kl(r.remoteStore)}catch(s){const i=Th(s,"Failed to persist write");n.reject(i)}}async function ab(t,e){const n=De(t);try{const r=await $C(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(Ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?Ye(o.lu,14607):s.removedDocuments.size>0&&(Ye(o.lu,42227),o.lu=!1))}),await ka(n,r,e)}catch(r){await Hi(r)}}function gg(t,e,n){const r=De(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=De(o);u.onlineState=a;let c=!1;u.queries.forEach((d,h)=>{for(const m of h.wa)m.va(a)&&(c=!0)}),c&&Ih(u)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Cx(t,e,n){const r=De(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new at(be.comparator);o=o.insert(i,zt.newNoDocument(i,xe.min()));const a=$e().add(i),u=new Hl(xe.min(),new Map,new at(Ve),o,a);await ab(r,u),r.du=r.du.remove(i),r.Eu.delete(e),Ch(r)}else await Gd(r.localStore,e,!1).then(()=>Yd(r,e,n)).catch(Hi)}async function xx(t,e){const n=De(t),r=e.batch.batchId;try{const s=await LC(n.localStore,e);lb(n,r,null),ub(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ka(n,s)}catch(s){await Hi(s)}}async function kx(t,e,n){const r=De(t);try{const s=await function(o,a){const u=De(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,a).next(h=>(Ye(h!==null,37113),d=h.keys(),u.mutationQueue.removeMutationBatch(c,h))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);lb(r,e,n),ub(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ka(r,s)}catch(s){await Hi(s)}}function ub(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function lb(t,e,n){const r=De(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function Yd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||cb(t,r)})}function cb(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(vh(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Ch(t))}function _g(t,e,n){for(const r of n)r instanceof sb?(t.Au.addReference(r.key,e),Dx(t,r)):r instanceof ib?(ce(Sh,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||cb(t,r.key)):Ie(19791,{yu:r})}function Dx(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(ce(Sh,"New document in limbo: "+n),t.Iu.add(r),Ch(t))}function Ch(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new be(nt.fromString(e)),r=t.mu.next();t.Eu.set(r,new vx(n)),t.du=t.du.insert(n,r),Yv(t.remoteStore,new Yr(zn(ch(n.path)),r,"TargetPurposeLimboResolution",Ml.ue))}}async function ka(t,e,n){const r=De(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{o.push(r.gu(u,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n?.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){s.push(c);const h=_h.Es(u.targetId,c);i.push(h)}}))}),await Promise.all(o),r.hu.J_(s),await async function(u,c){const d=De(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>K.forEach(c,m=>K.forEach(m.Is,g=>d.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>K.forEach(m.ds,g=>d.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!Gi(h))throw h;ce(yh,"Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const g=d.Fs.get(m),v=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(v);d.Fs=d.Fs.insert(m,E)}}}(r.localStore,i))}async function Px(t,e){const n=De(t);if(!n.currentUser.isEqual(e)){ce(Sh,"User change. New user:",e.toKey());const r=await Hv(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(a=>{a.forEach(u=>{u.reject(new oe(z.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ka(n,r.Bs)}}function Rx(t,e){const n=De(t),r=n.Eu.get(e);if(r&&r.lu)return $e().add(r.key);{let s=$e();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const a=n.Pu.get(o);s=s.unionWith(a.view.tu)}return s}}function db(t){const e=De(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ab.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Cx.bind(null,e),e.hu.J_=mx.bind(null,e.eventManager),e.hu.pu=gx.bind(null,e.eventManager),e}function Ox(t){const e=De(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kx.bind(null,e),e}class al{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gl(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return MC(this.persistence,new NC,e.initialUser,this.serializer)}Du(e){return new zv(gh.Vi,this.serializer)}bu(e){return new zC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}al.provider={build:()=>new al};class Nx extends al{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ye(this.persistence.referenceDelegate instanceof il,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new vC(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new zv(r=>il.Vi(r,n),this.serializer)}}class Qd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Px.bind(null,this.syncEngine),await fx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new px}()}createDatastore(e){const n=Gl(e.databaseInfo.databaseId),r=function(i){return new YC(i)}(e.databaseInfo);return function(i,o,a,u){return new ZC(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new tx(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>gg(this.syncEngine,n,0),function(){return cg.C()?new cg:new HC}())}createSyncEngine(e,n){return function(s,i,o,a,u,c,d){const h=new bx(s,i,o,a,u,c);return d&&(h.fu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=De(s);ce(Gs,"RemoteStore shutting down."),i.Ia.add(5),await xa(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Qd.provider={build:()=>new Qd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="FirestoreClient";class Fx{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=jt.UNAUTHENTICATED,this.clientId=sh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ce(ps,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ce(ps,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Th(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Yc(t,e){t.asyncQueue.verifyOperationInProgress(),ce(ps,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Hv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{us("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ce("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{us("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function yg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Vx(t);ce(ps,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>fg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>fg(e.remoteStore,s)),t._onlineComponents=e}async function Vx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ce(ps,"Using user provided OfflineComponentProvider");try{await Yc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;us("Error using user provided cache. Falling back to memory cache: "+n),await Yc(t,new al)}}else ce(ps,"Using default OfflineComponentProvider"),await Yc(t,new Nx(void 0));return t._offlineComponents}async function hb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ce(ps,"Using user provided OnlineComponentProvider"),await yg(t,t._uninitializedComponentsProvider._online)):(ce(ps,"Using default OnlineComponentProvider"),await yg(t,new Qd))),t._onlineComponents}function Mx(t){return hb(t).then(e=>e.syncEngine)}async function pb(t){const e=await hb(t),n=e.eventManager;return n.onListen=Ex.bind(null,e.syncEngine),n.onUnlisten=Tx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=wx.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Ix.bind(null,e.syncEngine),n}function Lx(t,e,n={}){const r=new mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const d=new fb({next:m=>{d.Ou(),o.enqueueAndForget(()=>nb(i,h));const g=m.docs.has(a);!g&&m.fromCache?c.reject(new oe(z.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&u&&u.source==="server"?c.reject(new oe(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new rb(ch(a.path),d,{includeMetadataChanges:!0,ka:!0});return tb(i,h)}(await pb(t),t.asyncQueue,e,n,r)),r.promise}function $x(t,e,n={}){const r=new mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const d=new fb({next:m=>{d.Ou(),o.enqueueAndForget(()=>nb(i,h)),m.fromCache&&u.source==="server"?c.reject(new oe(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new rb(a,d,{includeMetadataChanges:!0,ka:!0});return tb(i,h)}(await pb(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb="firestore.googleapis.com",bg=!0;class Eg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gb,this.ssl=bg}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:bg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_C)throw new oe(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Eg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new WI;switch(r.type){case"firstParty":return new XI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=vg.get(n);r&&(ce("ComponentProvider","Removing Datastore"),vg.delete(n),r.terminate())}(this),Promise.resolve()}}function Ux(t,e,n,r={}){var s;t=En(t,Yl);const i=Bi(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&(oy(`https://${u}`),ay("Firestore",!0)),o.host!==gb&&o.host!==u&&us("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:r});if(!Bs(c,a)&&(t._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=jt.MOCK_USER;else{d=J6(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new oe(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new jt(m)}t._authCredentials=new KI(new ev(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Js(this.firestore,e,this._query)}}class pt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ia(n,pt._jsonSchema))return new pt(e,r||null,new be(nt.fromString(n.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:vt("string",pt._jsonSchemaVersion),referencePath:vt("string")};class rs extends Js{constructor(e,n,r){super(e,n,ch(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new be(e))}withConverter(e){return new rs(this.firestore,e,this._path)}}function Nn(t,e,...n){if(t=dt(t),nv("collection","path",e),t instanceof Yl){const r=nt.fromString(e,...n);return Nm(r),new rs(t,null,r)}{if(!(t instanceof pt||t instanceof rs))throw new oe(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(nt.fromString(e,...n));return Nm(r),new rs(t.firestore,null,r)}}function _n(t,e,...n){if(t=dt(t),arguments.length===1&&(e=sh.newId()),nv("doc","path",e),t instanceof Yl){const r=nt.fromString(e,...n);return Om(r),new pt(t,null,new be(r))}{if(!(t instanceof pt||t instanceof rs))throw new oe(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(nt.fromString(e,...n));return Om(r),new pt(t.firestore,t instanceof rs?t.converter:null,new be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="AsyncQueue";class Ag{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Wv(this,"async_queue_retry"),this.oc=()=>{const r=Kc();r&&ce(wg,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Kc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Kc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new mr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Gi(e))throw e;ce(wg,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,br("INTERNAL UNHANDLED ERROR: ",Tg(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Ah.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&Ie(47125,{hc:Tg(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Tg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class As extends Yl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Ag,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ag(e),this._firestoreClient=void 0,await e}}}function pi(t,e){const n=typeof t=="object"?t:dy(),r=typeof t=="string"?t:Zu,s=zf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Q6("firestore");i&&Ux(s,...i)}return s}function Ql(t){if(t._terminated)throw new oe(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Bx(t),t._firestoreClient}function Bx(t){var e,n,r;const s=t._freezeSettings(),i=function(a,u,c,d){return new hS(a,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,mb(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new Fx(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yn(Vt.fromBase64String(e))}catch(n){throw new oe(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yn(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ia(e,yn._jsonSchema))return yn.fromBase64String(e.bytes)}}yn._jsonSchemaVersion="firestore/bytes/1.0",yn._jsonSchema={type:vt("string",yn._jsonSchemaVersion),bytes:vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gn._jsonSchemaVersion}}static fromJSON(e){if(Ia(e,Gn._jsonSchema))return new Gn(e.latitude,e.longitude)}}Gn._jsonSchemaVersion="firestore/geoPoint/1.0",Gn._jsonSchema={type:vt("string",Gn._jsonSchemaVersion),latitude:vt("number"),longitude:vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Wn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ia(e,Wn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Wn(e.vectorValues);throw new oe(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wn._jsonSchemaVersion="firestore/vectorValue/1.0",Wn._jsonSchema={type:vt("string",Wn._jsonSchemaVersion),vectorValues:vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=/^__.*__$/;class qx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ws(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sa(e,this.data,n,this.fieldTransforms)}}class _b{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ws(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function yb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ec:t})}}class kh{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new kh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return ul(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(yb(this.Ec)&&jx.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class zx{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gl(e)}Dc(e,n,r,s=!1){return new kh({Ec:e,methodName:n,bc:r,path:Ft.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pa(t){const e=t._freezeSettings(),n=Gl(t._databaseId);return new zx(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Dh(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);Ph("Data must be an object, but it was:",o,r);const a=Eb(r,o);let u,c;if(i.merge)u=new ln(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const m=Xd(e,h,n);if(!o.contains(m))throw new oe(z.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Ab(d,m)||d.push(m)}u=new ln(d),c=o.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=o.fieldTransforms;return new qx(new en(a),u,c)}class Xl extends xh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xl}}function vb(t,e,n,r){const s=t.Dc(1,e,n);Ph("Data must be an object, but it was:",s,r);const i=[],o=en.empty();Es(r,(u,c)=>{const d=Rh(e,u,n);c=dt(c);const h=s.gc(d);if(c instanceof Xl)i.push(d);else{const m=Ra(c,h);m!=null&&(i.push(d),o.set(d,m))}});const a=new ln(i);return new _b(o,a,s.fieldTransforms)}function bb(t,e,n,r,s,i){const o=t.Dc(1,e,n),a=[Xd(e,r,n)],u=[s];if(i.length%2!=0)throw new oe(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(Xd(e,i[m])),u.push(i[m+1]);const c=[],d=en.empty();for(let m=a.length-1;m>=0;--m)if(!Ab(c,a[m])){const g=a[m];let v=u[m];v=dt(v);const E=o.gc(g);if(v instanceof Xl)c.push(g);else{const A=Ra(v,E);A!=null&&(c.push(g),d.set(g,A))}}const h=new ln(c);return new _b(d,h,o.fieldTransforms)}function Hx(t,e,n,r=!1){return Ra(n,t.Dc(r?4:3,e))}function Ra(t,e){if(wb(t=dt(t)))return Ph("Unsupported field value:",e,t),Eb(t,e);if(t instanceof xh)return function(r,s){if(!yb(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let u=Ra(a,s.yc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ne.fromDate(r);return{timestampValue:sl(s.serializer,i)}}if(r instanceof Ne){const i=new Ne(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sl(s.serializer,i)}}if(r instanceof Gn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yn)return{bytesValue:Vv(s.serializer,r._byteString)};if(r instanceof pt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ph(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Wn)return function(o,a){return{mapValue:{fields:{[dv]:{stringValue:fv},[el]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.wc("VectorValues must only contain numeric values.");return dh(a.serializer,c)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${Vl(r)}`)}(t,e)}function Eb(t,e){const n={};return iv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(t,(r,s)=>{const i=Ra(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function wb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof Gn||t instanceof yn||t instanceof pt||t instanceof xh||t instanceof Wn)}function Ph(t,e,n){if(!wb(n)||!rv(n)){const r=Vl(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Xd(t,e,n){if((e=dt(e))instanceof Da)return e._internalPath;if(typeof e=="string")return Rh(t,e);throw ul("Field path arguments must be of type string or ",t,!1,void 0,n)}const Gx=new RegExp("[~\\*/\\[\\]]");function Rh(t,e,n){if(e.search(Gx)>=0)throw ul(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Da(...e.split("."))._internalPath}catch{throw ul(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ul(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new oe(z.INVALID_ARGUMENT,a+t+u)}function Ab(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Wx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Wx extends Tb{data(){return super.data()}}function Jl(t,e){return typeof e=="string"?Rh(t,e):e instanceof Da?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Oh{}class Ib extends Oh{}function ii(t,e,...n){let r=[];e instanceof Oh&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Nh).length,a=i.filter(u=>u instanceof Zl).length;if(o>1||o>0&&a>0)throw new oe(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Zl extends Ib{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Zl(e,n,r)}_apply(e){const n=this._parse(e);return Sb(e._query,n),new Js(e.firestore,e.converter,Ud(e._query,n))}_parse(e){const n=Pa(e.firestore);return function(i,o,a,u,c,d,h){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new oe(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Sg(h,d);const v=[];for(const E of h)v.push(Ig(u,i,E));m={arrayValue:{values:v}}}else m=Ig(u,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Sg(h,d),m=Hx(a,o,h,d==="in"||d==="not-in");return yt.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function mo(t,e,n){const r=e,s=Jl("where",t);return Zl._create(s,r,n)}class Nh extends Oh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Nh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:kn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const u of a)Sb(o,u),o=Ud(o,u)}(e._query,n),new Js(e.firestore,e.converter,Ud(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fh extends Ib{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fh(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new oe(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new oe(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ia(i,o)}(e._query,this._field,this._direction);return new Js(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Wi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function du(t,e="asc"){const n=e,r=Jl("orderBy",t);return Fh._create(r,n)}function Ig(t,e,n){if(typeof(n=dt(n))=="string"){if(n==="")throw new oe(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bv(e)&&n.indexOf("/")!==-1)throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(nt.fromString(n));if(!be.isDocumentKey(r))throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jm(t,new be(r))}if(n instanceof pt)return jm(t,n._key);throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vl(n)}.`)}function Sg(t,e){if(!Array.isArray(t)||t.length===0)throw new oe(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Sb(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new oe(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Yx{convertValue(e,n="none"){switch(fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Es(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[el].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ht(o.doubleValue));return new Wn(i)}convertGeoPoint(e){return new Gn(ht(e.latitude),ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=$l(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(na(e));default:return null}}convertTimestamp(e){const n=cs(e);return new Ne(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=nt.fromString(e);Ye(jv(r),9688,{name:e});const s=new ra(r.get(1),r.get(3)),i=new be(r.popFirst(5));return s.isEqual(n)||br(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class wo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Us extends Tb{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Pu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Jl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Us._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Us._jsonSchemaVersion="firestore/documentSnapshot/1.0",Us._jsonSchema={type:vt("string",Us._jsonSchemaVersion),bundleSource:vt("string","DocumentSnapshot"),bundleName:vt("string"),bundle:vt("string")};class Pu extends Us{data(e={}){return super.data(e)}}class Ai{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new wo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Pu(this._firestore,this._userDataWriter,r.key,r,new wo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const u=new Pu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new wo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const u=new Pu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new wo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:Qx(a.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ai._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Qx(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(t){t=En(t,pt);const e=En(t.firestore,As);return Lx(Ql(e),t._key).then(n=>Jx(e,t,n))}Ai._jsonSchemaVersion="firestore/querySnapshot/1.0",Ai._jsonSchema={type:vt("string",Ai._jsonSchemaVersion),bundleSource:vt("string","QuerySnapshot"),bundleName:vt("string"),bundle:vt("string")};class Cb extends Yx{constructor(e){super(),this.firestore=e}convertBytes(e){return new yn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}function oi(t){t=En(t,Js);const e=En(t.firestore,As),n=Ql(e),r=new Cb(e);return Kx(t._query),$x(n,t._query).then(s=>new Ai(e,r,t,s))}function Xx(t,e,n){t=En(t,pt);const r=En(t.firestore,As),s=Vh(t.converter,e,n);return Oa(r,[Dh(Pa(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Xt.none())])}function fu(t,e,n,...r){t=En(t,pt);const s=En(t.firestore,As),i=Pa(s);let o;return o=typeof(e=dt(e))=="string"||e instanceof Da?bb(i,"updateDoc",t._key,e,n,r):vb(i,"updateDoc",t._key,e),Oa(s,[o.toMutation(t._key,Xt.exists(!0))])}function Cg(t){return Oa(En(t.firestore,As),[new zl(t._key,Xt.none())])}function hu(t,e){const n=En(t.firestore,As),r=_n(t),s=Vh(t.converter,e);return Oa(n,[Dh(Pa(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Xt.exists(!1))]).then(()=>r)}function Oa(t,e){return function(r,s){const i=new mr;return r.asyncQueue.enqueueAndForget(async()=>Sx(await Mx(r),s,i)),i.promise}(Ql(t),e)}function Jx(t,e,n){const r=n.docs.get(e._key),s=new Cb(t);return new Us(t,s,e._key,r,new wo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Pa(e)}set(e,n,r){this._verifyNotCommitted();const s=Qc(e,this._firestore),i=Vh(s.converter,n,r),o=Dh(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Xt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Qc(e,this._firestore);let o;return o=typeof(n=dt(n))=="string"||n instanceof Da?bb(this._dataReader,"WriteBatch.update",i._key,n,r,s):vb(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Xt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Qc(e,this._firestore);return this._mutations=this._mutations.concat(new zl(n._key,Xt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qc(t,e){if((t=dt(t)).firestore!==e)throw new oe(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(t){return Ql(t=En(t,As)),new Zx(t,e=>Oa(t,e))}(function(e,n=!0){(function(s){zi=s})(ji),Di(new js("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new As(new YI(r.getProvider("auth-internal")),new JI(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new oe(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ra(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),ts(xm,km,e),ts(xm,km,"esm2017")})();const wn=Z_("auth",{state:()=>({user:null,userProfile:null,isAuthReady:!1,authInstance:null,loading:!1,error:null,successMessage:null,isProfileLoading:!1}),getters:{isProfileComplete:t=>!!t.userProfile?.role&&!!t.userProfile?.birthDate,role:t=>t.userProfile?.role},actions:{initAuth(t){t&&(this.authInstance=t,Fy(this.authInstance,async e=>{if(e){this.user=e,this.isProfileLoading=!0;try{const n=pi(),s=_n(n,"artifacts","1:27717321225:web:19367fffd750339ea3aed8","users",e.uid),i=await Jd(s);i.exists()?this.userProfile=i.data():this.userProfile=null}catch(n){console.error("Failed to fetch user profile:",n),this.userProfile=null}finally{this.isProfileLoading=!1}}else this.user=null,this.userProfile=null;this.isAuthReady=!0}))},setUserProfile(t){this.userProfile=t},async logout(){await N4(this.authInstance)},async signupWithEmail(t,e,n){this.loading=!0,this.error=null,this.successMessage=null;try{const r=await x4(this.authInstance,e,n);return await P4(r.user,{displayName:t}),this.user=r.user,this.successMessage="Account created successfully!",!0}catch(r){return this.error=r.message,!1}finally{this.loading=!1}},async signInWithEmail(t,e){this.loading=!0,this.error=null,this.successMessage=null;try{const n=await k4(this.authInstance,t,e);return this.user=n.user,!0}catch(n){return this.error=n.message,!1}finally{this.loading=!1}},async signInWithGoogle(){this.loading=!0,this.error=null,this.successMessage=null;try{const t=new lr,e=await eI(this.authInstance,t);return this.user=e.user,!0}catch(t){return this.error=t.message,!1}finally{this.loading=!1}},async sendPasswordReset(t){this.loading=!0,this.error=null,this.successMessage=null;try{return await S4(this.authInstance,t),this.successMessage="Password reset link sent to your email!",!0}catch(e){return this.error=e.message,!1}finally{this.loading=!1}},async confirmPasswordReset(t,e){this.loading=!0,this.error=null,this.successMessage=null;try{return await C4(this.authInstance,t,e),this.successMessage="Your password has been reset successfully! You can now sign in with your new password.",!0}catch(n){return this.error=n.message,!1}finally{this.loading=!1}}}}),Yi=Z_("database",{state:()=>({loading:!1,error:null}),actions:{_getDBEssentials(){const t=wn();if(!t.user?.uid)return this.error="User not authenticated. Operation cancelled.",null;const e=pi(),n="1:27717321225:web:19367fffd750339ea3aed8",r=t.user.uid;return{db:e,appId:n,userId:r}},async setUserProfile(t,e){console.log(`[DB_STORE] setUserProfile: Updating profile for user ID: ${t}`),this.loading=!0,this.error=null;try{const n=pi(),s=_n(n,"artifacts","1:27717321225:web:19367fffd750339ea3aed8","users",t);return await Xx(s,e,{merge:!0}),console.log(`[DB_STORE] setUserProfile: Successfully updated profile for ${t}.`),!0}catch(n){return this.error=n.message,!1}finally{this.loading=!1}},async fetchUserProfile(t){this.loading=!0,this.error=null;try{const e=this._getDBEssentials();if(!e)return null;const{db:n,appId:r}=e,s=_n(n,"artifacts",r,"users",t),i=await Jd(s);return i.exists()?{id:i.id,...i.data()}:null}catch(e){return this.error=e.message,null}finally{this.loading=!1}},async addNewPatient(t){this.loading=!0,this.error=null;const e=this._getDBEssentials();if(!e)return null;try{const{db:n,appId:r,userId:s}=e,i=Nn(n,"artifacts",r,"patients"),o={...t,creatorId:s,createdAt:Ne.now(),updatedAt:Ne.now()};return(await hu(i,o)).id}catch(n){return this.error=n.message,null}finally{this.loading=!1}},async updatePatientProfile(t,e){this.loading=!0,this.error=null;const n=this._getDBEssentials();if(!n)return!1;try{const{db:r,appId:s}=n,i=_n(r,"artifacts",s,"patients",t);return await fu(i,{...e,updatedAt:Ne.now()}),!0}catch(r){return this.error=r.message,!1}finally{this.loading=!1}},async fetchPatientsForDoctor(){this.loading=!0,this.error=null;const t=this._getDBEssentials();if(!t)return[];try{const{db:e,appId:n,userId:r}=t,s=Nn(e,"artifacts",n,"patients"),i=ii(s,mo("creatorId","==",r),du("createdAt","desc"));return(await oi(i)).docs.map(a=>({id:a.id,...a.data()}))}catch(e){return this.error=e.message,[]}finally{this.loading=!1}},async deletePatientProfile(t){this.loading=!0,this.error=null;const e=this._getDBEssentials();if(!e)return!1;try{const{db:n,appId:r}=e,s=e5(n),i=_n(n,"artifacts",r,"patients",t);s.delete(i);const o=Nn(n,"artifacts",r,"scans"),a=ii(o,mo("patientId","==",t));return(await oi(a)).forEach(c=>s.delete(c.ref)),await s.commit(),!0}catch(n){return this.error=n.message,!1}finally{this.loading=!1}},async createScan(t){this.loading=!0,this.error=null;const e=this._getDBEssentials();if(!e)return null;try{const{db:n,appId:r,userId:s}=e,i=Nn(n,"artifacts",r,"scans"),o={...t};delete o.id;let a;const u=o.scanDate;if(u instanceof Ne)a=u;else if(u instanceof Date&&!isNaN(u.getTime()))a=Ne.fromDate(u);else if(typeof u=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(u)){const h=u.split("-"),m=new Date(Date.UTC(h[0],parseInt(h[1],10)-1,h[2],12,0,0));if(isNaN(m.getTime()))throw new RangeError("Provided scanDate string resulted in an invalid Date.");a=Ne.fromDate(m)}else throw console.error("Invalid scanDate received by createScan:",u),new RangeError('Invalid or unsupported type for scanDate. Must be a Timestamp, Date, or "YYYY-MM-DD" string.');const c={...o,scanDate:a,creatorId:s,isPersonalScan:o.patientId===s,createdAt:Ne.now()};if(!c.patientId)throw new Error("Cannot create a scan without a patientId.");return(await hu(i,c)).id}catch(n){return console.error("[DB_STORE] Error details during scan creation:",n),this.error=n.message,null}finally{this.loading=!1}},async updateScan(t,e){this.loading=!0,this.error=null;const n=this._getDBEssentials();if(!n)return!1;try{const{db:r,appId:s}=n,i=_n(r,"artifacts",s,"scans",t),o={...e,updatedAt:Ne.now()};return await fu(i,o),!0}catch(r){return this.error=r.message,!1}finally{this.loading=!1}},async deleteScan(t){this.loading=!0,this.error=null;const e=this._getDBEssentials();if(!e)return!1;try{const{db:n,appId:r}=e,s=_n(n,"artifacts",r,"scans",t);return await Cg(s),!0}catch(n){return this.error=n.message,!1}finally{this.loading=!1}},async fetchScansForPatient(t){this.loading=!0,this.error=null;const e=this._getDBEssentials();if(!e)return[];try{const{db:n,appId:r}=e,s=Nn(n,"artifacts",r,"scans"),i=ii(s,mo("patientId","==",t),du("scanDate","desc"));return(await oi(i)).docs.map(a=>({id:a.id,...a.data()}))}catch(n){return console.error("Error in fetchScansForPatient. Is the Firestore index for 'scans' (patientId asc, scanDate desc) created?",n),this.error=n.message,[]}finally{this.loading=!1}},async fetchDoctorCreatedScans(){this.loading=!0,this.error=null;const t=this._getDBEssentials();if(!t)return[];try{const{db:e,appId:n,userId:r}=t,s=Nn(e,"artifacts",n,"scans"),i=ii(s,mo("creatorId","==",r),du("scanDate","desc"));return(await oi(i)).docs.map(a=>({id:a.id,...a.data()}))}catch(e){return this.error=e.message,[]}finally{this.loading=!1}},async addPregnancyDeclaration(t){this.loading=!0,this.error=null;const e=this._getDBEssentials();if(!e)return null;try{const{db:n,appId:r,userId:s}=e,i=Nn(n,"artifacts",r,"users",s,"pregnancies"),o={...t,status:"active",endDate:null,createdAt:Ne.now()};return(await hu(i,o)).id}catch(n){return this.error=n.message,null}finally{this.loading=!1}},async fetchPregnancyHistory(){this.loading=!0,this.error=null;const t=this._getDBEssentials();if(!t)return[];try{const{db:e,appId:n,userId:r}=t,s=Nn(e,"artifacts",n,"users",r,"pregnancies"),i=ii(s,du("declarationDate","desc"));return(await oi(i)).docs.map(a=>({id:a.id,...a.data()}))}catch(e){return this.error=e.message,[]}finally{this.loading=!1}},async updatePregnancyRecord(t,e){this.loading=!0,this.error=null;const n=this._getDBEssentials();if(!n)return!1;try{const{db:r,appId:s,userId:i}=n,o=_n(r,"artifacts",s,"users",i,"pregnancies",t);return await fu(o,{...e,updatedAt:Ne.now()}),!0}catch(r){return this.error=r.message,!1}finally{this.loading=!1}},async fetchSinglePatient(t){this.loading=!0,this.error=null;try{const e=pi(),r=_n(e,"artifacts","1:27717321225:web:19367fffd750339ea3aed8","patients",t),s=await Jd(r);return s.exists()?{id:s.id,...s.data()}:(this.error=`No patient found with ID: ${t}`,console.warn(`[DB_STORE] No patient found with ID: ${t}`),null)}catch(e){return this.error=e.message,null}finally{this.loading=!1}},async createOtherScan(t){this.loading=!0,this.error=null;const e=this._getDBEssentials();if(!e)return null;try{const{db:n,appId:r,userId:s}=e,i=Nn(n,"artifacts",r,"other_scans"),{id:o,...a}=t,u={...a,userId:s,createdAt:Ne.now()};return console.log("[DB_STORE] Attempting to createOtherScan with cleaned payload:",u),(await hu(i,u)).id}catch(n){return this.error=n.message,console.error("[DB_STORE] Error creating other scan:",n),null}finally{this.loading=!1}},async updateOtherScan(t,e){this.loading=!0,this.error=null;const n=this._getDBEssentials();if(!n)return!1;try{const{db:r,appId:s}=n,i=_n(r,"artifacts",s,"other_scans",t);return await fu(i,{...e,updatedAt:Ne.now()}),!0}catch(r){return this.error=r.message,!1}finally{this.loading=!1}},async deleteOtherScan(t){this.loading=!0,this.error=null;const e=this._getDBEssentials();if(!e)return!1;try{const{db:n,appId:r}=e,s=_n(n,"artifacts",r,"other_scans",t);return await Cg(s),!0}catch(n){return this.error=n.message,!1}finally{this.loading=!1}},async fetchOtherScansForUser(t){this.loading=!0,this.error=null;try{const e=pi(),r=ii(Nn(e,"artifacts","1:27717321225:web:19367fffd750339ea3aed8","other_scans"),mo("userId","==",t)),i=(await oi(r)).docs.map(o=>({id:o.id,...o.data()}));return i.sort((o,a)=>a.date.toDate()-o.date.toDate()),i}catch(e){return this.error=e.message,[]}finally{this.loading=!1}},async fetchAllDosesForUser(t,e){this.loading=!0,this.error=null,console.log(`[DB_STORE] Starting fetchAllDosesForUser for userId: ${t}, role: ${e}`);try{const n=[],r=await this.fetchOtherScansForUser(t);console.log("[DB_STORE] other scans:",JSON.parse(JSON.stringify(r))),r.forEach(i=>{i.dosage>0&&n.push({date:i.date,dose:i.dosage})});const s=await this.fetchScansForPatient(t);if(console.log("[DB_STORE] personal scans:",JSON.parse(JSON.stringify(s))),s.forEach(i=>{i.patientDose>0&&n.push({date:i.scanDate,dose:i.patientDose})}),e==="doctor"){const i=await this.fetchDoctorCreatedScans();console.log("[DB_STORE] created scans (for occupational dose):",JSON.parse(JSON.stringify(i))),i.forEach(o=>{o.doctorDose>0&&n.push({date:o.scanDate,dose:o.doctorDose})})}return n}catch(n){return this.error=`Failed to fetch all doses: ${n.message}`,console.error(`[DB_STORE] Error: ${n.message}`),[]}finally{this.loading=!1}}}}),bt=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},t5=["dir"],n5={key:0,class:"loading-state"},r5={class:"counter-label"},s5={class:"progress-details"},i5={class:"counter-bar-container"},o5={class:"counter-value"},a5={__name:"MsvCounter",props:{currentMsv:{type:Number,default:0},yearlyLimit:{type:Number,default:1},currentLanguage:String,isLoading:{type:Boolean,default:!0}},setup(t){const e=t,n=Ee(()=>e.currentMsv>=e.yearlyLimit?"status-danger":e.yearlyLimit>0?e.currentMsv/e.yearlyLimit*100<50?"status-safe":"status-warning":"status-safe");return(r,s)=>(B(),q("div",{class:is(["msv-counter",n.value]),dir:t.currentLanguage==="en"?"ltr":"rtl"},[t.isLoading?(B(),q("div",n5,b(t.currentLanguage==="en"?"Calculating...":" ..."),1)):(B(),q(Je,{key:1},[f("span",r5,b(t.currentLanguage==="en"?"Annual Dose:":" :"),1),f("div",s5,[f("div",i5,[f("div",{class:"counter-bar",style:bl({width:t.yearlyLimit>0?Math.min(t.currentMsv/t.yearlyLimit*100,100)+"%":"100%"})},null,4)]),f("span",o5,b(t.currentMsv.toFixed(2))+" mSv ",1)])],64))],10,t5))}},u5=bt(a5,[["__scopeId","data-v-401d1770"]]),l5={class:"app-header"},c5={class:"app-header-center"},d5={class:"project-title"},f5={__name:"TheHeader",props:{currentLanguage:String,user:Object,msvData:Object},emits:["toggle-language","toggle-info-modal"],setup(t){return(e,n)=>(B(),q("header",l5,[f("button",{onClick:n[0]||(n[0]=r=>e.$emit("toggle-language")),class:"language-toggle-button"},b(t.currentLanguage==="en"?"":"English"),1),f("div",c5,[f("h1",d5,b(t.currentLanguage==="en"?"mSv Exposure Calculator":"  "),1),t.user?(B(),Dn(u5,{key:0,"current-msv":t.msvData.current,"yearly-limit":t.msvData.limit,"is-loading":t.msvData.isLoading,"current-language":t.currentLanguage},null,8,["current-msv","yearly-limit","is-loading","current-language"])):he("",!0)]),f("button",{onClick:n[1]||(n[1]=r=>e.$emit("toggle-info-modal")),class:"info-button-global"},b(t.currentLanguage==="en"?"Information":""),1)]))}},h5=bt(f5,[["__scopeId","data-v-d06322cd"]]),p5=["dir"],m5={class:"modal-title"},g5={key:0,class:"info-text-content"},_5={key:1,class:"info-text-content"},y5=`
<p>                   (X-rays)    (CT).     " " (mSv)         .</p>
<p>                          . :</p>
<ul>
  <li><strong></strong>              .</li>
  <li><strong>   </strong>               .</li>
  <li><strong> </strong>              .</li>
</ul>
<p><strong>     </strong><br>
       (ICRP)     :</p>
`,v5=`
<p>Radiation exposure is the amount of radiation received by the body when passing through an environment containing ionizing radiation, such as X-rays or CT scans. The radiation dose is measured in "millisieverts" (mSv), a unit that reflects the biological effect of radiation on body tissues.</p>
<p>The danger lies in the fact that ionizing radiation can cause cell damage, increasing the risk of chronic diseases like cancer, especially with repeated or prolonged exposure. Therefore:</p>
<ul>
  <li><strong>Patients</strong> should only be exposed when necessary, and every examination should be recorded and its benefit evaluated against its harm.</li>
  <li><strong>Medical professionals</strong>, such as radiologists and radiology technicians, are chronically exposed, requiring periodic monitoring and adherence to safety procedures.</li>
  <li><strong>Pregnant women</strong> are a special category who should exercise extreme caution when exposed to radiation to avoid affecting the fetus.</li>
</ul>
<p><strong>Annual Permissible Radiation Exposure Limit</strong><br>
According to the recommendations of the International Commission on Radiological Protection (ICRP), these are the recommended limits:</p>
`,b5={__name:"InfoModal",props:{show:Boolean},emits:["close"],setup(t){const e=Me("currentLanguage");return(n,r)=>(B(),Dn(vs,{name:"modal-fade"},{default:Tr(()=>[t.show?(B(),q("div",{key:0,class:"modal-overlay",onClick:r[1]||(r[1]=st(s=>n.$emit("close"),["self"]))},[f("div",{class:"modal-content",dir:y(e)==="ar"?"rtl":"ltr"},[f("button",{class:"close-modal-button",onClick:r[0]||(r[0]=s=>n.$emit("close"))},""),f("h2",m5,b(y(e)==="en"?"Radiation Exposure Awareness":"  "),1),y(e)==="en"?(B(),q("div",g5,[f("div",{innerHTML:v5}),r[2]||(r[2]=f("div",{class:"overflow-x-auto mt-4"},[f("table",{class:"info-table"},[f("thead",null,[f("tr",null,[f("th",null,"Category"),f("th",null,"Annual Permissible Limit"),f("th",null,"Notes")])]),f("tbody",null,[f("tr",null,[f("td",null,"Medical Professionals"),f("td",null,"20 mSv"),f("td",null,"Averaged over 5 years, not exceeding 50 mSv in any single year.")]),f("tr",null,[f("td",null,"Patients"),f("td",null,"No strict limit"),f("td",null,"Exposure should be as low as reasonably achievable (ALARA principle).")]),f("tr",null,[f("td",null,"Pregnant Workers"),f("td",null,"1 mSv to the fetus"),f("td",null,"From the date of knowledge of pregnancy until birth.")]),f("tr",null,[f("td",null,"General Public"),f("td",null,"1 mSv"),f("td",null,"Under normal conditions without medical procedures.")])])])],-1))])):(B(),q("div",_5,[f("div",{innerHTML:y5}),r[3]||(r[3]=f("div",{class:"overflow-x-auto mt-4"},[f("table",{class:"info-table"},[f("thead",null,[f("tr",null,[f("th",null,""),f("th",null,"   "),f("th",null,"")])]),f("tbody",null,[f("tr",null,[f("td",null,"   "),f("td",null,"20   (mSv)"),f("td",null,"   5     50 mSv   .")]),f("tr",null,[f("td",null,""),f("td",null,"   "),f("td",null,"       ALARA.")]),f("tr",null,[f("td",null,"  "),f("td",null,"1     "),f("td",null,"    1 mSv      .")]),f("tr",null,[f("td",null," (  )"),f("td",null,"1  "),f("td",null,"     .")])])])],-1))]))],8,p5)])):he("",!0)]),_:1}))}},E5=bt(b5,[["__scopeId","data-v-5954aac6"]]),w5={id:"app-container"},A5={class:"main-content"},T5={key:1,class:"loading-fullpage"},I5={__name:"App",setup(t){const e=wn(),n=Yi(),r=Ae(localStorage.getItem("language")||"en"),s=Ae(0),i=Ae(20),o=Ae(!1),a=h=>{r.value=h,localStorage.setItem("language",h),document.documentElement.lang=h,document.documentElement.dir=h==="ar"?"rtl":"ltr"},u=()=>{a(r.value==="en"?"ar":"en")},c=()=>{console.log("Before showInfoModal:",o.value),o.value=!0,console.log("After showInfoModal:",o.value)},d=async()=>{if(console.log("Calculating the msv..."),!e.user?.uid||!e.role){s.value=0;return}const h=await n.fetchAllDosesForUser(e.user.uid,e.role);if(console.log("All doses:",JSON.parse(JSON.stringify(h))),h){const m=new Date(new Date().getFullYear(),0,1),g=E=>E?E.toDate?E.toDate():new Date(E):null,v=h.filter(E=>{const A=g(E.date);return A&&A>=m}).reduce((E,A)=>E+(A.dose||0),0);s.value=parseFloat(v.toFixed(3))}console.log("Finished Calculation")};return ur("currentLanguage",r),ur("currentMsv",s),ur("doseLimit",i),ur("triggerMsvRecalculation",d),ur("showInfoModal",o),Ze(()=>e.userProfile,h=>{e.user&&h?d():e.user||(s.value=0)},{deep:!0,immediate:!0}),a(r.value),(h,m)=>(B(),q("div",w5,[ke(h5,{"current-language":r.value,user:y(e).user,"msv-data":{current:s.value,limit:i.value,isLoading:y(n).loading},onToggleLanguage:u,onToggleInfoModal:c},null,8,["current-language","user","msv-data"]),ke(E5,{show:o.value,onClose:m[0]||(m[0]=g=>o.value=!1)},null,8,["show"]),f("main",A5,[y(e).isAuthReady?(B(),Dn(y(W_),{key:0})):(B(),q("div",T5,m[1]||(m[1]=[f("span",null,"Loading Application...",-1)])))])]))}},S5={class:"signup-page"},C5={class:"signup-main-content"},x5={class:"signup-card"},k5=["dir"],D5=["dir"],P5={class:"form-group"},R5=["dir"],O5=["placeholder","dir"],N5={class:"form-group"},F5=["dir"],V5=["placeholder","dir"],M5={class:"form-group"},L5=["dir"],$5=["placeholder","dir"],U5=["disabled"],B5={key:0},j5={key:1},q5=["dir"],z5=["dir"],H5=["disabled"],G5=["dir"],W5=["dir"],K5={__name:"SignupView",setup(t){const e=bs(),n=wn(),r=Me("currentLanguage"),s=Ae(""),i=Ae(""),o=Ae(""),a=async()=>{if(i.value!==o.value){n.error=r.value==="en"?"Passwords do not match.":"   .";return}await n.signupWithEmail("",s.value,i.value)},u=async()=>{await n.signInWithGoogle()},c=()=>{e.push("/signin")},d=()=>{e.push("/recommend/guest")};return(h,m)=>(B(),q("div",S5,[f("main",C5,[f("section",x5,[f("h2",{dir:y(r)==="ar"?"rtl":"ltr"},b(y(r)==="en"?"Welcome! Please Sign Up":" !  "),9,k5),f("p",{dir:y(r)==="ar"?"rtl":"ltr"},b(y(r)==="en"?"Create your account to get started.":"  ."),9,D5),f("form",{onSubmit:st(a,["prevent"]),class:"signup-form"},[f("div",P5,[f("label",{for:"email",dir:y(r)==="ar"?"rtl":"ltr"},b(y(r)==="en"?"Email Address":"  "),9,R5),J(f("input",{type:"email",id:"email","onUpdate:modelValue":m[0]||(m[0]=g=>s.value=g),placeholder:y(r)==="en"?"Enter your email":"  ",dir:y(r)==="ar"?"rtl":"ltr",required:""},null,8,O5),[[me,s.value]])]),f("div",N5,[f("label",{for:"password",dir:y(r)==="ar"?"rtl":"ltr"},b(y(r)==="en"?"Password":" "),9,F5),J(f("input",{type:"password",id:"password","onUpdate:modelValue":m[1]||(m[1]=g=>i.value=g),placeholder:y(r)==="en"?"Enter your password":"  ",dir:y(r)==="ar"?"rtl":"ltr",required:"",minlength:"6"},null,8,V5),[[me,i.value]])]),f("div",M5,[f("label",{for:"confirmPassword",dir:y(r)==="ar"?"rtl":"ltr"},b(y(r)==="en"?"Confirm Password":"  "),9,L5),J(f("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":m[2]||(m[2]=g=>o.value=g),placeholder:y(r)==="en"?"Confirm your password":"  ",dir:y(r)==="ar"?"rtl":"ltr",required:"",minlength:"6"},null,8,$5),[[me,o.value]])]),f("button",{class:"action-button primary",type:"submit",disabled:y(n).loading},[y(n).loading?(B(),q("span",B5,b(y(r)==="en"?"Signing Up...":" ..."),1)):(B(),q("span",j5,b(y(r)==="en"?"Create Account":" "),1))],8,U5)],32),y(n).error?(B(),q("div",{key:0,class:"message error-message",dir:y(r)==="ar"?"rtl":"ltr"},b(y(n).error),9,q5)):he("",!0),f("div",{class:"divider",dir:y(r)==="ar"?"rtl":"ltr"},[f("span",null,b(y(r)==="en"?"OR":""),1)],8,z5),f("button",{onClick:u,class:"action-button google-button",disabled:y(n).loading},[m[3]||(m[3]=k_('<svg class="google-icon" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-68fe96a2><path d="M44.5 20H24V28.5H35.5C34.75 31.85 32.5 34.5 29.5 36.5L24 41.5L24 48H32.5C39.5 48 44.5 43.5 44.5 36.5C44.5 35.5 44.3 34.5 44.1 33.5L44.5 20Z" fill="#4285F4" data-v-68fe96a2></path><path d="M24 44.5C29.5 44.5 34.25 42.5 37.75 39.25L29.5 36.5C27.25 37.75 24 38.5 24 38.5C18.5 38.5 13.75 34.25 11.75 28.5L6.25 33.5C8.75 38.75 15.5 44.5 24 44.5Z" fill="#34A853" data-v-68fe96a2></path><path d="M11.75 28.5C11.25 27.25 11 25.75 11 24C11 22.25 11.25 20.75 11.75 19.5L17.25 14.5C16 17.25 15.25 20.5 15.25 24C15.25 27.5 16 30.75 17.25 33.5L11.75 28.5Z" fill="#FBBC05" data-v-68fe96a2></path><path d="M24 9.5C26.75 9.5 29.25 10.5 31.25 12.25L36.5 7C32.5 3 27.25 0 24 0C15.5 0 8.75 5.75 6.25 11L11.75 16C13.75 10.25 18.5 6 24 6C24 6 24 9.5 24 9.5Z" fill="#EA4335" data-v-68fe96a2></path></svg>',1)),f("span",null,b(y(r)==="en"?"Sign Up with Google":"  "),1)],8,H5),f("button",{class:"action-button guest-button",onClick:d,dir:y(r)==="ar"?"rtl":"ltr"},b(y(r)==="en"?"Get Recommendation as Guest":"   "),9,G5),f("p",{class:"switch-link-container",dir:y(r)==="ar"?"rtl":"ltr"},[lt(b(y(r)==="en"?"Already have an account?":"   ")+" ",1),f("a",{href:"#",onClick:st(c,["prevent"])},b(y(r)==="en"?"Sign In":" "),1)],8,W5)])])]))}},Y5=bt(K5,[["__scopeId","data-v-68fe96a2"]]),Q5={class:"login-page"},X5={class:"login-main-content"},J5={class:"login-card"},Z5=["dir"],ek=["dir"],tk={class:"form-group"},nk=["dir"],rk=["placeholder","dir"],sk={class:"form-group"},ik=["dir"],ok=["placeholder","dir"],ak=["dir"],uk=["disabled"],lk={key:0},ck={key:1},dk=["dir"],fk=["dir"],hk=["dir"],pk=["disabled"],mk=["dir"],gk=["dir"],_k={__name:"SigninView",setup(t){const e=bs(),n=wn(),r=Me("currentLanguage"),s=Ae(""),i=Ae(""),o=async()=>{await n.signInWithEmail(s.value,i.value)},a=async()=>{await n.signInWithGoogle()},u=()=>{e.push("/")},c=()=>{e.push("/resetpassword")},d=()=>{e.push("/recommend/guest")};return(h,m)=>(B(),q("div",Q5,[f("main",X5,[f("section",J5,[f("h2",{dir:y(r)==="ar"?"rtl":"ltr"},b(y(r)==="en"?"Welcome Back! Please Sign In":" !   "),9,Z5),f("p",{dir:y(r)==="ar"?"rtl":"ltr"},b(y(r)==="en"?"Sign in to access your dashboard.":"       ."),9,ek),f("form",{onSubmit:st(o,["prevent"]),class:"login-form"},[f("div",tk,[f("label",{for:"email",dir:y(r)==="ar"?"rtl":"ltr"},b(y(r)==="en"?"Email Address":"  "),9,nk),J(f("input",{type:"email",id:"email","onUpdate:modelValue":m[0]||(m[0]=g=>s.value=g),placeholder:y(r)==="en"?"Enter your email":"  ",dir:y(r)==="ar"?"rtl":"ltr",required:""},null,8,rk),[[me,s.value]])]),f("div",sk,[f("label",{for:"password",dir:y(r)==="ar"?"rtl":"ltr"},b(y(r)==="en"?"Password":" "),9,ik),J(f("input",{type:"password",id:"password","onUpdate:modelValue":m[1]||(m[1]=g=>i.value=g),placeholder:y(r)==="en"?"Enter your password":"  ",dir:y(r)==="ar"?"rtl":"ltr",required:"",minlength:"6"},null,8,ok),[[me,i.value]]),f("p",{class:"forgot-password-link",dir:y(r)==="ar"?"rtl":"ltr"},[f("a",{href:"#",onClick:st(c,["prevent"])},b(y(r)==="en"?"Forgot your password?":"   "),1)],8,ak)]),f("button",{class:"action-button primary",type:"submit",disabled:y(n).loading},[y(n).loading?(B(),q("span",lk,b(y(r)==="en"?"Signing In...":"  ..."),1)):(B(),q("span",ck,b(y(r)==="en"?"Sign in":" "),1))],8,uk)],32),y(n).error?(B(),q("div",{key:0,class:"message error-message",dir:y(r)==="ar"?"rtl":"ltr"},b(y(n).error),9,dk)):he("",!0),y(n).successMessage?(B(),q("div",{key:1,class:"message success-message",dir:y(r)==="ar"?"rtl":"ltr"},b(y(n).successMessage),9,fk)):he("",!0),f("div",{class:"divider",dir:y(r)==="ar"?"rtl":"ltr"},[f("span",null,b(y(r)==="en"?"OR":""),1)],8,hk),f("button",{onClick:a,class:"action-button google-button",disabled:y(n).loading},[m[2]||(m[2]=k_('<svg class="google-icon" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-a273c7d9><path d="M44.5 20H24V28.5H35.5C34.75 31.85 32.5 34.5 29.5 36.5L24 41.5L24 48H32.5C39.5 48 44.5 43.5 44.5 36.5C44.5 35.5 44.3 34.5 44.1 33.5L44.5 20Z" fill="#4285F4" data-v-a273c7d9></path><path d="M24 44.5C29.5 44.5 34.25 42.5 37.75 39.25L29.5 36.5C27.25 37.75 24 38.5 24 38.5C18.5 38.5 13.75 34.25 11.75 28.5L6.25 33.5C8.75 38.75 15.5 44.5 24 44.5Z" fill="#34A853" data-v-a273c7d9></path><path d="M11.75 28.5C11.25 27.25 11 25.75 11 24C11 22.25 11.25 20.75 11.75 19.5L17.25 14.5C16 17.25 15.25 20.5 15.25 24C15.25 27.5 16 30.75 17.25 33.5L11.75 28.5Z" fill="#FBBC05" data-v-a273c7d9></path><path d="M24 9.5C26.75 9.5 29.25 10.5 31.25 12.25L36.5 7C32.5 3 27.25 0 24 0C15.5 0 8.75 5.75 6.25 11L11.75 16C13.75 10.25 18.5 6 24 6C24 6 24 9.5 24 9.5Z" fill="#EA4335" data-v-a273c7d9></path></svg>',1)),f("span",null,b(y(r)==="en"?"Sign in with Google":"   "),1)],8,pk),f("button",{class:"action-button guest-button",onClick:d,dir:y(r)==="ar"?"rtl":"ltr"},b(y(r)==="en"?"Get Recommendation as Guest":"   "),9,mk),f("p",{class:"switch-link-container",dir:y(r)==="ar"?"rtl":"ltr"},[lt(b(y(r)==="en"?"Don't have an account?":"  ")+" ",1),f("a",{href:"#",onClick:st(u,["prevent"])},b(y(r)==="en"?"Sign Up":""),1)],8,gk)])])]))}},yk=bt(_k,[["__scopeId","data-v-a273c7d9"]]),xg={};function vk(t){let e=xg[t];if(e)return e;e=xg[t]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);e.push(r)}for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return e}function Mi(t,e){typeof e!="string"&&(e=Mi.defaultChars);const n=vk(e);return t.replace(/(%[a-f0-9]{2})+/gi,function(r){let s="";for(let i=0,o=r.length;i<o;i+=3){const a=parseInt(r.slice(i+1,i+3),16);if(a<128){s+=n[a];continue}if((a&224)===192&&i+3<o){const u=parseInt(r.slice(i+4,i+6),16);if((u&192)===128){const c=a<<6&1984|u&63;c<128?s+="":s+=String.fromCharCode(c),i+=3;continue}}if((a&240)===224&&i+6<o){const u=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16);if((u&192)===128&&(c&192)===128){const d=a<<12&61440|u<<6&4032|c&63;d<2048||d>=55296&&d<=57343?s+="":s+=String.fromCharCode(d),i+=6;continue}}if((a&248)===240&&i+9<o){const u=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16),d=parseInt(r.slice(i+10,i+12),16);if((u&192)===128&&(c&192)===128&&(d&192)===128){let h=a<<18&1835008|u<<12&258048|c<<6&4032|d&63;h<65536||h>1114111?s+="":(h-=65536,s+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}s+=""}return s})}Mi.defaultChars=";/?:@&=+$,#";Mi.componentChars="";const kg={};function bk(t){let e=kg[t];if(e)return e;e=kg[t]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?e.push(r):e.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<t.length;n++)e[t.charCodeAt(n)]=t[n];return e}function Na(t,e,n){typeof e!="string"&&(n=e,e=Na.defaultChars),typeof n>"u"&&(n=!0);const r=bk(e);let s="";for(let i=0,o=t.length;i<o;i++){const a=t.charCodeAt(i);if(n&&a===37&&i+2<o&&/^[0-9a-f]{2}$/i.test(t.slice(i+1,i+3))){s+=t.slice(i,i+3),i+=2;continue}if(a<128){s+=r[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&i+1<o){const u=t.charCodeAt(i+1);if(u>=56320&&u<=57343){s+=encodeURIComponent(t[i]+t[i+1]),i++;continue}}s+="%EF%BF%BD";continue}s+=encodeURIComponent(t[i])}return s}Na.defaultChars=";/?:@&=+$,-_.!~*'()#";Na.componentChars="-_.!~*'()";function Mh(t){let e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e}function ll(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const Ek=/^([a-z0-9.+-]+:)/i,wk=/:[0-9]*$/,Ak=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Tk=["<",">",'"',"`"," ","\r",`
`,"	"],Ik=["{","}","|","\\","^","`"].concat(Tk),Sk=["'"].concat(Ik),Dg=["%","/","?",";","#"].concat(Sk),Pg=["/","?","#"],Ck=255,Rg=/^[+a-z0-9A-Z_-]{0,63}$/,xk=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Og={javascript:!0,"javascript:":!0},Ng={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Lh(t,e){if(t&&t instanceof ll)return t;const n=new ll;return n.parse(t,e),n}ll.prototype.parse=function(t,e){let n,r,s,i=t;if(i=i.trim(),!e&&t.split("#").length===1){const c=Ak.exec(i);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let o=Ek.exec(i);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,i=i.substr(o.length)),(e||o||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(s=i.substr(0,2)==="//",s&&!(o&&Og[o])&&(i=i.substr(2),this.slashes=!0)),!Og[o]&&(s||o&&!Ng[o])){let c=-1;for(let v=0;v<Pg.length;v++)r=i.indexOf(Pg[v]),r!==-1&&(c===-1||r<c)&&(c=r);let d,h;c===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",c),h!==-1&&(d=i.slice(0,h),i=i.slice(h+1),this.auth=d),c=-1;for(let v=0;v<Dg.length;v++)r=i.indexOf(Dg[v]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=i.length),i[c-1]===":"&&c--;const m=i.slice(0,c);i=i.slice(c),this.parseHost(m),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const v=this.hostname.split(/\./);for(let E=0,A=v.length;E<A;E++){const C=v[E];if(C&&!C.match(Rg)){let R="";for(let F=0,V=C.length;F<V;F++)C.charCodeAt(F)>127?R+="x":R+=C[F];if(!R.match(Rg)){const F=v.slice(0,E),V=v.slice(E+1),U=C.match(xk);U&&(F.push(U[1]),V.unshift(U[2])),V.length&&(i=V.join(".")+i),this.hostname=F.join(".");break}}}}this.hostname.length>Ck&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=i.indexOf("#");a!==-1&&(this.hash=i.substr(a),i=i.slice(0,a));const u=i.indexOf("?");return u!==-1&&(this.search=i.substr(u),i=i.slice(0,u)),i&&(this.pathname=i),Ng[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};ll.prototype.parseHost=function(t){let e=wk.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const kk=Object.freeze(Object.defineProperty({__proto__:null,decode:Mi,encode:Na,format:Mh,parse:Lh},Symbol.toStringTag,{value:"Module"})),xb=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,kb=/[\0-\x1F\x7F-\x9F]/,Dk=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,$h=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,Db=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Pb=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Pk=Object.freeze(Object.defineProperty({__proto__:null,Any:xb,Cc:kb,Cf:Dk,P:$h,S:Db,Z:Pb},Symbol.toStringTag,{value:"Module"})),Rk=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),Ok=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(t=>t.charCodeAt(0)));var Xc;const Nk=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Fk=(Xc=String.fromCodePoint)!==null&&Xc!==void 0?Xc:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function Vk(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=Nk.get(t))!==null&&e!==void 0?e:t}var It;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(It||(It={}));const Mk=32;var Qr;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Qr||(Qr={}));function Zd(t){return t>=It.ZERO&&t<=It.NINE}function Lk(t){return t>=It.UPPER_A&&t<=It.UPPER_F||t>=It.LOWER_A&&t<=It.LOWER_F}function $k(t){return t>=It.UPPER_A&&t<=It.UPPER_Z||t>=It.LOWER_A&&t<=It.LOWER_Z||Zd(t)}function Uk(t){return t===It.EQUALS||$k(t)}var At;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(At||(At={}));var Kr;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Kr||(Kr={}));class Bk{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=At.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Kr.Strict}startEntity(e){this.decodeMode=e,this.state=At.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case At.EntityStart:return e.charCodeAt(n)===It.NUM?(this.state=At.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=At.NamedEntity,this.stateNamedEntity(e,n));case At.NumericStart:return this.stateNumericStart(e,n);case At.NumericDecimal:return this.stateNumericDecimal(e,n);case At.NumericHex:return this.stateNumericHex(e,n);case At.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|Mk)===It.LOWER_X?(this.state=At.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=At.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,s){if(n!==r){const i=r-n;this.result=this.result*Math.pow(s,i)+parseInt(e.substr(n,i),s),this.consumed+=i}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(Zd(s)||Lk(s))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(Zd(s))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===It.SEMI)this.consumed+=1;else if(this.decodeMode===Kr.Strict)return 0;return this.emitCodePoint(Vk(this.result),this.consumed),this.errors&&(e!==It.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let s=r[this.treeIndex],i=(s&Qr.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const o=e.charCodeAt(n);if(this.treeIndex=jk(r,s,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return this.result===0||this.decodeMode===Kr.Attribute&&(i===0||Uk(o))?0:this.emitNotTerminatedNamedEntity();if(s=r[this.treeIndex],i=(s&Qr.VALUE_LENGTH)>>14,i!==0){if(o===It.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Kr.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,s=(r[n]&Qr.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[e]&~Qr.VALUE_LENGTH:s[e+1],r),n===3&&this.emitCodePoint(s[e+2],r),r}end(){var e;switch(this.state){case At.NamedEntity:return this.result!==0&&(this.decodeMode!==Kr.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case At.NumericDecimal:return this.emitNumericEntity(0,2);case At.NumericHex:return this.emitNumericEntity(0,3);case At.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case At.EntityStart:return 0}}}function Rb(t){let e="";const n=new Bk(t,r=>e+=Fk(r));return function(s,i){let o=0,a=0;for(;(a=s.indexOf("&",a))>=0;){e+=s.slice(o,a),n.startEntity(i);const c=n.write(s,a+1);if(c<0){o=a+n.end();break}o=a+c,a=c===0?o+1:o}const u=e+s.slice(o);return e="",u}}function jk(t,e,n,r){const s=(e&Qr.BRANCH_LENGTH)>>7,i=e&Qr.JUMP_TABLE;if(s===0)return i!==0&&r===i?n:-1;if(i){const u=r-i;return u<0||u>=s?-1:t[n+u]-1}let o=n,a=o+s-1;for(;o<=a;){const u=o+a>>>1,c=t[u];if(c<r)o=u+1;else if(c>r)a=u-1;else return t[u+s]}return-1}const qk=Rb(Rk);Rb(Ok);function Ob(t,e=Kr.Legacy){return qk(t,e)}function zk(t){return Object.prototype.toString.call(t)}function Uh(t){return zk(t)==="[object String]"}const Hk=Object.prototype.hasOwnProperty;function Gk(t,e){return Hk.call(t,e)}function ec(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){t[r]=n[r]})}}),t}function Nb(t,e,n){return[].concat(t.slice(0,e),n,t.slice(e+1))}function Bh(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function cl(t){if(t>65535){t-=65536;const e=55296+(t>>10),n=56320+(t&1023);return String.fromCharCode(e,n)}return String.fromCharCode(t)}const Fb=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Wk=/&([a-z#][a-z0-9]{1,31});/gi,Kk=new RegExp(Fb.source+"|"+Wk.source,"gi"),Yk=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Qk(t,e){if(e.charCodeAt(0)===35&&Yk.test(e)){const r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return Bh(r)?cl(r):t}const n=Ob(t);return n!==t?n:t}function Xk(t){return t.indexOf("\\")<0?t:t.replace(Fb,"$1")}function Li(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(Kk,function(e,n,r){return n||Qk(e,r)})}const Jk=/[&<>"]/,Zk=/[&<>"]/g,eD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function tD(t){return eD[t]}function ms(t){return Jk.test(t)?t.replace(Zk,tD):t}const nD=/[.?*+^$[\]\\(){}|-]/g;function rD(t){return t.replace(nD,"\\$&")}function rt(t){switch(t){case 9:case 32:return!0}return!1}function ua(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function la(t){return $h.test(t)||Db.test(t)}function ca(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function tc(t){return t=t.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(t=t.replace(//g,"")),t.toLowerCase().toUpperCase()}const sD={mdurl:kk,ucmicro:Pk},iD=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:Nb,assign:ec,escapeHtml:ms,escapeRE:rD,fromCodePoint:cl,has:Gk,isMdAsciiPunct:ca,isPunctChar:la,isSpace:rt,isString:Uh,isValidEntityCode:Bh,isWhiteSpace:ua,lib:sD,normalizeReference:tc,unescapeAll:Li,unescapeMd:Xk},Symbol.toStringTag,{value:"Module"}));function oD(t,e,n){let r,s,i,o;const a=t.posMax,u=t.pos;for(t.pos=e+1,r=1;t.pos<a;){if(i=t.src.charCodeAt(t.pos),i===93&&(r--,r===0)){s=!0;break}if(o=t.pos,t.md.inline.skipToken(t),i===91){if(o===t.pos-1)r++;else if(n)return t.pos=u,-1}}let c=-1;return s&&(c=t.pos),t.pos=u,c}function aD(t,e,n){let r,s=e;const i={ok:!1,pos:0,str:""};if(t.charCodeAt(s)===60){for(s++;s<n;){if(r=t.charCodeAt(s),r===10||r===60)return i;if(r===62)return i.pos=s+1,i.str=Li(t.slice(e+1,s)),i.ok=!0,i;if(r===92&&s+1<n){s+=2;continue}s++}return i}let o=0;for(;s<n&&(r=t.charCodeAt(s),!(r===32||r<32||r===127));){if(r===92&&s+1<n){if(t.charCodeAt(s+1)===32)break;s+=2;continue}if(r===40&&(o++,o>32))return i;if(r===41){if(o===0)break;o--}s++}return e===s||o!==0||(i.str=Li(t.slice(e,s)),i.pos=s,i.ok=!0),i}function uD(t,e,n,r){let s,i=e;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(i>=n)return o;let a=t.charCodeAt(i);if(a!==34&&a!==39&&a!==40)return o;e++,i++,a===40&&(a=41),o.marker=a}for(;i<n;){if(s=t.charCodeAt(i),s===o.marker)return o.pos=i+1,o.str+=Li(t.slice(e,i)),o.ok=!0,o;if(s===40&&o.marker===41)return o;s===92&&i+1<n&&i++,i++}return o.can_continue=!0,o.str+=Li(t.slice(e,i)),o}const lD=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:aD,parseLinkLabel:oD,parseLinkTitle:uD},Symbol.toStringTag,{value:"Module"})),Jn={};Jn.code_inline=function(t,e,n,r,s){const i=t[e];return"<code"+s.renderAttrs(i)+">"+ms(i.content)+"</code>"};Jn.code_block=function(t,e,n,r,s){const i=t[e];return"<pre"+s.renderAttrs(i)+"><code>"+ms(t[e].content)+`</code></pre>
`};Jn.fence=function(t,e,n,r,s){const i=t[e],o=i.info?Li(i.info).trim():"";let a="",u="";if(o){const d=o.split(/(\s+)/g);a=d[0],u=d.slice(2).join("")}let c;if(n.highlight?c=n.highlight(i.content,a,u)||ms(i.content):c=ms(i.content),c.indexOf("<pre")===0)return c+`
`;if(o){const d=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];d<0?h.push(["class",n.langPrefix+a]):(h[d]=h[d].slice(),h[d][1]+=" "+n.langPrefix+a);const m={attrs:h};return`<pre><code${s.renderAttrs(m)}>${c}</code></pre>
`}return`<pre><code${s.renderAttrs(i)}>${c}</code></pre>
`};Jn.image=function(t,e,n,r,s){const i=t[e];return i.attrs[i.attrIndex("alt")][1]=s.renderInlineAsText(i.children,n,r),s.renderToken(t,e,n)};Jn.hardbreak=function(t,e,n){return n.xhtmlOut?`<br />
`:`<br>
`};Jn.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Jn.text=function(t,e){return ms(t[e].content)};Jn.html_block=function(t,e){return t[e].content};Jn.html_inline=function(t,e){return t[e].content};function Qi(){this.rules=ec({},Jn)}Qi.prototype.renderAttrs=function(e){let n,r,s;if(!e.attrs)return"";for(s="",n=0,r=e.attrs.length;n<r;n++)s+=" "+ms(e.attrs[n][0])+'="'+ms(e.attrs[n][1])+'"';return s};Qi.prototype.renderToken=function(e,n,r){const s=e[n];let i="";if(s.hidden)return"";s.block&&s.nesting!==-1&&n&&e[n-1].hidden&&(i+=`
`),i+=(s.nesting===-1?"</":"<")+s.tag,i+=this.renderAttrs(s),s.nesting===0&&r.xhtmlOut&&(i+=" /");let o=!1;if(s.block&&(o=!0,s.nesting===1&&n+1<e.length)){const a=e[n+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===s.tag)&&(o=!1)}return i+=o?`>
`:">",i};Qi.prototype.renderInline=function(t,e,n){let r="";const s=this.rules;for(let i=0,o=t.length;i<o;i++){const a=t[i].type;typeof s[a]<"u"?r+=s[a](t,i,e,n,this):r+=this.renderToken(t,i,e)}return r};Qi.prototype.renderInlineAsText=function(t,e,n){let r="";for(let s=0,i=t.length;s<i;s++)switch(t[s].type){case"text":r+=t[s].content;break;case"image":r+=this.renderInlineAsText(t[s].children,e,n);break;case"html_inline":case"html_block":r+=t[s].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Qi.prototype.render=function(t,e,n){let r="";const s=this.rules;for(let i=0,o=t.length;i<o;i++){const a=t[i].type;a==="inline"?r+=this.renderInline(t[i].children,e,n):typeof s[a]<"u"?r+=s[a](t,i,e,n,this):r+=this.renderToken(t,i,e,n)}return r};function rn(){this.__rules__=[],this.__cache__=null}rn.prototype.__find__=function(t){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};rn.prototype.__compile__=function(){const t=this,e=[""];t.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),t.__cache__={},e.forEach(function(n){t.__cache__[n]=[],t.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||t.__cache__[n].push(r.fn))})})};rn.prototype.at=function(t,e,n){const r=this.__find__(t),s=n||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=s.alt||[],this.__cache__=null};rn.prototype.before=function(t,e,n,r){const s=this.__find__(t),i=r||{};if(s===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(s,0,{name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};rn.prototype.after=function(t,e,n,r){const s=this.__find__(t),i=r||{};if(s===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(s+1,0,{name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};rn.prototype.push=function(t,e,n){const r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};rn.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(r){const s=this.__find__(r);if(s<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[s].enabled=!0,n.push(r)},this),this.__cache__=null,n};rn.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(t,e)};rn.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(r){const s=this.__find__(r);if(s<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[s].enabled=!1,n.push(r)},this),this.__cache__=null,n};rn.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};function Rn(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Rn.prototype.attrIndex=function(e){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,s=n.length;r<s;r++)if(n[r][0]===e)return r;return-1};Rn.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};Rn.prototype.attrSet=function(e,n){const r=this.attrIndex(e),s=[e,n];r<0?this.attrPush(s):this.attrs[r]=s};Rn.prototype.attrGet=function(e){const n=this.attrIndex(e);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Rn.prototype.attrJoin=function(e,n){const r=this.attrIndex(e);r<0?this.attrPush([e,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function Vb(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}Vb.prototype.Token=Rn;const cD=/\r\n?|\n/g,dD=/\0/g;function fD(t){let e;e=t.src.replace(cD,`
`),e=e.replace(dD,""),t.src=e}function hD(t){let e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}function pD(t){const e=t.tokens;for(let n=0,r=e.length;n<r;n++){const s=e[n];s.type==="inline"&&t.md.inline.parse(s.content,t.md,t.env,s.children)}}function mD(t){return/^<a[>\s]/i.test(t)}function gD(t){return/^<\/a\s*>/i.test(t)}function _D(t){const e=t.tokens;if(t.md.options.linkify)for(let n=0,r=e.length;n<r;n++){if(e[n].type!=="inline"||!t.md.linkify.pretest(e[n].content))continue;let s=e[n].children,i=0;for(let o=s.length-1;o>=0;o--){const a=s[o];if(a.type==="link_close"){for(o--;s[o].level!==a.level&&s[o].type!=="link_open";)o--;continue}if(a.type==="html_inline"&&(mD(a.content)&&i>0&&i--,gD(a.content)&&i++),!(i>0)&&a.type==="text"&&t.md.linkify.test(a.content)){const u=a.content;let c=t.md.linkify.match(u);const d=[];let h=a.level,m=0;c.length>0&&c[0].index===0&&o>0&&s[o-1].type==="text_special"&&(c=c.slice(1));for(let g=0;g<c.length;g++){const v=c[g].url,E=t.md.normalizeLink(v);if(!t.md.validateLink(E))continue;let A=c[g].text;c[g].schema?c[g].schema==="mailto:"&&!/^mailto:/i.test(A)?A=t.md.normalizeLinkText("mailto:"+A).replace(/^mailto:/,""):A=t.md.normalizeLinkText(A):A=t.md.normalizeLinkText("http://"+A).replace(/^http:\/\//,"");const C=c[g].index;if(C>m){const U=new t.Token("text","",0);U.content=u.slice(m,C),U.level=h,d.push(U)}const R=new t.Token("link_open","a",1);R.attrs=[["href",E]],R.level=h++,R.markup="linkify",R.info="auto",d.push(R);const F=new t.Token("text","",0);F.content=A,F.level=h,d.push(F);const V=new t.Token("link_close","a",-1);V.level=--h,V.markup="linkify",V.info="auto",d.push(V),m=c[g].lastIndex}if(m<u.length){const g=new t.Token("text","",0);g.content=u.slice(m),g.level=h,d.push(g)}e[n].children=s=Nb(s,o,d)}}}}const Mb=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,yD=/\((c|tm|r)\)/i,vD=/\((c|tm|r)\)/ig,bD={c:"",r:"",tm:""};function ED(t,e){return bD[e.toLowerCase()]}function wD(t){let e=0;for(let n=t.length-1;n>=0;n--){const r=t[n];r.type==="text"&&!e&&(r.content=r.content.replace(vD,ED)),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function AD(t){let e=0;for(let n=t.length-1;n>=0;n--){const r=t[n];r.type==="text"&&!e&&Mb.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function TD(t){let e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type==="inline"&&(yD.test(t.tokens[e].content)&&wD(t.tokens[e].children),Mb.test(t.tokens[e].content)&&AD(t.tokens[e].children))}const ID=/['"]/,Fg=/['"]/g,Vg="";function pu(t,e,n){return t.slice(0,e)+n+t.slice(e+1)}function SD(t,e){let n;const r=[];for(let s=0;s<t.length;s++){const i=t[s],o=t[s].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,i.type!=="text")continue;let a=i.content,u=0,c=a.length;e:for(;u<c;){Fg.lastIndex=u;const d=Fg.exec(a);if(!d)break;let h=!0,m=!0;u=d.index+1;const g=d[0]==="'";let v=32;if(d.index-1>=0)v=a.charCodeAt(d.index-1);else for(n=s-1;n>=0&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n--)if(t[n].content){v=t[n].content.charCodeAt(t[n].content.length-1);break}let E=32;if(u<c)E=a.charCodeAt(u);else for(n=s+1;n<t.length&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n++)if(t[n].content){E=t[n].content.charCodeAt(0);break}const A=ca(v)||la(String.fromCharCode(v)),C=ca(E)||la(String.fromCharCode(E)),R=ua(v),F=ua(E);if(F?h=!1:C&&(R||A||(h=!1)),R?m=!1:A&&(F||C||(m=!1)),E===34&&d[0]==='"'&&v>=48&&v<=57&&(m=h=!1),h&&m&&(h=A,m=C),!h&&!m){g&&(i.content=pu(i.content,d.index,Vg));continue}if(m)for(n=r.length-1;n>=0;n--){let V=r[n];if(r[n].level<o)break;if(V.single===g&&r[n].level===o){V=r[n];let U,M;g?(U=e.md.options.quotes[2],M=e.md.options.quotes[3]):(U=e.md.options.quotes[0],M=e.md.options.quotes[1]),i.content=pu(i.content,d.index,M),t[V.token].content=pu(t[V.token].content,V.pos,U),u+=M.length-1,V.token===s&&(u+=U.length-1),a=i.content,c=a.length,r.length=n;continue e}}h?r.push({token:s,pos:d.index,single:g,level:o}):m&&g&&(i.content=pu(i.content,d.index,Vg))}}}function CD(t){if(t.md.options.typographer)for(let e=t.tokens.length-1;e>=0;e--)t.tokens[e].type!=="inline"||!ID.test(t.tokens[e].content)||SD(t.tokens[e].children,t)}function xD(t){let e,n;const r=t.tokens,s=r.length;for(let i=0;i<s;i++){if(r[i].type!=="inline")continue;const o=r[i].children,a=o.length;for(e=0;e<a;e++)o[e].type==="text_special"&&(o[e].type="text");for(e=n=0;e<a;e++)o[e].type==="text"&&e+1<a&&o[e+1].type==="text"?o[e+1].content=o[e].content+o[e+1].content:(e!==n&&(o[n]=o[e]),n++);e!==n&&(o.length=n)}}const Jc=[["normalize",fD],["block",hD],["inline",pD],["linkify",_D],["replacements",TD],["smartquotes",CD],["text_join",xD]];function jh(){this.ruler=new rn;for(let t=0;t<Jc.length;t++)this.ruler.push(Jc[t][0],Jc[t][1])}jh.prototype.process=function(t){const e=this.ruler.getRules("");for(let n=0,r=e.length;n<r;n++)e[n](t)};jh.prototype.State=Vb;function Zn(t,e,n,r){this.src=t,this.md=e,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const s=this.src;for(let i=0,o=0,a=0,u=0,c=s.length,d=!1;o<c;o++){const h=s.charCodeAt(o);if(!d)if(rt(h)){a++,h===9?u+=4-u%4:u++;continue}else d=!0;(h===10||o===c-1)&&(h!==10&&o++,this.bMarks.push(i),this.eMarks.push(o),this.tShift.push(a),this.sCount.push(u),this.bsCount.push(0),d=!1,a=0,u=0,i=o+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Zn.prototype.push=function(t,e,n){const r=new Rn(t,e,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Zn.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Zn.prototype.skipEmptyLines=function(e){for(let n=this.lineMax;e<n&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Zn.prototype.skipSpaces=function(e){for(let n=this.src.length;e<n;e++){const r=this.src.charCodeAt(e);if(!rt(r))break}return e};Zn.prototype.skipSpacesBack=function(e,n){if(e<=n)return e;for(;e>n;)if(!rt(this.src.charCodeAt(--e)))return e+1;return e};Zn.prototype.skipChars=function(e,n){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===n;e++);return e};Zn.prototype.skipCharsBack=function(e,n,r){if(e<=r)return e;for(;e>r;)if(n!==this.src.charCodeAt(--e))return e+1;return e};Zn.prototype.getLines=function(e,n,r,s){if(e>=n)return"";const i=new Array(n-e);for(let o=0,a=e;a<n;a++,o++){let u=0;const c=this.bMarks[a];let d=c,h;for(a+1<n||s?h=this.eMarks[a]+1:h=this.eMarks[a];d<h&&u<r;){const m=this.src.charCodeAt(d);if(rt(m))m===9?u+=4-(u+this.bsCount[a])%4:u++;else if(d-c<this.tShift[a])u++;else break;d++}u>r?i[o]=new Array(u-r+1).join(" ")+this.src.slice(d,h):i[o]=this.src.slice(d,h)}return i.join("")};Zn.prototype.Token=Rn;const kD=65536;function Zc(t,e){const n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];return t.src.slice(n,r)}function Mg(t){const e=[],n=t.length;let r=0,s=t.charCodeAt(r),i=!1,o=0,a="";for(;r<n;)s===124&&(i?(a+=t.substring(o,r-1),o=r):(e.push(a+t.substring(o,r)),a="",o=r+1)),i=s===92,r++,s=t.charCodeAt(r);return e.push(a+t.substring(o)),e}function DD(t,e,n,r){if(e+2>n)return!1;let s=e+1;if(t.sCount[s]<t.blkIndent||t.sCount[s]-t.blkIndent>=4)return!1;let i=t.bMarks[s]+t.tShift[s];if(i>=t.eMarks[s])return!1;const o=t.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58||i>=t.eMarks[s])return!1;const a=t.src.charCodeAt(i++);if(a!==124&&a!==45&&a!==58&&!rt(a)||o===45&&rt(a))return!1;for(;i<t.eMarks[s];){const V=t.src.charCodeAt(i);if(V!==124&&V!==45&&V!==58&&!rt(V))return!1;i++}let u=Zc(t,e+1),c=u.split("|");const d=[];for(let V=0;V<c.length;V++){const U=c[V].trim();if(!U){if(V===0||V===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(U))return!1;U.charCodeAt(U.length-1)===58?d.push(U.charCodeAt(0)===58?"center":"right"):U.charCodeAt(0)===58?d.push("left"):d.push("")}if(u=Zc(t,e).trim(),u.indexOf("|")===-1||t.sCount[e]-t.blkIndent>=4)return!1;c=Mg(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const h=c.length;if(h===0||h!==d.length)return!1;if(r)return!0;const m=t.parentType;t.parentType="table";const g=t.md.block.ruler.getRules("blockquote"),v=t.push("table_open","table",1),E=[e,0];v.map=E;const A=t.push("thead_open","thead",1);A.map=[e,e+1];const C=t.push("tr_open","tr",1);C.map=[e,e+1];for(let V=0;V<c.length;V++){const U=t.push("th_open","th",1);d[V]&&(U.attrs=[["style","text-align:"+d[V]]]);const M=t.push("inline","",0);M.content=c[V].trim(),M.children=[],t.push("th_close","th",-1)}t.push("tr_close","tr",-1),t.push("thead_close","thead",-1);let R,F=0;for(s=e+2;s<n&&!(t.sCount[s]<t.blkIndent);s++){let V=!1;for(let M=0,S=g.length;M<S;M++)if(g[M](t,s,n,!0)){V=!0;break}if(V||(u=Zc(t,s).trim(),!u)||t.sCount[s]-t.blkIndent>=4||(c=Mg(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),F+=h-c.length,F>kD))break;if(s===e+2){const M=t.push("tbody_open","tbody",1);M.map=R=[e+2,0]}const U=t.push("tr_open","tr",1);U.map=[s,s+1];for(let M=0;M<h;M++){const S=t.push("td_open","td",1);d[M]&&(S.attrs=[["style","text-align:"+d[M]]]);const w=t.push("inline","",0);w.content=c[M]?c[M].trim():"",w.children=[],t.push("td_close","td",-1)}t.push("tr_close","tr",-1)}return R&&(t.push("tbody_close","tbody",-1),R[1]=s),t.push("table_close","table",-1),E[1]=s,t.parentType=m,t.line=s,!0}function PD(t,e,n){if(t.sCount[e]-t.blkIndent<4)return!1;let r=e+1,s=r;for(;r<n;){if(t.isEmpty(r)){r++;continue}if(t.sCount[r]-t.blkIndent>=4){r++,s=r;continue}break}t.line=s;const i=t.push("code_block","code",0);return i.content=t.getLines(e,s,4+t.blkIndent,!1)+`
`,i.map=[e,t.line],!0}function RD(t,e,n,r){let s=t.bMarks[e]+t.tShift[e],i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||s+3>i)return!1;const o=t.src.charCodeAt(s);if(o!==126&&o!==96)return!1;let a=s;s=t.skipChars(s,o);let u=s-a;if(u<3)return!1;const c=t.src.slice(a,s),d=t.src.slice(s,i);if(o===96&&d.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let h=e,m=!1;for(;h++,!(h>=n||(s=a=t.bMarks[h]+t.tShift[h],i=t.eMarks[h],s<i&&t.sCount[h]<t.blkIndent));)if(t.src.charCodeAt(s)===o&&!(t.sCount[h]-t.blkIndent>=4)&&(s=t.skipChars(s,o),!(s-a<u)&&(s=t.skipSpaces(s),!(s<i)))){m=!0;break}u=t.sCount[e],t.line=h+(m?1:0);const g=t.push("fence","code",0);return g.info=d,g.content=t.getLines(e+1,h,u,!0),g.markup=c,g.map=[e,t.line],!0}function OD(t,e,n,r){let s=t.bMarks[e]+t.tShift[e],i=t.eMarks[e];const o=t.lineMax;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(s)!==62)return!1;if(r)return!0;const a=[],u=[],c=[],d=[],h=t.md.block.ruler.getRules("blockquote"),m=t.parentType;t.parentType="blockquote";let g=!1,v;for(v=e;v<n;v++){const F=t.sCount[v]<t.blkIndent;if(s=t.bMarks[v]+t.tShift[v],i=t.eMarks[v],s>=i)break;if(t.src.charCodeAt(s++)===62&&!F){let U=t.sCount[v]+1,M,S;t.src.charCodeAt(s)===32?(s++,U++,S=!1,M=!0):t.src.charCodeAt(s)===9?(M=!0,(t.bsCount[v]+U)%4===3?(s++,U++,S=!1):S=!0):M=!1;let w=U;for(a.push(t.bMarks[v]),t.bMarks[v]=s;s<i;){const T=t.src.charCodeAt(s);if(rt(T))T===9?w+=4-(w+t.bsCount[v]+(S?1:0))%4:w++;else break;s++}g=s>=i,u.push(t.bsCount[v]),t.bsCount[v]=t.sCount[v]+1+(M?1:0),c.push(t.sCount[v]),t.sCount[v]=w-U,d.push(t.tShift[v]),t.tShift[v]=s-t.bMarks[v];continue}if(g)break;let V=!1;for(let U=0,M=h.length;U<M;U++)if(h[U](t,v,n,!0)){V=!0;break}if(V){t.lineMax=v,t.blkIndent!==0&&(a.push(t.bMarks[v]),u.push(t.bsCount[v]),d.push(t.tShift[v]),c.push(t.sCount[v]),t.sCount[v]-=t.blkIndent);break}a.push(t.bMarks[v]),u.push(t.bsCount[v]),d.push(t.tShift[v]),c.push(t.sCount[v]),t.sCount[v]=-1}const E=t.blkIndent;t.blkIndent=0;const A=t.push("blockquote_open","blockquote",1);A.markup=">";const C=[e,0];A.map=C,t.md.block.tokenize(t,e,v);const R=t.push("blockquote_close","blockquote",-1);R.markup=">",t.lineMax=o,t.parentType=m,C[1]=t.line;for(let F=0;F<d.length;F++)t.bMarks[F+e]=a[F],t.tShift[F+e]=d[F],t.sCount[F+e]=c[F],t.bsCount[F+e]=u[F];return t.blkIndent=E,!0}function ND(t,e,n,r){const s=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let i=t.bMarks[e]+t.tShift[e];const o=t.src.charCodeAt(i++);if(o!==42&&o!==45&&o!==95)return!1;let a=1;for(;i<s;){const c=t.src.charCodeAt(i++);if(c!==o&&!rt(c))return!1;c===o&&a++}if(a<3)return!1;if(r)return!0;t.line=e+1;const u=t.push("hr","hr",0);return u.map=[e,t.line],u.markup=Array(a+1).join(String.fromCharCode(o)),!0}function Lg(t,e){const n=t.eMarks[e];let r=t.bMarks[e]+t.tShift[e];const s=t.src.charCodeAt(r++);if(s!==42&&s!==45&&s!==43)return-1;if(r<n){const i=t.src.charCodeAt(r);if(!rt(i))return-1}return r}function $g(t,e){const n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];let s=n;if(s+1>=r)return-1;let i=t.src.charCodeAt(s++);if(i<48||i>57)return-1;for(;;){if(s>=r)return-1;if(i=t.src.charCodeAt(s++),i>=48&&i<=57){if(s-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return s<r&&(i=t.src.charCodeAt(s),!rt(i))?-1:s}function FD(t,e){const n=t.level+2;for(let r=e+2,s=t.tokens.length-2;r<s;r++)t.tokens[r].level===n&&t.tokens[r].type==="paragraph_open"&&(t.tokens[r+2].hidden=!0,t.tokens[r].hidden=!0,r+=2)}function VD(t,e,n,r){let s,i,o,a,u=e,c=!0;if(t.sCount[u]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[u]-t.listIndent>=4&&t.sCount[u]<t.blkIndent)return!1;let d=!1;r&&t.parentType==="paragraph"&&t.sCount[u]>=t.blkIndent&&(d=!0);let h,m,g;if((g=$g(t,u))>=0){if(h=!0,o=t.bMarks[u]+t.tShift[u],m=Number(t.src.slice(o,g-1)),d&&m!==1)return!1}else if((g=Lg(t,u))>=0)h=!1;else return!1;if(d&&t.skipSpaces(g)>=t.eMarks[u])return!1;if(r)return!0;const v=t.src.charCodeAt(g-1),E=t.tokens.length;h?(a=t.push("ordered_list_open","ol",1),m!==1&&(a.attrs=[["start",m]])):a=t.push("bullet_list_open","ul",1);const A=[u,0];a.map=A,a.markup=String.fromCharCode(v);let C=!1;const R=t.md.block.ruler.getRules("list"),F=t.parentType;for(t.parentType="list";u<n;){i=g,s=t.eMarks[u];const V=t.sCount[u]+g-(t.bMarks[u]+t.tShift[u]);let U=V;for(;i<s;){const ae=t.src.charCodeAt(i);if(ae===9)U+=4-(U+t.bsCount[u])%4;else if(ae===32)U++;else break;i++}const M=i;let S;M>=s?S=1:S=U-V,S>4&&(S=1);const w=V+S;a=t.push("list_item_open","li",1),a.markup=String.fromCharCode(v);const T=[u,0];a.map=T,h&&(a.info=t.src.slice(o,g-1));const k=t.tight,N=t.tShift[u],P=t.sCount[u],x=t.listIndent;if(t.listIndent=t.blkIndent,t.blkIndent=w,t.tight=!0,t.tShift[u]=M-t.bMarks[u],t.sCount[u]=U,M>=s&&t.isEmpty(u+1)?t.line=Math.min(t.line+2,n):t.md.block.tokenize(t,u,n,!0),(!t.tight||C)&&(c=!1),C=t.line-u>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=x,t.tShift[u]=N,t.sCount[u]=P,t.tight=k,a=t.push("list_item_close","li",-1),a.markup=String.fromCharCode(v),u=t.line,T[1]=u,u>=n||t.sCount[u]<t.blkIndent||t.sCount[u]-t.blkIndent>=4)break;let Pe=!1;for(let ae=0,ue=R.length;ae<ue;ae++)if(R[ae](t,u,n,!0)){Pe=!0;break}if(Pe)break;if(h){if(g=$g(t,u),g<0)break;o=t.bMarks[u]+t.tShift[u]}else if(g=Lg(t,u),g<0)break;if(v!==t.src.charCodeAt(g-1))break}return h?a=t.push("ordered_list_close","ol",-1):a=t.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(v),A[1]=u,t.line=u,t.parentType=F,c&&FD(t,E),!0}function MD(t,e,n,r){let s=t.bMarks[e]+t.tShift[e],i=t.eMarks[e],o=e+1;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(s)!==91)return!1;function a(R){const F=t.lineMax;if(R>=F||t.isEmpty(R))return null;let V=!1;if(t.sCount[R]-t.blkIndent>3&&(V=!0),t.sCount[R]<0&&(V=!0),!V){const S=t.md.block.ruler.getRules("reference"),w=t.parentType;t.parentType="reference";let T=!1;for(let k=0,N=S.length;k<N;k++)if(S[k](t,R,F,!0)){T=!0;break}if(t.parentType=w,T)return null}const U=t.bMarks[R]+t.tShift[R],M=t.eMarks[R];return t.src.slice(U,M+1)}let u=t.src.slice(s,i+1);i=u.length;let c=-1;for(s=1;s<i;s++){const R=u.charCodeAt(s);if(R===91)return!1;if(R===93){c=s;break}else if(R===10){const F=a(o);F!==null&&(u+=F,i=u.length,o++)}else if(R===92&&(s++,s<i&&u.charCodeAt(s)===10)){const F=a(o);F!==null&&(u+=F,i=u.length,o++)}}if(c<0||u.charCodeAt(c+1)!==58)return!1;for(s=c+2;s<i;s++){const R=u.charCodeAt(s);if(R===10){const F=a(o);F!==null&&(u+=F,i=u.length,o++)}else if(!rt(R))break}const d=t.md.helpers.parseLinkDestination(u,s,i);if(!d.ok)return!1;const h=t.md.normalizeLink(d.str);if(!t.md.validateLink(h))return!1;s=d.pos;const m=s,g=o,v=s;for(;s<i;s++){const R=u.charCodeAt(s);if(R===10){const F=a(o);F!==null&&(u+=F,i=u.length,o++)}else if(!rt(R))break}let E=t.md.helpers.parseLinkTitle(u,s,i);for(;E.can_continue;){const R=a(o);if(R===null)break;u+=R,s=i,i=u.length,o++,E=t.md.helpers.parseLinkTitle(u,s,i,E)}let A;for(s<i&&v!==s&&E.ok?(A=E.str,s=E.pos):(A="",s=m,o=g);s<i;){const R=u.charCodeAt(s);if(!rt(R))break;s++}if(s<i&&u.charCodeAt(s)!==10&&A)for(A="",s=m,o=g;s<i;){const R=u.charCodeAt(s);if(!rt(R))break;s++}if(s<i&&u.charCodeAt(s)!==10)return!1;const C=tc(u.slice(1,c));return C?(r||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[C]>"u"&&(t.env.references[C]={title:A,href:h}),t.line=o),!0):!1}const LD=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],$D="[a-zA-Z_:][a-zA-Z0-9:._-]*",UD="[^\"'=<>`\\x00-\\x20]+",BD="'[^']*'",jD='"[^"]*"',qD="(?:"+UD+"|"+BD+"|"+jD+")",zD="(?:\\s+"+$D+"(?:\\s*=\\s*"+qD+")?)",Lb="<[A-Za-z][A-Za-z0-9\\-]*"+zD+"*\\s*\\/?>",$b="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",HD="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",GD="<[?][\\s\\S]*?[?]>",WD="<![A-Za-z][^>]*>",KD="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",YD=new RegExp("^(?:"+Lb+"|"+$b+"|"+HD+"|"+GD+"|"+WD+"|"+KD+")"),QD=new RegExp("^(?:"+Lb+"|"+$b+")"),ai=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+LD.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(QD.source+"\\s*$"),/^$/,!1]];function XD(t,e,n,r){let s=t.bMarks[e]+t.tShift[e],i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(s)!==60)return!1;let o=t.src.slice(s,i),a=0;for(;a<ai.length&&!ai[a][0].test(o);a++);if(a===ai.length)return!1;if(r)return ai[a][2];let u=e+1;if(!ai[a][1].test(o)){for(;u<n&&!(t.sCount[u]<t.blkIndent);u++)if(s=t.bMarks[u]+t.tShift[u],i=t.eMarks[u],o=t.src.slice(s,i),ai[a][1].test(o)){o.length!==0&&u++;break}}t.line=u;const c=t.push("html_block","",0);return c.map=[e,u],c.content=t.getLines(e,u,t.blkIndent,!0),!0}function JD(t,e,n,r){let s=t.bMarks[e]+t.tShift[e],i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let o=t.src.charCodeAt(s);if(o!==35||s>=i)return!1;let a=1;for(o=t.src.charCodeAt(++s);o===35&&s<i&&a<=6;)a++,o=t.src.charCodeAt(++s);if(a>6||s<i&&!rt(o))return!1;if(r)return!0;i=t.skipSpacesBack(i,s);const u=t.skipCharsBack(i,35,s);u>s&&rt(t.src.charCodeAt(u-1))&&(i=u),t.line=e+1;const c=t.push("heading_open","h"+String(a),1);c.markup="########".slice(0,a),c.map=[e,t.line];const d=t.push("inline","",0);d.content=t.src.slice(s,i).trim(),d.map=[e,t.line],d.children=[];const h=t.push("heading_close","h"+String(a),-1);return h.markup="########".slice(0,a),!0}function ZD(t,e,n){const r=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;const s=t.parentType;t.parentType="paragraph";let i=0,o,a=e+1;for(;a<n&&!t.isEmpty(a);a++){if(t.sCount[a]-t.blkIndent>3)continue;if(t.sCount[a]>=t.blkIndent){let g=t.bMarks[a]+t.tShift[a];const v=t.eMarks[a];if(g<v&&(o=t.src.charCodeAt(g),(o===45||o===61)&&(g=t.skipChars(g,o),g=t.skipSpaces(g),g>=v))){i=o===61?1:2;break}}if(t.sCount[a]<0)continue;let m=!1;for(let g=0,v=r.length;g<v;g++)if(r[g](t,a,n,!0)){m=!0;break}if(m)break}if(!i)return!1;const u=t.getLines(e,a,t.blkIndent,!1).trim();t.line=a+1;const c=t.push("heading_open","h"+String(i),1);c.markup=String.fromCharCode(o),c.map=[e,t.line];const d=t.push("inline","",0);d.content=u,d.map=[e,t.line-1],d.children=[];const h=t.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(o),t.parentType=s,!0}function eP(t,e,n){const r=t.md.block.ruler.getRules("paragraph"),s=t.parentType;let i=e+1;for(t.parentType="paragraph";i<n&&!t.isEmpty(i);i++){if(t.sCount[i]-t.blkIndent>3||t.sCount[i]<0)continue;let c=!1;for(let d=0,h=r.length;d<h;d++)if(r[d](t,i,n,!0)){c=!0;break}if(c)break}const o=t.getLines(e,i,t.blkIndent,!1).trim();t.line=i;const a=t.push("paragraph_open","p",1);a.map=[e,t.line];const u=t.push("inline","",0);return u.content=o,u.map=[e,t.line],u.children=[],t.push("paragraph_close","p",-1),t.parentType=s,!0}const mu=[["table",DD,["paragraph","reference"]],["code",PD],["fence",RD,["paragraph","reference","blockquote","list"]],["blockquote",OD,["paragraph","reference","blockquote","list"]],["hr",ND,["paragraph","reference","blockquote","list"]],["list",VD,["paragraph","reference","blockquote"]],["reference",MD],["html_block",XD,["paragraph","reference","blockquote"]],["heading",JD,["paragraph","reference","blockquote"]],["lheading",ZD],["paragraph",eP]];function nc(){this.ruler=new rn;for(let t=0;t<mu.length;t++)this.ruler.push(mu[t][0],mu[t][1],{alt:(mu[t][2]||[]).slice()})}nc.prototype.tokenize=function(t,e,n){const r=this.ruler.getRules(""),s=r.length,i=t.md.options.maxNesting;let o=e,a=!1;for(;o<n&&(t.line=o=t.skipEmptyLines(o),!(o>=n||t.sCount[o]<t.blkIndent));){if(t.level>=i){t.line=n;break}const u=t.line;let c=!1;for(let d=0;d<s;d++)if(c=r[d](t,o,n,!1),c){if(u>=t.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");t.tight=!a,t.isEmpty(t.line-1)&&(a=!0),o=t.line,o<n&&t.isEmpty(o)&&(a=!0,o++,t.line=o)}};nc.prototype.parse=function(t,e,n,r){if(!t)return;const s=new this.State(t,e,n,r);this.tokenize(s,s.line,s.lineMax)};nc.prototype.State=Zn;function Fa(t,e,n,r){this.src=t,this.env=n,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Fa.prototype.pushPending=function(){const t=new Rn("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};Fa.prototype.push=function(t,e,n){this.pending&&this.pushPending();const r=new Rn(t,e,n);let s=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],s={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(s),r};Fa.prototype.scanDelims=function(t,e){const n=this.posMax,r=this.src.charCodeAt(t),s=t>0?this.src.charCodeAt(t-1):32;let i=t;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const o=i-t,a=i<n?this.src.charCodeAt(i):32,u=ca(s)||la(String.fromCharCode(s)),c=ca(a)||la(String.fromCharCode(a)),d=ua(s),h=ua(a),m=!h&&(!c||d||u),g=!d&&(!u||h||c);return{can_open:m&&(e||!g||u),can_close:g&&(e||!m||c),length:o}};Fa.prototype.Token=Rn;function tP(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function nP(t,e){let n=t.pos;for(;n<t.posMax&&!tP(t.src.charCodeAt(n));)n++;return n===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)}const rP=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function sP(t,e){if(!t.md.options.linkify||t.linkLevel>0)return!1;const n=t.pos,r=t.posMax;if(n+3>r||t.src.charCodeAt(n)!==58||t.src.charCodeAt(n+1)!==47||t.src.charCodeAt(n+2)!==47)return!1;const s=t.pending.match(rP);if(!s)return!1;const i=s[1],o=t.md.linkify.matchAtStart(t.src.slice(n-i.length));if(!o)return!1;let a=o.url;if(a.length<=i.length)return!1;a=a.replace(/\*+$/,"");const u=t.md.normalizeLink(a);if(!t.md.validateLink(u))return!1;if(!e){t.pending=t.pending.slice(0,-i.length);const c=t.push("link_open","a",1);c.attrs=[["href",u]],c.markup="linkify",c.info="auto";const d=t.push("text","",0);d.content=t.md.normalizeLinkText(a);const h=t.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return t.pos+=a.length-i.length,!0}function iP(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==10)return!1;const r=t.pending.length-1,s=t.posMax;if(!e)if(r>=0&&t.pending.charCodeAt(r)===32)if(r>=1&&t.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&t.pending.charCodeAt(i-1)===32;)i--;t.pending=t.pending.slice(0,i),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(n++;n<s&&rt(t.src.charCodeAt(n));)n++;return t.pos=n,!0}const qh=[];for(let t=0;t<256;t++)qh.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){qh[t.charCodeAt(0)]=1});function oP(t,e){let n=t.pos;const r=t.posMax;if(t.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let s=t.src.charCodeAt(n);if(s===10){for(e||t.push("hardbreak","br",0),n++;n<r&&(s=t.src.charCodeAt(n),!!rt(s));)n++;return t.pos=n,!0}let i=t.src[n];if(s>=55296&&s<=56319&&n+1<r){const a=t.src.charCodeAt(n+1);a>=56320&&a<=57343&&(i+=t.src[n+1],n++)}const o="\\"+i;if(!e){const a=t.push("text_special","",0);s<256&&qh[s]!==0?a.content=i:a.content=o,a.markup=o,a.info="escape"}return t.pos=n+1,!0}function aP(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==96)return!1;const s=n;n++;const i=t.posMax;for(;n<i&&t.src.charCodeAt(n)===96;)n++;const o=t.src.slice(s,n),a=o.length;if(t.backticksScanned&&(t.backticks[a]||0)<=s)return e||(t.pending+=o),t.pos+=a,!0;let u=n,c;for(;(c=t.src.indexOf("`",u))!==-1;){for(u=c+1;u<i&&t.src.charCodeAt(u)===96;)u++;const d=u-c;if(d===a){if(!e){const h=t.push("code_inline","code",0);h.markup=o,h.content=t.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return t.pos=u,!0}t.backticks[d]=c}return t.backticksScanned=!0,e||(t.pending+=o),t.pos+=a,!0}function uP(t,e){const n=t.pos,r=t.src.charCodeAt(n);if(e||r!==126)return!1;const s=t.scanDelims(t.pos,!0);let i=s.length;const o=String.fromCharCode(r);if(i<2)return!1;let a;i%2&&(a=t.push("text","",0),a.content=o,i--);for(let u=0;u<i;u+=2)a=t.push("text","",0),a.content=o+o,t.delimiters.push({marker:r,length:0,token:t.tokens.length-1,end:-1,open:s.can_open,close:s.can_close});return t.pos+=s.length,!0}function Ug(t,e){let n;const r=[],s=e.length;for(let i=0;i<s;i++){const o=e[i];if(o.marker!==126||o.end===-1)continue;const a=e[o.end];n=t.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=t.tokens[a.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",t.tokens[a.token-1].type==="text"&&t.tokens[a.token-1].content==="~"&&r.push(a.token-1)}for(;r.length;){const i=r.pop();let o=i+1;for(;o<t.tokens.length&&t.tokens[o].type==="s_close";)o++;o--,i!==o&&(n=t.tokens[o],t.tokens[o]=t.tokens[i],t.tokens[i]=n)}}function lP(t){const e=t.tokens_meta,n=t.tokens_meta.length;Ug(t,t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&Ug(t,e[r].delimiters)}const Ub={tokenize:uP,postProcess:lP};function cP(t,e){const n=t.pos,r=t.src.charCodeAt(n);if(e||r!==95&&r!==42)return!1;const s=t.scanDelims(t.pos,r===42);for(let i=0;i<s.length;i++){const o=t.push("text","",0);o.content=String.fromCharCode(r),t.delimiters.push({marker:r,length:s.length,token:t.tokens.length-1,end:-1,open:s.can_open,close:s.can_close})}return t.pos+=s.length,!0}function Bg(t,e){const n=e.length;for(let r=n-1;r>=0;r--){const s=e[r];if(s.marker!==95&&s.marker!==42||s.end===-1)continue;const i=e[s.end],o=r>0&&e[r-1].end===s.end+1&&e[r-1].marker===s.marker&&e[r-1].token===s.token-1&&e[s.end+1].token===i.token+1,a=String.fromCharCode(s.marker),u=t.tokens[s.token];u.type=o?"strong_open":"em_open",u.tag=o?"strong":"em",u.nesting=1,u.markup=o?a+a:a,u.content="";const c=t.tokens[i.token];c.type=o?"strong_close":"em_close",c.tag=o?"strong":"em",c.nesting=-1,c.markup=o?a+a:a,c.content="",o&&(t.tokens[e[r-1].token].content="",t.tokens[e[s.end+1].token].content="",r--)}}function dP(t){const e=t.tokens_meta,n=t.tokens_meta.length;Bg(t,t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&Bg(t,e[r].delimiters)}const Bb={tokenize:cP,postProcess:dP};function fP(t,e){let n,r,s,i,o="",a="",u=t.pos,c=!0;if(t.src.charCodeAt(t.pos)!==91)return!1;const d=t.pos,h=t.posMax,m=t.pos+1,g=t.md.helpers.parseLinkLabel(t,t.pos,!0);if(g<0)return!1;let v=g+1;if(v<h&&t.src.charCodeAt(v)===40){for(c=!1,v++;v<h&&(n=t.src.charCodeAt(v),!(!rt(n)&&n!==10));v++);if(v>=h)return!1;if(u=v,s=t.md.helpers.parseLinkDestination(t.src,v,t.posMax),s.ok){for(o=t.md.normalizeLink(s.str),t.md.validateLink(o)?v=s.pos:o="",u=v;v<h&&(n=t.src.charCodeAt(v),!(!rt(n)&&n!==10));v++);if(s=t.md.helpers.parseLinkTitle(t.src,v,t.posMax),v<h&&u!==v&&s.ok)for(a=s.str,v=s.pos;v<h&&(n=t.src.charCodeAt(v),!(!rt(n)&&n!==10));v++);}(v>=h||t.src.charCodeAt(v)!==41)&&(c=!0),v++}if(c){if(typeof t.env.references>"u")return!1;if(v<h&&t.src.charCodeAt(v)===91?(u=v+1,v=t.md.helpers.parseLinkLabel(t,v),v>=0?r=t.src.slice(u,v++):v=g+1):v=g+1,r||(r=t.src.slice(m,g)),i=t.env.references[tc(r)],!i)return t.pos=d,!1;o=i.href,a=i.title}if(!e){t.pos=m,t.posMax=g;const E=t.push("link_open","a",1),A=[["href",o]];E.attrs=A,a&&A.push(["title",a]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)}return t.pos=v,t.posMax=h,!0}function hP(t,e){let n,r,s,i,o,a,u,c,d="";const h=t.pos,m=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91)return!1;const g=t.pos+2,v=t.md.helpers.parseLinkLabel(t,t.pos+1,!1);if(v<0)return!1;if(i=v+1,i<m&&t.src.charCodeAt(i)===40){for(i++;i<m&&(n=t.src.charCodeAt(i),!(!rt(n)&&n!==10));i++);if(i>=m)return!1;for(c=i,a=t.md.helpers.parseLinkDestination(t.src,i,t.posMax),a.ok&&(d=t.md.normalizeLink(a.str),t.md.validateLink(d)?i=a.pos:d=""),c=i;i<m&&(n=t.src.charCodeAt(i),!(!rt(n)&&n!==10));i++);if(a=t.md.helpers.parseLinkTitle(t.src,i,t.posMax),i<m&&c!==i&&a.ok)for(u=a.str,i=a.pos;i<m&&(n=t.src.charCodeAt(i),!(!rt(n)&&n!==10));i++);else u="";if(i>=m||t.src.charCodeAt(i)!==41)return t.pos=h,!1;i++}else{if(typeof t.env.references>"u")return!1;if(i<m&&t.src.charCodeAt(i)===91?(c=i+1,i=t.md.helpers.parseLinkLabel(t,i),i>=0?s=t.src.slice(c,i++):i=v+1):i=v+1,s||(s=t.src.slice(g,v)),o=t.env.references[tc(s)],!o)return t.pos=h,!1;d=o.href,u=o.title}if(!e){r=t.src.slice(g,v);const E=[];t.md.inline.parse(r,t.md,t.env,E);const A=t.push("image","img",0),C=[["src",d],["alt",""]];A.attrs=C,A.children=E,A.content=r,u&&C.push(["title",u])}return t.pos=i,t.posMax=m,!0}const pP=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,mP=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function gP(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==60)return!1;const r=t.pos,s=t.posMax;for(;;){if(++n>=s)return!1;const o=t.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const i=t.src.slice(r+1,n);if(mP.test(i)){const o=t.md.normalizeLink(i);if(!t.md.validateLink(o))return!1;if(!e){const a=t.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const u=t.push("text","",0);u.content=t.md.normalizeLinkText(i);const c=t.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return t.pos+=i.length+2,!0}if(pP.test(i)){const o=t.md.normalizeLink("mailto:"+i);if(!t.md.validateLink(o))return!1;if(!e){const a=t.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const u=t.push("text","",0);u.content=t.md.normalizeLinkText(i);const c=t.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return t.pos+=i.length+2,!0}return!1}function _P(t){return/^<a[>\s]/i.test(t)}function yP(t){return/^<\/a\s*>/i.test(t)}function vP(t){const e=t|32;return e>=97&&e<=122}function bP(t,e){if(!t.md.options.html)return!1;const n=t.posMax,r=t.pos;if(t.src.charCodeAt(r)!==60||r+2>=n)return!1;const s=t.src.charCodeAt(r+1);if(s!==33&&s!==63&&s!==47&&!vP(s))return!1;const i=t.src.slice(r).match(YD);if(!i)return!1;if(!e){const o=t.push("html_inline","",0);o.content=i[0],_P(o.content)&&t.linkLevel++,yP(o.content)&&t.linkLevel--}return t.pos+=i[0].length,!0}const EP=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,wP=/^&([a-z][a-z0-9]{1,31});/i;function AP(t,e){const n=t.pos,r=t.posMax;if(t.src.charCodeAt(n)!==38||n+1>=r)return!1;if(t.src.charCodeAt(n+1)===35){const i=t.src.slice(n).match(EP);if(i){if(!e){const o=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),a=t.push("text_special","",0);a.content=Bh(o)?cl(o):cl(65533),a.markup=i[0],a.info="entity"}return t.pos+=i[0].length,!0}}else{const i=t.src.slice(n).match(wP);if(i){const o=Ob(i[0]);if(o!==i[0]){if(!e){const a=t.push("text_special","",0);a.content=o,a.markup=i[0],a.info="entity"}return t.pos+=i[0].length,!0}}}return!1}function jg(t){const e={},n=t.length;if(!n)return;let r=0,s=-2;const i=[];for(let o=0;o<n;o++){const a=t[o];if(i.push(0),(t[r].marker!==a.marker||s!==a.token-1)&&(r=o),s=a.token,a.length=a.length||0,!a.close)continue;e.hasOwnProperty(a.marker)||(e[a.marker]=[-1,-1,-1,-1,-1,-1]);const u=e[a.marker][(a.open?3:0)+a.length%3];let c=r-i[r]-1,d=c;for(;c>u;c-=i[c]+1){const h=t[c];if(h.marker===a.marker&&h.open&&h.end<0){let m=!1;if((h.close||a.open)&&(h.length+a.length)%3===0&&(h.length%3!==0||a.length%3!==0)&&(m=!0),!m){const g=c>0&&!t[c-1].open?i[c-1]+1:0;i[o]=o-c+g,i[c]=g,a.open=!1,h.end=o,h.close=!1,d=-1,s=-2;break}}}d!==-1&&(e[a.marker][(a.open?3:0)+(a.length||0)%3]=d)}}function TP(t){const e=t.tokens_meta,n=t.tokens_meta.length;jg(t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&jg(e[r].delimiters)}function IP(t){let e,n,r=0;const s=t.tokens,i=t.tokens.length;for(e=n=0;e<i;e++)s[e].nesting<0&&r--,s[e].level=r,s[e].nesting>0&&r++,s[e].type==="text"&&e+1<i&&s[e+1].type==="text"?s[e+1].content=s[e].content+s[e+1].content:(e!==n&&(s[n]=s[e]),n++);e!==n&&(s.length=n)}const ed=[["text",nP],["linkify",sP],["newline",iP],["escape",oP],["backticks",aP],["strikethrough",Ub.tokenize],["emphasis",Bb.tokenize],["link",fP],["image",hP],["autolink",gP],["html_inline",bP],["entity",AP]],td=[["balance_pairs",TP],["strikethrough",Ub.postProcess],["emphasis",Bb.postProcess],["fragments_join",IP]];function Va(){this.ruler=new rn;for(let t=0;t<ed.length;t++)this.ruler.push(ed[t][0],ed[t][1]);this.ruler2=new rn;for(let t=0;t<td.length;t++)this.ruler2.push(td[t][0],td[t][1])}Va.prototype.skipToken=function(t){const e=t.pos,n=this.ruler.getRules(""),r=n.length,s=t.md.options.maxNesting,i=t.cache;if(typeof i[e]<"u"){t.pos=i[e];return}let o=!1;if(t.level<s){for(let a=0;a<r;a++)if(t.level++,o=n[a](t,!0),t.level--,o){if(e>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;o||t.pos++,i[e]=t.pos};Va.prototype.tokenize=function(t){const e=this.ruler.getRules(""),n=e.length,r=t.posMax,s=t.md.options.maxNesting;for(;t.pos<r;){const i=t.pos;let o=!1;if(t.level<s){for(let a=0;a<n;a++)if(o=e[a](t,!1),o){if(i>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(t.pos>=r)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};Va.prototype.parse=function(t,e,n,r){const s=new this.State(t,e,n,r);this.tokenize(s);const i=this.ruler2.getRules(""),o=i.length;for(let a=0;a<o;a++)i[a](s)};Va.prototype.State=Fa;function SP(t){const e={};t=t||{},e.src_Any=xb.source,e.src_Cc=kb.source,e.src_Z=Pb.source,e.src_P=$h.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const n="[><]";return e.src_pseudo_letter="(?:(?!"+n+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+n+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function ef(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){t[r]=n[r]})}),t}function rc(t){return Object.prototype.toString.call(t)}function CP(t){return rc(t)==="[object String]"}function xP(t){return rc(t)==="[object Object]"}function kP(t){return rc(t)==="[object RegExp]"}function qg(t){return rc(t)==="[object Function]"}function DP(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const jb={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function PP(t){return Object.keys(t||{}).reduce(function(e,n){return e||jb.hasOwnProperty(n)},!1)}const RP={"http:":{validate:function(t,e,n){const r=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){const r=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){const r=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},OP="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",NP="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function FP(t){t.__index__=-1,t.__text_cache__=""}function VP(t){return function(e,n){const r=e.slice(n);return t.test(r)?r.match(t)[0].length:0}}function zg(){return function(t,e){e.normalize(t)}}function dl(t){const e=t.re=SP(t.__opts__),n=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||n.push(OP),n.push(e.src_xn),e.src_tlds=n.join("|");function r(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");const s=[];t.__compiled__={};function i(a,u){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+u)}Object.keys(t.__schemas__).forEach(function(a){const u=t.__schemas__[a];if(u===null)return;const c={validate:null,link:null};if(t.__compiled__[a]=c,xP(u)){kP(u.validate)?c.validate=VP(u.validate):qg(u.validate)?c.validate=u.validate:i(a,u),qg(u.normalize)?c.normalize=u.normalize:u.normalize?i(a,u):c.normalize=zg();return}if(CP(u)){s.push(a);return}i(a,u)}),s.forEach(function(a){t.__compiled__[t.__schemas__[a]]&&(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:zg()};const o=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(DP).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+o+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+o+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),FP(t)}function MP(t,e){const n=t.__index__,r=t.__last_index__,s=t.__text_cache__.slice(n,r);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=r+e,this.raw=s,this.text=s,this.url=s}function tf(t,e){const n=new MP(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function cn(t,e){if(!(this instanceof cn))return new cn(t,e);e||PP(t)&&(e=t,t={}),this.__opts__=ef({},jb,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=ef({},RP,t),this.__compiled__={},this.__tlds__=NP,this.__tlds_replaced__=!1,this.re={},dl(this)}cn.prototype.add=function(e,n){return this.__schemas__[e]=n,dl(this),this};cn.prototype.set=function(e){return this.__opts__=ef(this.__opts__,e),this};cn.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let n,r,s,i,o,a,u,c,d;if(this.re.schema_test.test(e)){for(u=this.re.schema_search,u.lastIndex=0;(n=u.exec(e))!==null;)if(i=this.testSchemaAt(e,n[2],u.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=e.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(d=e.indexOf("@"),d>=0&&(s=e.match(this.re.email_fuzzy))!==null&&(o=s.index+s[1].length,a=s.index+s[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a))),this.__index__>=0};cn.prototype.pretest=function(e){return this.re.pretest.test(e)};cn.prototype.testSchemaAt=function(e,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(e,r,this):0};cn.prototype.match=function(e){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(n.push(tf(this,r)),r=this.__last_index__);let s=r?e.slice(r):e;for(;this.test(s);)n.push(tf(this,r)),s=s.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};cn.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const n=this.re.schema_at_start.exec(e);if(!n)return null;const r=this.testSchemaAt(e,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,tf(this,0)):null};cn.prototype.tlds=function(e,n){return e=Array.isArray(e)?e:[e],n?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,s,i){return r!==i[s-1]}).reverse(),dl(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,dl(this),this)};cn.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};cn.prototype.onCompile=function(){};const Ti=2147483647,Ln=36,zh=1,da=26,LP=38,$P=700,qb=72,zb=128,Hb="-",UP=/^xn--/,BP=/[^\0-\x7F]/,jP=/[\x2E\u3002\uFF0E\uFF61]/g,qP={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},nd=Ln-zh,$n=Math.floor,rd=String.fromCharCode;function qr(t){throw new RangeError(qP[t])}function zP(t,e){const n=[];let r=t.length;for(;r--;)n[r]=e(t[r]);return n}function Gb(t,e){const n=t.split("@");let r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(jP,".");const s=t.split("."),i=zP(s,e).join(".");return r+i}function Wb(t){const e=[];let n=0;const r=t.length;for(;n<r;){const s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){const i=t.charCodeAt(n++);(i&64512)==56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),n--)}else e.push(s)}return e}const HP=t=>String.fromCodePoint(...t),GP=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:Ln},Hg=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},Kb=function(t,e,n){let r=0;for(t=n?$n(t/$P):t>>1,t+=$n(t/e);t>nd*da>>1;r+=Ln)t=$n(t/nd);return $n(r+(nd+1)*t/(t+LP))},Yb=function(t){const e=[],n=t.length;let r=0,s=zb,i=qb,o=t.lastIndexOf(Hb);o<0&&(o=0);for(let a=0;a<o;++a)t.charCodeAt(a)>=128&&qr("not-basic"),e.push(t.charCodeAt(a));for(let a=o>0?o+1:0;a<n;){const u=r;for(let d=1,h=Ln;;h+=Ln){a>=n&&qr("invalid-input");const m=GP(t.charCodeAt(a++));m>=Ln&&qr("invalid-input"),m>$n((Ti-r)/d)&&qr("overflow"),r+=m*d;const g=h<=i?zh:h>=i+da?da:h-i;if(m<g)break;const v=Ln-g;d>$n(Ti/v)&&qr("overflow"),d*=v}const c=e.length+1;i=Kb(r-u,c,u==0),$n(r/c)>Ti-s&&qr("overflow"),s+=$n(r/c),r%=c,e.splice(r++,0,s)}return String.fromCodePoint(...e)},Qb=function(t){const e=[];t=Wb(t);const n=t.length;let r=zb,s=0,i=qb;for(const u of t)u<128&&e.push(rd(u));const o=e.length;let a=o;for(o&&e.push(Hb);a<n;){let u=Ti;for(const d of t)d>=r&&d<u&&(u=d);const c=a+1;u-r>$n((Ti-s)/c)&&qr("overflow"),s+=(u-r)*c,r=u;for(const d of t)if(d<r&&++s>Ti&&qr("overflow"),d===r){let h=s;for(let m=Ln;;m+=Ln){const g=m<=i?zh:m>=i+da?da:m-i;if(h<g)break;const v=h-g,E=Ln-g;e.push(rd(Hg(g+v%E,0))),h=$n(v/E)}e.push(rd(Hg(h,0))),i=Kb(s,c,a===o),s=0,++a}++s,++r}return e.join("")},WP=function(t){return Gb(t,function(e){return UP.test(e)?Yb(e.slice(4).toLowerCase()):e})},KP=function(t){return Gb(t,function(e){return BP.test(e)?"xn--"+Qb(e):e})},Xb={version:"2.3.1",ucs2:{decode:Wb,encode:HP},decode:Yb,encode:Qb,toASCII:KP,toUnicode:WP},YP={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},QP={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},XP={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},JP={default:YP,zero:QP,commonmark:XP},ZP=/^(vbscript|javascript|file|data):/,e8=/^data:image\/(gif|png|jpeg|webp);/;function t8(t){const e=t.trim().toLowerCase();return ZP.test(e)?e8.test(e):!0}const Jb=["http:","https:","mailto:"];function n8(t){const e=Lh(t,!0);if(e.hostname&&(!e.protocol||Jb.indexOf(e.protocol)>=0))try{e.hostname=Xb.toASCII(e.hostname)}catch{}return Na(Mh(e))}function r8(t){const e=Lh(t,!0);if(e.hostname&&(!e.protocol||Jb.indexOf(e.protocol)>=0))try{e.hostname=Xb.toUnicode(e.hostname)}catch{}return Mi(Mh(e),Mi.defaultChars+"%")}function dn(t,e){if(!(this instanceof dn))return new dn(t,e);e||Uh(t)||(e=t||{},t="default"),this.inline=new Va,this.block=new nc,this.core=new jh,this.renderer=new Qi,this.linkify=new cn,this.validateLink=t8,this.normalizeLink=n8,this.normalizeLinkText=r8,this.utils=iD,this.helpers=ec({},lD),this.options={},this.configure(t),e&&this.set(e)}dn.prototype.set=function(t){return ec(this.options,t),this};dn.prototype.configure=function(t){const e=this;if(Uh(t)){const n=t;if(t=JP[n],!t)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enableOnly(t.components[n].rules),t.components[n].rules2&&e[n].ruler2.enableOnly(t.components[n].rules2)}),this};dn.prototype.enable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(s){n=n.concat(this[s].ruler.enable(t,!0))},this),n=n.concat(this.inline.ruler2.enable(t,!0));const r=t.filter(function(s){return n.indexOf(s)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};dn.prototype.disable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(s){n=n.concat(this[s].ruler.disable(t,!0))},this),n=n.concat(this.inline.ruler2.disable(t,!0));const r=t.filter(function(s){return n.indexOf(s)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};dn.prototype.use=function(t){const e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};dn.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");const n=new this.core.State(t,this,e);return this.core.process(n),n.tokens};dn.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};dn.prototype.parseInline=function(t,e){const n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens};dn.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};const s8=["dir"],i8={class:"recommend-main-content"},o8={class:"recommend-card"},a8={class:"mode-switcher"},u8={key:0,class:"loading-overlay"},l8={key:1,class:"patient-info-display"},c8={class:"form-group"},d8=["disabled"],f8={class:"form-group"},h8=["disabled"],p8={class:"form-group"},m8=["disabled"],g8={value:"male"},_8={value:"female"},y8={key:0,class:"pregnancy-section"},v8={class:"form-group checkbox-group"},b8=["disabled"],E8={key:0,class:"form-group"},w8=["disabled"],A8={class:"form-group"},T8=["disabled"],I8={class:"form-group"},S8={key:1,class:"doctor-exposure-section"},C8={class:"section-title"},x8={class:"form-group"},k8={class:"section-title"},D8={class:"form-group"},P8={key:0,class:"required-indicator"},R8=["required"],O8={disabled:"",value:""},N8=["value"],F8={key:2,class:"form-group"},V8={key:0,class:"required-indicator"},M8=["required"],L8={class:"form-row"},$8={class:"form-group"},U8={key:0,class:"required-indicator"},B8=["required"],j8={value:"CT"},q8={value:"X-ray"},z8={class:"form-group"},H8={key:0,class:"required-indicator"},G8=["required"],W8={disabled:"",value:""},K8=["value"],Y8={key:3,class:"form-group"},Q8={key:0,class:"required-indicator"},X8=["required"],J8=["disabled"],Z8={key:2,class:"message error-message"},eR={key:3,class:"prediction-result-wrapper"},tR={key:0,class:"message warning-message"},nR={style:{"white-space":"pre-wrap"}},rR={class:"prediction-result"},sR={key:0,class:"msv-details-container"},iR={class:"msv-details"},oR={key:0,class:"msv-details doctor-dose"},aR={class:"result-text"},uR=["innerHTML"],lR={key:1,class:"save-recommendation-section"},cR=["disabled"],dR={class:"save-note"},fR={class:"switch-link-container"},hR={__name:"RecommendView",setup(t){const e=bs(),n=K_(),r=wn(),s=Yi(),i=new dn,o=Me("currentLanguage"),a=Me("currentMsv");Me("doseLimit");const u=Me("triggerMsvRecalculation"),c={CT:[{value:"Abdomen & Pelvis",en:"Abdomen & Pelvis",ar:" "},{value:"Brain with contrast",en:"Brain with contrast",ar:"  "},{value:"Angiography CTA",en:"Angiography CTA",ar:"  CTA"},{value:"Urography",en:"Urography",ar:"  "},{value:"Enterography",en:"Enterography",ar:" "},{value:"Other",en:"Other...",ar:"..."}],"X-ray":[{value:"Barium Enema",en:"Barium Enema",ar:"  "},{value:"IV Urogram (IVP)",en:"IV Urogram (IVP)",ar:"   (IVP)"},{value:"HSG",en:"HSG",ar:"  (HSG)"},{value:"VCUG",en:"VCUG",ar:"   (VCUG)"},{value:"Other",en:"Other...",ar:"..."}]},d=[{value:"head",en:"Head",ar:""},{value:"neck",en:"Neck",ar:""},{value:"chest",en:"Chest",ar:""},{value:"abdomen",en:"Abdomen",ar:""},{value:"pelvis",en:"Pelvis",ar:""},{value:"spine",en:"Spine",ar:" "},{value:"upper_extremity",en:"Upper Extremity",ar:" "},{value:"lower_extremity",en:"Lower Extremity",ar:" "},{value:"other",en:"Other",ar:""}],h={patient:{CT:{"Abdomen & Pelvis":14,"Brain with contrast":2,"Angiography CTA":12,Urography:8,Enterography:8,default:6},"X-ray":{"Barium Enema":7,"IV Urogram (IVP)":2.5,HSG:1.5,VCUG:1,default:.5}},doctor:{CT:{default:1e-5},"X-ray":{"Barium Enema":1e-4,"IV Urogram (IVP)":5e-5,HSG:2e-4,VCUG:15e-5,default:5e-5}}},m=Ae("personal"),g=Ae({patientId:null,patientName:"",birthDate:"",gender:"male",weight:null,patientCumulativeDose:0,medicalHistory:"",currentSymptoms:"",allergies:"",isPregnant:!1,estimatedDueDate:"",scanType:"CT",scanPlace:"",otherScanPlaceDescription:"",subScanType:"",otherScanDescription:"",numberOfScans:1,doctorAdditionalContext:""}),v=Ae(!1),E=Ae(!1),A=Ae(!1),C=Ae(null),R=Ee(()=>C.value&&C.value.recommendationText?i.render(C.value.recommendationText):""),F=Ae(""),V=Ee(()=>r.role),U=Ee(()=>V.value==="doctor"&&m.value==="personal"),M=Ee(()=>V.value==="doctor"&&m.value==="general"),S=Ee(()=>c[g.value.scanType]||[]),w=Ee(()=>g.value.subScanType==="Other"),T=Ee(()=>g.value.scanPlace==="other"),k=Ee(()=>m.value==="personal"?o.value==="en"?"Your Estimated Dose":" ":o.value==="en"?"Patient Dose":" "),N=Ee(()=>o.value==="en"?"Occupational Dose":" "),P=Ee(()=>!C.value||C.value.doctorOccupationalMsv===null?!1:M.value),x=()=>{g.value={patientId:null,patientName:"",birthDate:"",gender:"male",weight:null,patientCumulativeDose:0,medicalHistory:"",currentSymptoms:"",allergies:"",isPregnant:!1,estimatedDueDate:"",scanType:"CT",scanPlace:"",otherScanPlaceDescription:"",subScanType:"",otherScanDescription:"",numberOfScans:1,doctorAdditionalContext:""}},Pe=Se=>Se?(typeof Se.toDate=="function"?Se.toDate():new Date(Se)).toISOString().split("T")[0]:"",ae=async Se=>{if(Se){A.value=!0,x();try{let ne=Se===r.user?.uid?r.userProfile:await s.fetchSinglePatient(Se);if(ne){g.value.patientId=Se,g.value.patientName=ne.displayName||ne.name||"",g.value.birthDate=Pe(ne.birthDate),g.value.weight=ne.weight||null,g.value.gender=ne.gender||"male",g.value.isPregnant=ne.isPregnant||!1,g.value.estimatedDueDate=Pe(ne.estimatedDueDate),g.value.medicalHistory=Array.isArray(ne.medicalHistory)?ne.medicalHistory.join(", "):"",g.value.allergies=Array.isArray(ne.allergies)?ne.allergies.join(", "):"";const pe=await s.fetchScansForPatient(Se);if(pe){const Ue=new Date(new Date().getFullYear(),0,1),Ge=ft=>ft?ft.toDate?ft.toDate():new Date(ft):null,hn=pe.filter(ft=>Ge(ft.scanDate)>=Ue);g.value.patientCumulativeDose=parseFloat(hn.reduce((ft,wt)=>ft+(wt.patientDose||0),0).toFixed(3))}}}catch(ne){console.error("Error fetching patient details:",ne),F.value=o.value==="en"?"Failed to load patient data.":"    ."}finally{A.value=!1}}};Ze(m,Se=>{C.value=null,Se==="personal"&&r.user?ae(r.user.uid):n.query.patientId||x()}),Ze(()=>n.query.patientId,Se=>{Se?(m.value="general",ae(Se)):r.user&&(m.value="personal",ae(r.user.uid))},{immediate:!0}),Ze(()=>g.value.isPregnant,Se=>{Se||(g.value.estimatedDueDate="")}),Ze(()=>g.value.scanType,()=>{g.value.subScanType="",g.value.otherScanDescription="",g.value.numberOfScans=1});const ue=Se=>{try{const ne=g.value.subScanType==="Other"?"default":g.value.subScanType,Ue=h[Se][g.value.scanType];if(!Ue)return null;let Ge=Ue[ne]??Ue.default;return Ge===void 0?null:g.value.scanType==="X-ray"?Ge*g.value.numberOfScans:Ge}catch(ne){return console.error("Error retrieving fallback dose:",ne),null}},de=async()=>{if(v.value=!0,F.value="",C.value=null,!g.value.birthDate){F.value=o.value==="en"?"Date of Birth is a required field.":"   .",v.value=!1;return}const Se=g.value.scanPlace&&g.value.scanType&&g.value.subScanType;if(M.value&&!Se){F.value=o.value==="en"?"Please complete all required scan details.":"     .",v.value=!1;return}let ne=null,pe=null;if(Se&&(ne=ue("patient"),M.value&&(pe=ue("doctor")),ne===null)){F.value=o.value==="en"?"Could not determine a dose for the selected scan.":"    .",v.value=!1;return}const Ue=o.value,Ge=V.value==="patient"||U.value?"Patient":"Doctor",hn=`You are an expert medical radiation physicist and AI assistant specialized in radiological protection and dosimetry.
You are assisting in a medical radiation exposure tracking system for X-ray and CT imaging.

Use the following input fields to generate customized recommendations:

- User type: [Doctor / Patient]
- Examination type: [X-ray / CT / Dental / Chest / Abdomen / Limbs / etc.]
- Number of scans: [integer]
- Exposure time: [seconds]
- Patient parameters: [age, sex, pregnancy status, body thickness]
- Distance from source: [cm]
- Shielding availability: [Lead apron / thyroid collar / gonadal shield / none]
- Estimated dose (mSv): [value from AI estimation model]

Now, based on these inputs:

If the user is Doctor:
1. Suggest the optimal exposure factors (kVp, mAs, distance, and filtration) according to the examination type.
2. Recommend the appropriate shielding devices (lead apron, thyroid shield, gonadal shield) and where to place them on the patient.
3. Provide the expected dose for the patient and compare it to the international reference levels (ICRP/IAEA guidelines).
4. Remind about occupational exposure limits and advise on distance/time/shielding optimization for staff.
5. Display protocols recommended by WHO and ICRP for that specific examination.
6. If exposure is close to the limit, suggest protocol adjustments or additional shielding.

If the user is Patient:
1. Explain the expected radiation dose and its percentage relative to the annual recommended public limit (1 mSv/year).
2. Indicate the risk level qualitatively (e.g., negligible / low / moderate / high).
3. Provide safety tips before and after the scan (e.g., avoid repeated imaging unnecessarily).
4. Advise consulting the doctor about radiation-free alternatives (e.g., ultrasound, MRI) if appropriate for the case.
5. Offer educational notes about radiation safety, purpose of shields, and importance of medical justification.
6. Encourage saving and tracking dose history in the app for cumulative exposure monitoring.

Always provide the output in clear, human-friendly language and reference international safety standards (ICRP 103, IAEA GSR Part 3, WHO 2016).
`,ft=Se?w.value?g.value.otherScanDescription:g.value.subScanType:"N/A",wt=Se?T.value?g.value.otherScanPlaceDescription:g.value.scanPlace:"N/A",H=Se?`${g.value.scanType} of the ${wt}, protocol: "${ft}"`:"Not specified",le=`
    ${hn}

    ---
    **GENERATE RECOMMENDATION BASED ON THE FOLLOWING DATA. FOLLOW THE RULES FOR THE SPECIFIED USER TYPE ABOVE.**
    ---
    - **User type:** ${Ge}
    - **Examination type:** ${H}
    - **Number of scans:** ${g.value.numberOfScans}
    - **Exposure time:** "Not provided"
    - **Patient parameters:** "age: ${new Date().getFullYear()-new Date(g.value.birthDate).getFullYear()}, sex: ${g.value.gender}, pregnancy status: ${g.value.isPregnant?`Yes, due around ${g.value.estimatedDueDate}`:"No"}, body thickness: ${g.value.weight?`${g.value.weight}kg`:"Not provided"}"
    - **Distance from source:** "Not provided"
    - **Shielding availability:** "Not provided"
    - **Estimated dose (mSv):** ${ne!==null?ne.toFixed(3):"N/A"}
    - **Patient Cumulative Dose (This Year):** ${g.value.patientCumulativeDose.toFixed(3)} mSv
    - **Doctor Cumulative Dose (This Year):** ${a.value.toFixed(3)} mSv
    - **Reason / Symptoms / Medical History:** "${g.value.currentSymptoms||"Not provided"}. History: ${g.value.medicalHistory||"None"}"
    - **Doctor's Additional Context on Positioning/Shielding:** "${g.value.doctorAdditionalContext||"None"}"
    - **Language for response:** ${Ue==="en"?"English":"Arabic"}

    **Your Instructions:**
    1.  **recommendationText:** Fulfill all the requirements for the **Patient** user type above.
    Combine all points into a single, comprehensive, well-structured response, **Use Markdown for formatting** (e.g., **bold** for emphasis, and unordered lists with -)
    2.  **Warning:** Write a clear, actionable warning if any high-risk factors are present (e.g., pregnancy, high cumulative dose, etc.). If none, state that clearly.
  `,re={type:"OBJECT",properties:{recommendationText:{type:"STRING"},Warning:{type:"STRING"}},required:["recommendationText","Warning"]};try{const O=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyC8npsehZb6bm1r7lOc4oofjwkrldVINvY",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:le}]}],generationConfig:{responseMimeType:"application/json",responseSchema:re}})});if(!O.ok)throw new Error(`API Error: ${O.statusText}`);const L=await O.json(),G=JSON.parse(L.candidates[0].content.parts[0].text);C.value={...G,patientCalculatedMsv:ne,doctorOccupationalMsv:U.value?0:pe}}catch(fe){console.error("AI advice generation failed. Using fallback.",fe),C.value={recommendationText:Ue==="en"?"AI service failed. Please use clinical judgment.":"   .    .",Warning:Ue==="en"?"Review inputs carefully.":"  .",patientCalculatedMsv:ne,doctorOccupationalMsv:U.value?0:pe}}finally{v.value=!1}},Fe=async()=>{if(!C.value||!g.value.patientId){alert("No recommendation data to save or patient ID is missing.");return}if(C.value.patientCalculatedMsv===null){alert(o.value==="en"?"Cannot save a record without specific scan details.":"       .");return}E.value=!0;try{const Se=g.value.scanPlace==="other"?g.value.otherScanPlaceDescription:g.value.scanPlace,ne=g.value.subScanType==="Other"?g.value.otherScanDescription:g.value.subScanType,pe={patientId:g.value.patientId,scanType:g.value.scanType,scanPlace:Se,scanDetail:ne,numberOfScans:g.value.numberOfScans,scanDate:Ne.now(),patientDose:Number(C.value.patientCalculatedMsv)||0,doctorDose:Number(C.value.doctorOccupationalMsv)||0,reason:g.value.currentSymptoms||"As per AI recommendation",notes:C.value.recommendationText,isPersonalScan:m.value==="personal"};if(await s.createScan(pe))alert(o.value==="en"?"Scan record saved successfully!":"!    "),u&&u(),C.value=null;else throw new Error(s.error)}catch(Se){console.error("Error saving scan from recommendation:",Se),alert(o.value==="en"?`Failed to save scan: ${Se.message}`:`  : ${Se.message}`)}finally{E.value=!1}};return(Se,ne)=>(B(),q("div",{class:"recommend-page",dir:y(o)==="ar"?"rtl":"ltr"},[f("main",i8,[f("section",o8,[f("h2",null,b(y(o)==="en"?"Medical Scan Advisor":"  "),1),f("p",null,b(y(o)==="en"?"Fill in the details to get AI-powered advice. Scan details are optional for patients.":"       .    ."),1),f("div",a8,[f("button",{class:is({active:m.value==="personal"}),onClick:ne[0]||(ne[0]=pe=>m.value="personal")},b(y(o)==="en"?"For Myself":""),3),V.value==="doctor"?(B(),q("button",{key:0,class:is({active:m.value==="general"}),onClick:ne[1]||(ne[1]=pe=>m.value="general")},b(y(o)==="en"?"For Another Patient":" "),3)):he("",!0)]),A.value?(B(),q("div",u8,[f("span",null,b(y(o)==="en"?"Loading Patient Data...":"   ..."),1)])):he("",!0),g.value.patientId&&g.value.patientName?(B(),q("div",l8,[lt(b(y(o)==="en"?"Getting recommendation for:":"   :")+" ",1),f("strong",null,b(g.value.patientName),1),lt(" ("+b(g.value.weight?`${g.value.weight} kg`:"Weight N/A")+") ",1)])):he("",!0),f("form",{onSubmit:st(de,["prevent"]),class:"recommend-form"},[f("div",c8,[f("label",null,b(y(o)==="en"?"Weight (kg)":" ()"),1),J(f("input",{type:"number",step:"0.1","onUpdate:modelValue":ne[2]||(ne[2]=pe=>g.value.weight=pe),disabled:m.value==="personal",placeholder:"e.g. 70.5"},null,8,d8),[[me,g.value.weight]])]),f("div",f8,[f("label",null,[lt(b(y(o)==="en"?"Date of Birth":" ")+" ",1),ne[16]||(ne[16]=f("span",{class:"required-indicator"},"*",-1))]),J(f("input",{type:"date","onUpdate:modelValue":ne[3]||(ne[3]=pe=>g.value.birthDate=pe),disabled:m.value==="personal",required:""},null,8,h8),[[me,g.value.birthDate]])]),f("div",p8,[f("label",null,[lt(b(y(o)==="en"?"Gender":"")+" ",1),ne[17]||(ne[17]=f("span",{class:"required-indicator"},"*",-1))]),J(f("select",{"onUpdate:modelValue":ne[4]||(ne[4]=pe=>g.value.gender=pe),disabled:m.value==="personal",required:""},[f("option",g8,b(y(o)==="en"?"Male":""),1),f("option",_8,b(y(o)==="en"?"Female":""),1)],8,m8),[[ct,g.value.gender]])]),g.value.gender==="female"?(B(),q("div",y8,[f("div",v8,[f("label",null,[J(f("input",{type:"checkbox","onUpdate:modelValue":ne[5]||(ne[5]=pe=>g.value.isPregnant=pe),disabled:m.value==="personal"},null,8,b8),[[ya,g.value.isPregnant]]),f("span",null,b(y(o)==="en"?"Is Pregnant?":"  "),1)])]),g.value.isPregnant?(B(),q("div",E8,[f("label",null,[lt(b(y(o)==="en"?"Estimated Due Date":"  ")+" ",1),ne[18]||(ne[18]=f("span",{class:"required-indicator"},"*",-1))]),J(f("input",{type:"date","onUpdate:modelValue":ne[6]||(ne[6]=pe=>g.value.estimatedDueDate=pe),disabled:m.value==="personal",required:""},null,8,w8),[[me,g.value.estimatedDueDate]])])):he("",!0)])):he("",!0),f("div",A8,[f("label",null,b(y(o)==="en"?"Relevant Medical History":"   "),1),J(f("textarea",{"onUpdate:modelValue":ne[7]||(ne[7]=pe=>g.value.medicalHistory=pe),rows:"3",disabled:m.value==="personal"},null,8,T8),[[me,g.value.medicalHistory]])]),f("div",I8,[f("label",null,b(y(o)==="en"?"Current Symptoms":" "),1),J(f("textarea",{"onUpdate:modelValue":ne[8]||(ne[8]=pe=>g.value.currentSymptoms=pe),rows:"3"},null,512),[[me,g.value.currentSymptoms]])]),V.value==="doctor"&&m.value==="general"?(B(),q("div",S8,[f("h3",C8,b(y(o)==="en"?"Occupational Exposure Context":"  "),1),f("div",x8,[f("label",null,b(y(o)==="en"?"Your positioning, shielding, etc. (Optional)":"    ()"),1),J(f("textarea",{"onUpdate:modelValue":ne[9]||(ne[9]=pe=>g.value.doctorAdditionalContext=pe),rows:"3"},null,512),[[me,g.value.doctorAdditionalContext]])])])):he("",!0),f("h3",k8,b(y(o)==="en"?"Scan to Consider (Optional for Patients)":"  ( )"),1),f("div",D8,[f("label",null,[lt(b(y(o)==="en"?"Place of Scan":" ")+" ",1),M.value?(B(),q("span",P8,"*")):he("",!0)]),J(f("select",{"onUpdate:modelValue":ne[10]||(ne[10]=pe=>g.value.scanPlace=pe),required:M.value},[f("option",O8,b(y(o)==="en"?"Select...":"..."),1),(B(),q(Je,null,nn(d,pe=>f("option",{key:pe.value,value:pe.value},b(y(o)==="en"?pe.en:pe.ar),9,N8)),64))],8,R8),[[ct,g.value.scanPlace]])]),T.value?(B(),q("div",F8,[f("label",null,[lt(b(y(o)==="en"?"Please specify other place":"   ")+" ",1),M.value?(B(),q("span",V8,"*")):he("",!0)]),J(f("input",{type:"text","onUpdate:modelValue":ne[11]||(ne[11]=pe=>g.value.otherScanPlaceDescription=pe),required:M.value},null,8,M8),[[me,g.value.otherScanPlaceDescription]])])):he("",!0),f("div",L8,[f("div",$8,[f("label",null,[lt(b(y(o)==="en"?"Scan Category":" ")+" ",1),M.value?(B(),q("span",U8,"*")):he("",!0)]),J(f("select",{"onUpdate:modelValue":ne[12]||(ne[12]=pe=>g.value.scanType=pe),required:M.value},[f("option",j8,b(y(o)==="en"?"CT Scan":" "),1),f("option",q8,b(y(o)==="en"?"X-ray":" "),1)],8,B8),[[ct,g.value.scanType]])]),f("div",z8,[f("label",null,[lt(b(y(o)==="en"?"Scan Protocol":" ")+" ",1),M.value?(B(),q("span",H8,"*")):he("",!0)]),J(f("select",{"onUpdate:modelValue":ne[13]||(ne[13]=pe=>g.value.subScanType=pe),required:M.value},[f("option",W8,b(y(o)==="en"?"Select...":"..."),1),(B(!0),q(Je,null,nn(S.value,pe=>(B(),q("option",{key:pe.value,value:pe.value},b(y(o)==="en"?pe.en:pe.ar),9,K8))),128))],8,G8),[[ct,g.value.subScanType]])])]),w.value?(B(),q("div",Y8,[f("label",null,[lt(b(y(o)==="en"?"Please specify scan protocol":"   ")+" ",1),M.value?(B(),q("span",Q8,"*")):he("",!0)]),J(f("input",{type:"text","onUpdate:modelValue":ne[14]||(ne[14]=pe=>g.value.otherScanDescription=pe),required:M.value},null,8,X8),[[me,g.value.otherScanDescription]])])):he("",!0),f("button",{type:"submit",disabled:v.value,class:"action-button"},b(v.value?y(o)==="en"?"Getting Advice...":"   ...":y(o)==="en"?"Get Advice":"  "),9,J8)],32),F.value?(B(),q("div",Z8,b(F.value),1)):he("",!0),C.value?(B(),q("div",eR,[C.value.Warning?(B(),q("div",tR,[f("h4",null,b(y(o)==="en"?"Important Note":" "),1),f("p",nR,b(C.value.Warning),1)])):he("",!0),f("div",rR,[C.value.patientCalculatedMsv!==null?(B(),q("div",sR,[f("div",iR,[f("h4",null,b(k.value),1),f("p",null,[f("strong",null,b(C.value.patientCalculatedMsv)+" mSv",1)])]),P.value?(B(),q("div",oR,[f("h4",null,b(N.value),1),f("p",null,[f("strong",null,b(C.value.doctorOccupationalMsv.toFixed(5))+" mSv",1)])])):he("",!0)])):he("",!0),f("div",aR,[f("h4",null,b(y(o)==="en"?"AI-Powered Advice":"   "),1),f("div",{innerHTML:R.value},null,8,uR)])]),C.value.patientCalculatedMsv!==null?(B(),q("div",lR,[f("button",{onClick:Fe,disabled:E.value,class:"action-button save-button"},b(E.value?y(o)==="en"?"Saving...":"... ":y(o)==="en"?"Save as Scan Record":"  "),9,cR),f("p",dR,b(y(o)==="en"?"This will create a new scan record with the estimated doses.":"        ."),1)])):he("",!0)])):he("",!0),f("p",fR,[f("a",{href:"#",onClick:ne[15]||(ne[15]=st(pe=>y(e).push("/dashboard"),["prevent"]))},b(y(o)==="en"?"Back to Dashboard":"   "),1)])])])],8,s8))}},pR=bt(hR,[["__scopeId","data-v-53526cd9"]]);/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function mR(t,e,n){return(e=_R(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gg(Object(n),!0).forEach(function(r){mR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gg(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gR(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _R(t){var e=gR(t,"string");return typeof e=="symbol"?e:e+""}const Wg=()=>{};let Hh={},Zb={},e2=null,t2={mark:Wg,measure:Wg};try{typeof window<"u"&&(Hh=window),typeof document<"u"&&(Zb=document),typeof MutationObserver<"u"&&(e2=MutationObserver),typeof performance<"u"&&(t2=performance)}catch{}const{userAgent:Kg=""}=Hh.navigator||{},gs=Hh,ot=Zb,Yg=e2,gu=t2;gs.document;const xr=!!ot.documentElement&&!!ot.head&&typeof ot.addEventListener=="function"&&typeof ot.createElement=="function",n2=~Kg.indexOf("MSIE")||~Kg.indexOf("Trident/");var yR=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,vR=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,r2={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},bR={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},s2=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Gt="classic",sc="duotone",ER="sharp",wR="sharp-duotone",i2=[Gt,sc,ER,wR],AR={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},TR={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},IR=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),SR={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},CR=["fak","fa-kit","fakd","fa-kit-duotone"],Qg={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},xR=["kit"],kR={kit:{"fa-kit":"fak"}},DR=["fak","fakd"],PR={kit:{fak:"fa-kit"}},Xg={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},_u={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},RR=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],OR=["fak","fa-kit","fakd","fa-kit-duotone"],NR={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},FR={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},VR={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},nf={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},MR=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],rf=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...RR,...MR],LR=["solid","regular","light","thin","duotone","brands"],o2=[1,2,3,4,5,6,7,8,9,10],$R=o2.concat([11,12,13,14,15,16,17,18,19,20]),UR=[...Object.keys(VR),...LR,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",_u.GROUP,_u.SWAP_OPACITY,_u.PRIMARY,_u.SECONDARY].concat(o2.map(t=>"".concat(t,"x"))).concat($R.map(t=>"w-".concat(t))),BR={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const wr="___FONT_AWESOME___",sf=16,a2="fa",u2="svg-inline--fa",Ws="data-fa-i2svg",of="data-fa-pseudo-element",jR="data-fa-pseudo-element-pending",Gh="data-prefix",Wh="data-icon",Jg="fontawesome-i2svg",qR="async",zR=["HTML","HEAD","STYLE","SCRIPT"],l2=(()=>{try{return!0}catch{return!1}})();function Ma(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[Gt]}})}const c2=X({},r2);c2[Gt]=X(X(X(X({},{"fa-duotone":"duotone"}),r2[Gt]),Qg.kit),Qg["kit-duotone"]);const HR=Ma(c2),af=X({},SR);af[Gt]=X(X(X(X({},{duotone:"fad"}),af[Gt]),Xg.kit),Xg["kit-duotone"]);const Zg=Ma(af),uf=X({},nf);uf[Gt]=X(X({},uf[Gt]),PR.kit);const Kh=Ma(uf),lf=X({},FR);lf[Gt]=X(X({},lf[Gt]),kR.kit);Ma(lf);const GR=yR,d2="fa-layers-text",WR=vR,KR=X({},AR);Ma(KR);const YR=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],sd=bR,QR=[...xR,...UR],Bo=gs.FontAwesomeConfig||{};function XR(t){var e=ot.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function JR(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}ot&&typeof ot.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,r]=e;const s=JR(XR(n));s!=null&&(Bo[r]=s)});const f2={styleDefault:"solid",familyDefault:Gt,cssPrefix:a2,replacementClass:u2,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Bo.familyPrefix&&(Bo.cssPrefix=Bo.familyPrefix);const $i=X(X({},f2),Bo);$i.autoReplaceSvg||($i.observeMutations=!1);const _e={};Object.keys(f2).forEach(t=>{Object.defineProperty(_e,t,{enumerable:!0,set:function(e){$i[t]=e,jo.forEach(n=>n(_e))},get:function(){return $i[t]}})});Object.defineProperty(_e,"familyPrefix",{enumerable:!0,set:function(t){$i.cssPrefix=t,jo.forEach(e=>e(_e))},get:function(){return $i.cssPrefix}});gs.FontAwesomeConfig=_e;const jo=[];function ZR(t){return jo.push(t),()=>{jo.splice(jo.indexOf(t),1)}}const Mr=sf,Un={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function e9(t){if(!t||!xr)return;const e=ot.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=ot.head.childNodes;let r=null;for(let s=n.length-1;s>-1;s--){const i=n[s],o=(i.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=i)}return ot.head.insertBefore(e,r),t}const t9="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function fa(){let t=12,e="";for(;t-- >0;)e+=t9[Math.random()*62|0];return e}function Xi(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function Yh(t){return t.classList?Xi(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function h2(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function n9(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(h2(t[n]),'" '),"").trim()}function ic(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function Qh(t){return t.size!==Un.size||t.x!==Un.x||t.y!==Un.y||t.rotate!==Un.rotate||t.flipX||t.flipY}function r9(t){let{transform:e,containerWidth:n,iconWidth:r}=t;const s={transform:"translate(".concat(n/2," 256)")},i="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),u={transform:"".concat(i," ").concat(o," ").concat(a)},c={transform:"translate(".concat(r/2*-1," -256)")};return{outer:s,inner:u,path:c}}function s9(t){let{transform:e,width:n=sf,height:r=sf,startCentered:s=!1}=t,i="";return s&&n2?i+="translate(".concat(e.x/Mr-n/2,"em, ").concat(e.y/Mr-r/2,"em) "):s?i+="translate(calc(-50% + ".concat(e.x/Mr,"em), calc(-50% + ").concat(e.y/Mr,"em)) "):i+="translate(".concat(e.x/Mr,"em, ").concat(e.y/Mr,"em) "),i+="scale(".concat(e.size/Mr*(e.flipX?-1:1),", ").concat(e.size/Mr*(e.flipY?-1:1),") "),i+="rotate(".concat(e.rotate,"deg) "),i}var i9=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function p2(){const t=a2,e=u2,n=_e.cssPrefix,r=_e.replacementClass;let s=i9;if(n!==t||r!==e){const i=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");s=s.replace(i,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return s}let e1=!1;function id(){_e.autoAddCss&&!e1&&(e9(p2()),e1=!0)}var o9={mixout(){return{dom:{css:p2,insertCss:id}}},hooks(){return{beforeDOMElementCreation(){id()},beforeI2svg(){id()}}}};const Ar=gs||{};Ar[wr]||(Ar[wr]={});Ar[wr].styles||(Ar[wr].styles={});Ar[wr].hooks||(Ar[wr].hooks={});Ar[wr].shims||(Ar[wr].shims=[]);var Bn=Ar[wr];const m2=[],g2=function(){ot.removeEventListener("DOMContentLoaded",g2),fl=1,m2.map(t=>t())};let fl=!1;xr&&(fl=(ot.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ot.readyState),fl||ot.addEventListener("DOMContentLoaded",g2));function a9(t){xr&&(fl?setTimeout(t,0):m2.push(t))}function La(t){const{tag:e,attributes:n={},children:r=[]}=t;return typeof t=="string"?h2(t):"<".concat(e," ").concat(n9(n),">").concat(r.map(La).join(""),"</").concat(e,">")}function t1(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var od=function(e,n,r,s){var i=Object.keys(e),o=i.length,a=n,u,c,d;for(r===void 0?(u=1,d=e[i[0]]):(u=0,d=r);u<o;u++)c=i[u],d=a(d,e[c],c,e);return d};function u9(t){const e=[];let n=0;const r=t.length;for(;n<r;){const s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){const i=t.charCodeAt(n++);(i&64512)==56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),n--)}else e.push(s)}return e}function cf(t){const e=u9(t);return e.length===1?e[0].toString(16):null}function l9(t,e){const n=t.length;let r=t.charCodeAt(e),s;return r>=55296&&r<=56319&&n>e+1&&(s=t.charCodeAt(e+1),s>=56320&&s<=57343)?(r-55296)*1024+s-56320+65536:r}function n1(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e},{})}function df(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:r=!1}=n,s=n1(e);typeof Bn.hooks.addPack=="function"&&!r?Bn.hooks.addPack(t,n1(e)):Bn.styles[t]=X(X({},Bn.styles[t]||{}),s),t==="fas"&&df("fa",e)}const{styles:ha,shims:c9}=Bn,_2=Object.keys(Kh),d9=_2.reduce((t,e)=>(t[e]=Object.keys(Kh[e]),t),{});let Xh=null,y2={},v2={},b2={},E2={},w2={};function f9(t){return~QR.indexOf(t)}function h9(t,e){const n=e.split("-"),r=n[0],s=n.slice(1).join("-");return r===t&&s!==""&&!f9(s)?s:null}const A2=()=>{const t=r=>od(ha,(s,i,o)=>(s[o]=od(i,r,{}),s),{});y2=t((r,s,i)=>(s[3]&&(r[s[3]]=i),s[2]&&s[2].filter(a=>typeof a=="number").forEach(a=>{r[a.toString(16)]=i}),r)),v2=t((r,s,i)=>(r[i]=i,s[2]&&s[2].filter(a=>typeof a=="string").forEach(a=>{r[a]=i}),r)),w2=t((r,s,i)=>{const o=s[2];return r[i]=i,o.forEach(a=>{r[a]=i}),r});const e="far"in ha||_e.autoFetchSvg,n=od(c9,(r,s)=>{const i=s[0];let o=s[1];const a=s[2];return o==="far"&&!e&&(o="fas"),typeof i=="string"&&(r.names[i]={prefix:o,iconName:a}),typeof i=="number"&&(r.unicodes[i.toString(16)]={prefix:o,iconName:a}),r},{names:{},unicodes:{}});b2=n.names,E2=n.unicodes,Xh=oc(_e.styleDefault,{family:_e.familyDefault})};ZR(t=>{Xh=oc(t.styleDefault,{family:_e.familyDefault})});A2();function Jh(t,e){return(y2[t]||{})[e]}function p9(t,e){return(v2[t]||{})[e]}function Ms(t,e){return(w2[t]||{})[e]}function T2(t){return b2[t]||{prefix:null,iconName:null}}function m9(t){const e=E2[t],n=Jh("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function _s(){return Xh}const I2=()=>({prefix:null,iconName:null,rest:[]});function g9(t){let e=Gt;const n=_2.reduce((r,s)=>(r[s]="".concat(_e.cssPrefix,"-").concat(s),r),{});return i2.forEach(r=>{(t.includes(n[r])||t.some(s=>d9[r].includes(s)))&&(e=r)}),e}function oc(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=Gt}=e,r=HR[n][t];if(n===sc&&!t)return"fad";const s=Zg[n][t]||Zg[n][r],i=t in Bn.styles?t:null;return s||i||null}function _9(t){let e=[],n=null;return t.forEach(r=>{const s=h9(_e.cssPrefix,r);s?n=s:r&&e.push(r)}),{iconName:n,rest:e}}function r1(t){return t.sort().filter((e,n,r)=>r.indexOf(e)===n)}function ac(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let r=null;const s=rf.concat(OR),i=r1(t.filter(h=>s.includes(h))),o=r1(t.filter(h=>!rf.includes(h))),a=i.filter(h=>(r=h,!s2.includes(h))),[u=null]=a,c=g9(i),d=X(X({},_9(o)),{},{prefix:oc(u,{family:c})});return X(X(X({},d),E9({values:t,family:c,styles:ha,config:_e,canonical:d,givenPrefix:r})),y9(n,r,d))}function y9(t,e,n){let{prefix:r,iconName:s}=n;if(t||!r||!s)return{prefix:r,iconName:s};const i=e==="fa"?T2(s):{},o=Ms(r,s);return s=i.iconName||o||s,r=i.prefix||r,r==="far"&&!ha.far&&ha.fas&&!_e.autoFetchSvg&&(r="fas"),{prefix:r,iconName:s}}const v9=i2.filter(t=>t!==Gt||t!==sc),b9=Object.keys(nf).filter(t=>t!==Gt).map(t=>Object.keys(nf[t])).flat();function E9(t){const{values:e,family:n,canonical:r,givenPrefix:s="",styles:i={},config:o={}}=t,a=n===sc,u=e.includes("fa-duotone")||e.includes("fad"),c=o.familyDefault==="duotone",d=r.prefix==="fad"||r.prefix==="fa-duotone";if(!a&&(u||c||d)&&(r.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(r.prefix="fab"),!r.prefix&&v9.includes(n)&&(Object.keys(i).find(m=>b9.includes(m))||o.autoFetchSvg)){const m=IR.get(n).defaultShortPrefixId;r.prefix=m,r.iconName=Ms(r.prefix,r.iconName)||r.iconName}return(r.prefix==="fa"||s==="fa")&&(r.prefix=_s()||"fas"),r}class w9{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const s=n.reduce(this._pullDefinitions,{});Object.keys(s).forEach(i=>{this.definitions[i]=X(X({},this.definitions[i]||{}),s[i]),df(i,s[i]);const o=Kh[Gt][i];o&&df(o,s[i]),A2()})}reset(){this.definitions={}}_pullDefinitions(e,n){const r=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(r).map(s=>{const{prefix:i,iconName:o,icon:a}=r[s],u=a[2];e[i]||(e[i]={}),u.length>0&&u.forEach(c=>{typeof c=="string"&&(e[i][c]=a)}),e[i][o]=a}),e}}let s1=[],mi={};const Ii={},A9=Object.keys(Ii);function T9(t,e){let{mixoutsTo:n}=e;return s1=t,mi={},Object.keys(Ii).forEach(r=>{A9.indexOf(r)===-1&&delete Ii[r]}),s1.forEach(r=>{const s=r.mixout?r.mixout():{};if(Object.keys(s).forEach(i=>{typeof s[i]=="function"&&(n[i]=s[i]),typeof s[i]=="object"&&Object.keys(s[i]).forEach(o=>{n[i]||(n[i]={}),n[i][o]=s[i][o]})}),r.hooks){const i=r.hooks();Object.keys(i).forEach(o=>{mi[o]||(mi[o]=[]),mi[o].push(i[o])})}r.provides&&r.provides(Ii)}),n}function ff(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];return(mi[t]||[]).forEach(o=>{e=o.apply(null,[e,...r])}),e}function Ks(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];(mi[t]||[]).forEach(i=>{i.apply(null,n)})}function ys(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return Ii[t]?Ii[t].apply(null,e):void 0}function hf(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||_s();if(e)return e=Ms(n,e)||e,t1(S2.definitions,n,e)||t1(Bn.styles,n,e)}const S2=new w9,I9=()=>{_e.autoReplaceSvg=!1,_e.observeMutations=!1,Ks("noAuto")},S9={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return xr?(Ks("beforeI2svg",t),ys("pseudoElements2svg",t),ys("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;_e.autoReplaceSvg===!1&&(_e.autoReplaceSvg=!0),_e.observeMutations=!0,a9(()=>{x9({autoReplaceSvgRoot:e}),Ks("watch",t)})}},C9={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Ms(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=oc(t[0]);return{prefix:n,iconName:Ms(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(_e.cssPrefix,"-"))>-1||t.match(GR))){const e=ac(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||_s(),iconName:Ms(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=_s();return{prefix:e,iconName:Ms(e,t)||t}}}},fn={noAuto:I9,config:_e,dom:S9,parse:C9,library:S2,findIconDefinition:hf,toHtml:La},x9=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=ot}=t;(Object.keys(Bn.styles).length>0||_e.autoFetchSvg)&&xr&&_e.autoReplaceSvg&&fn.dom.i2svg({node:e})};function uc(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>La(n))}}),Object.defineProperty(t,"node",{get:function(){if(!xr)return;const n=ot.createElement("div");return n.innerHTML=t.html,n.children}}),t}function k9(t){let{children:e,main:n,mask:r,attributes:s,styles:i,transform:o}=t;if(Qh(o)&&n.found&&!r.found){const{width:a,height:u}=n,c={x:a/u/2,y:.5};s.style=ic(X(X({},i),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:s,children:e}]}function D9(t){let{prefix:e,iconName:n,children:r,attributes:s,symbol:i}=t;const o=i===!0?"".concat(e,"-").concat(_e.cssPrefix,"-").concat(n):i;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:X(X({},s),{},{id:o}),children:r}]}]}function Zh(t){const{icons:{main:e,mask:n},prefix:r,iconName:s,transform:i,symbol:o,title:a,maskId:u,titleId:c,extra:d,watchable:h=!1}=t,{width:m,height:g}=n.found?n:e,v=DR.includes(r),E=[_e.replacementClass,s?"".concat(_e.cssPrefix,"-").concat(s):""].filter(U=>d.classes.indexOf(U)===-1).filter(U=>U!==""||!!U).concat(d.classes).join(" ");let A={children:[],attributes:X(X({},d.attributes),{},{"data-prefix":r,"data-icon":s,class:E,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})};const C=v&&!~d.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};h&&(A.attributes[Ws]=""),a&&(A.children.push({tag:"title",attributes:{id:A.attributes["aria-labelledby"]||"title-".concat(c||fa())},children:[a]}),delete A.attributes.title);const R=X(X({},A),{},{prefix:r,iconName:s,main:e,mask:n,maskId:u,transform:i,symbol:o,styles:X(X({},C),d.styles)}),{children:F,attributes:V}=n.found&&e.found?ys("generateAbstractMask",R)||{children:[],attributes:{}}:ys("generateAbstractIcon",R)||{children:[],attributes:{}};return R.children=F,R.attributes=V,o?D9(R):k9(R)}function i1(t){const{content:e,width:n,height:r,transform:s,title:i,extra:o,watchable:a=!1}=t,u=X(X(X({},o.attributes),i?{title:i}:{}),{},{class:o.classes.join(" ")});a&&(u[Ws]="");const c=X({},o.styles);Qh(s)&&(c.transform=s9({transform:s,startCentered:!0,width:n,height:r}),c["-webkit-transform"]=c.transform);const d=ic(c);d.length>0&&(u.style=d);const h=[];return h.push({tag:"span",attributes:u,children:[e]}),i&&h.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),h}function P9(t){const{content:e,title:n,extra:r}=t,s=X(X(X({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),i=ic(r.styles);i.length>0&&(s.style=i);const o=[];return o.push({tag:"span",attributes:s,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:ad}=Bn;function pf(t){const e=t[0],n=t[1],[r]=t.slice(4);let s=null;return Array.isArray(r)?s={tag:"g",attributes:{class:"".concat(_e.cssPrefix,"-").concat(sd.GROUP)},children:[{tag:"path",attributes:{class:"".concat(_e.cssPrefix,"-").concat(sd.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(_e.cssPrefix,"-").concat(sd.PRIMARY),fill:"currentColor",d:r[1]}}]}:s={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:e,height:n,icon:s}}const R9={found:!1,width:512,height:512};function O9(t,e){!l2&&!_e.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function mf(t,e){let n=e;return e==="fa"&&_e.styleDefault!==null&&(e=_s()),new Promise((r,s)=>{if(n==="fa"){const i=T2(t)||{};t=i.iconName||t,e=i.prefix||e}if(t&&e&&ad[e]&&ad[e][t]){const i=ad[e][t];return r(pf(i))}O9(t,e),r(X(X({},R9),{},{icon:_e.showMissingIcons&&t?ys("missingIconAbstract")||{}:{}}))})}const o1=()=>{},gf=_e.measurePerformance&&gu&&gu.mark&&gu.measure?gu:{mark:o1,measure:o1},Ao='FA "6.7.2"',N9=t=>(gf.mark("".concat(Ao," ").concat(t," begins")),()=>C2(t)),C2=t=>{gf.mark("".concat(Ao," ").concat(t," ends")),gf.measure("".concat(Ao," ").concat(t),"".concat(Ao," ").concat(t," begins"),"".concat(Ao," ").concat(t," ends"))};var e0={begin:N9,end:C2};const Ru=()=>{};function a1(t){return typeof(t.getAttribute?t.getAttribute(Ws):null)=="string"}function F9(t){const e=t.getAttribute?t.getAttribute(Gh):null,n=t.getAttribute?t.getAttribute(Wh):null;return e&&n}function V9(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(_e.replacementClass)}function M9(){return _e.autoReplaceSvg===!0?Ou.replace:Ou[_e.autoReplaceSvg]||Ou.replace}function L9(t){return ot.createElementNS("http://www.w3.org/2000/svg",t)}function $9(t){return ot.createElement(t)}function x2(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?L9:$9}=e;if(typeof t=="string")return ot.createTextNode(t);const r=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(i){r.setAttribute(i,t.attributes[i])}),(t.children||[]).forEach(function(i){r.appendChild(x2(i,{ceFn:n}))}),r}function U9(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const Ou={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(x2(n),e)}),e.getAttribute(Ws)===null&&_e.keepOriginalSource){let n=ot.createComment(U9(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~Yh(e).indexOf(_e.replacementClass))return Ou.replace(t);const r=new RegExp("".concat(_e.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const i=n[0].attributes.class.split(" ").reduce((o,a)=>(a===_e.replacementClass||a.match(r)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=i.toSvg.join(" "),i.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",i.toNode.join(" "))}const s=n.map(i=>La(i)).join(`
`);e.setAttribute(Ws,""),e.innerHTML=s}};function u1(t){t()}function k2(t,e){const n=typeof e=="function"?e:Ru;if(t.length===0)n();else{let r=u1;_e.mutateApproach===qR&&(r=gs.requestAnimationFrame||u1),r(()=>{const s=M9(),i=e0.begin("mutate");t.map(s),i(),n()})}}let t0=!1;function D2(){t0=!0}function _f(){t0=!1}let hl=null;function l1(t){if(!Yg||!_e.observeMutations)return;const{treeCallback:e=Ru,nodeCallback:n=Ru,pseudoElementsCallback:r=Ru,observeMutationsRoot:s=ot}=t;hl=new Yg(i=>{if(t0)return;const o=_s();Xi(i).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!a1(a.addedNodes[0])&&(_e.searchPseudoElements&&r(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&_e.searchPseudoElements&&r(a.target.parentNode),a.type==="attributes"&&a1(a.target)&&~YR.indexOf(a.attributeName))if(a.attributeName==="class"&&F9(a.target)){const{prefix:u,iconName:c}=ac(Yh(a.target));a.target.setAttribute(Gh,u||o),c&&a.target.setAttribute(Wh,c)}else V9(a.target)&&n(a.target)})}),xr&&hl.observe(s,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function B9(){hl&&hl.disconnect()}function j9(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((r,s)=>{const i=s.split(":"),o=i[0],a=i.slice(1);return o&&a.length>0&&(r[o]=a.join(":").trim()),r},{})),n}function q9(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"";let s=ac(Yh(t));return s.prefix||(s.prefix=_s()),e&&n&&(s.prefix=e,s.iconName=n),s.iconName&&s.prefix||(s.prefix&&r.length>0&&(s.iconName=p9(s.prefix,t.innerText)||Jh(s.prefix,cf(t.innerText))),!s.iconName&&_e.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(s.iconName=t.firstChild.data)),s}function z9(t){const e=Xi(t.attributes).reduce((s,i)=>(s.name!=="class"&&s.name!=="style"&&(s[i.name]=i.value),s),{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return _e.autoA11y&&(n?e["aria-labelledby"]="".concat(_e.replacementClass,"-title-").concat(r||fa()):(e["aria-hidden"]="true",e.focusable="false")),e}function H9(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Un,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function c1(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:r,rest:s}=q9(t),i=z9(t),o=ff("parseNodeAttributes",{},t);let a=e.styleParser?j9(t):[];return X({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:r,transform:Un,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:a,attributes:i}},o)}const{styles:G9}=Bn;function P2(t){const e=_e.autoReplaceSvg==="nest"?c1(t,{styleParser:!1}):c1(t);return~e.extra.classes.indexOf(d2)?ys("generateLayersText",t,e):ys("generateSvgReplacementMutation",t,e)}function W9(){return[...CR,...rf]}function d1(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!xr)return Promise.resolve();const n=ot.documentElement.classList,r=d=>n.add("".concat(Jg,"-").concat(d)),s=d=>n.remove("".concat(Jg,"-").concat(d)),i=_e.autoFetchSvg?W9():s2.concat(Object.keys(G9));i.includes("fa")||i.push("fa");const o=[".".concat(d2,":not([").concat(Ws,"])")].concat(i.map(d=>".".concat(d,":not([").concat(Ws,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=Xi(t.querySelectorAll(o))}catch{}if(a.length>0)r("pending"),s("complete");else return Promise.resolve();const u=e0.begin("onTree"),c=a.reduce((d,h)=>{try{const m=P2(h);m&&d.push(m)}catch(m){l2||m.name==="MissingIcon"&&console.error(m)}return d},[]);return new Promise((d,h)=>{Promise.all(c).then(m=>{k2(m,()=>{r("active"),r("complete"),s("pending"),typeof e=="function"&&e(),u(),d()})}).catch(m=>{u(),h(m)})})}function K9(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;P2(t).then(n=>{n&&k2([n],e)})}function Y9(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=(e||{}).icon?e:hf(e||{});let{mask:s}=n;return s&&(s=(s||{}).icon?s:hf(s||{})),t(r,X(X({},n),{},{mask:s}))}}const Q9=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Un,symbol:r=!1,mask:s=null,maskId:i=null,title:o=null,titleId:a=null,classes:u=[],attributes:c={},styles:d={}}=e;if(!t)return;const{prefix:h,iconName:m,icon:g}=t;return uc(X({type:"icon"},t),()=>(Ks("beforeDOMElementCreation",{iconDefinition:t,params:e}),_e.autoA11y&&(o?c["aria-labelledby"]="".concat(_e.replacementClass,"-title-").concat(a||fa()):(c["aria-hidden"]="true",c.focusable="false")),Zh({icons:{main:pf(g),mask:s?pf(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:h,iconName:m,transform:X(X({},Un),n),symbol:r,title:o,maskId:i,titleId:a,extra:{attributes:c,styles:d,classes:u}})))};var X9={mixout(){return{icon:Y9(Q9)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=d1,t.nodeCallback=K9,t}}},provides(t){t.i2svg=function(e){const{node:n=ot,callback:r=()=>{}}=e;return d1(n,r)},t.generateSvgReplacementMutation=function(e,n){const{iconName:r,title:s,titleId:i,prefix:o,transform:a,symbol:u,mask:c,maskId:d,extra:h}=n;return new Promise((m,g)=>{Promise.all([mf(r,o),c.iconName?mf(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(v=>{let[E,A]=v;m([e,Zh({icons:{main:E,mask:A},prefix:o,iconName:r,transform:a,symbol:u,maskId:d,title:s,titleId:i,extra:h,watchable:!0})])}).catch(g)})},t.generateAbstractIcon=function(e){let{children:n,attributes:r,main:s,transform:i,styles:o}=e;const a=ic(o);a.length>0&&(r.style=a);let u;return Qh(i)&&(u=ys("generateAbstractTransformGrouping",{main:s,transform:i,containerWidth:s.width,iconWidth:s.width})),n.push(u||s.icon),{children:n,attributes:r}}}},J9={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return uc({type:"layer"},()=>{Ks("beforeDOMElementCreation",{assembler:t,params:e});let r=[];return t(s=>{Array.isArray(s)?s.map(i=>{r=r.concat(i.abstract)}):r=r.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(_e.cssPrefix,"-layers"),...n].join(" ")},children:r}]})}}}},Z9={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:r=[],attributes:s={},styles:i={}}=e;return uc({type:"counter",content:t},()=>(Ks("beforeDOMElementCreation",{content:t,params:e}),P9({content:t.toString(),title:n,extra:{attributes:s,styles:i,classes:["".concat(_e.cssPrefix,"-layers-counter"),...r]}})))}}}},e7={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Un,title:r=null,classes:s=[],attributes:i={},styles:o={}}=e;return uc({type:"text",content:t},()=>(Ks("beforeDOMElementCreation",{content:t,params:e}),i1({content:t,transform:X(X({},Un),n),title:r,extra:{attributes:i,styles:o,classes:["".concat(_e.cssPrefix,"-layers-text"),...s]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:r,transform:s,extra:i}=n;let o=null,a=null;if(n2){const u=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();o=c.width/u,a=c.height/u}return _e.autoA11y&&!r&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,i1({content:e.innerHTML,width:o,height:a,transform:s,title:r,extra:i,watchable:!0})])}}};const t7=new RegExp('"',"ug"),f1=[1105920,1112319],h1=X(X(X(X({},{FontAwesome:{normal:"fas",400:"fas"}}),TR),BR),NR),yf=Object.keys(h1).reduce((t,e)=>(t[e.toLowerCase()]=h1[e],t),{}),n7=Object.keys(yf).reduce((t,e)=>{const n=yf[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function r7(t){const e=t.replace(t7,""),n=l9(e,0),r=n>=f1[0]&&n<=f1[1],s=e.length===2?e[0]===e[1]:!1;return{value:cf(s?e[0]:e),isSecondary:r||s}}function s7(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(e),s=isNaN(r)?"normal":r;return(yf[n]||{})[s]||n7[n]}function p1(t,e){const n="".concat(jR).concat(e.replace(":","-"));return new Promise((r,s)=>{if(t.getAttribute(n)!==null)return r();const o=Xi(t.children).filter(m=>m.getAttribute(of)===e)[0],a=gs.getComputedStyle(t,e),u=a.getPropertyValue("font-family"),c=u.match(WR),d=a.getPropertyValue("font-weight"),h=a.getPropertyValue("content");if(o&&!c)return t.removeChild(o),r();if(c&&h!=="none"&&h!==""){const m=a.getPropertyValue("content");let g=s7(u,d);const{value:v,isSecondary:E}=r7(m),A=c[0].startsWith("FontAwesome");let C=Jh(g,v),R=C;if(A){const F=m9(v);F.iconName&&F.prefix&&(C=F.iconName,g=F.prefix)}if(C&&!E&&(!o||o.getAttribute(Gh)!==g||o.getAttribute(Wh)!==R)){t.setAttribute(n,R),o&&t.removeChild(o);const F=H9(),{extra:V}=F;V.attributes[of]=e,mf(C,g).then(U=>{const M=Zh(X(X({},F),{},{icons:{main:U,mask:I2()},prefix:g,iconName:R,extra:V,watchable:!0})),S=ot.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(S,t.firstChild):t.appendChild(S),S.outerHTML=M.map(w=>La(w)).join(`
`),t.removeAttribute(n),r()}).catch(s)}else r()}else r()})}function i7(t){return Promise.all([p1(t,"::before"),p1(t,"::after")])}function o7(t){return t.parentNode!==document.head&&!~zR.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(of)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function m1(t){if(xr)return new Promise((e,n)=>{const r=Xi(t.querySelectorAll("*")).filter(o7).map(i7),s=e0.begin("searchPseudoElements");D2(),Promise.all(r).then(()=>{s(),_f(),e()}).catch(()=>{s(),_f(),n()})})}var a7={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=m1,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=ot}=e;_e.searchPseudoElements&&m1(n)}}};let g1=!1;var u7={mixout(){return{dom:{unwatch(){D2(),g1=!0}}}},hooks(){return{bootstrap(){l1(ff("mutationObserverCallbacks",{}))},noAuto(){B9()},watch(t){const{observeMutationsRoot:e}=t;g1?_f():l1(ff("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const _1=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,r)=>{const s=r.toLowerCase().split("-"),i=s[0];let o=s.slice(1).join("-");if(i&&o==="h")return n.flipX=!0,n;if(i&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(i){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var l7={mixout(){return{parse:{transform:t=>_1(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=_1(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:r,containerWidth:s,iconWidth:i}=e;const o={transform:"translate(".concat(s/2," 256)")},a="translate(".concat(r.x*32,", ").concat(r.y*32,") "),u="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),c="rotate(".concat(r.rotate," 0 0)"),d={transform:"".concat(a," ").concat(u," ").concat(c)},h={transform:"translate(".concat(i/2*-1," -256)")},m={outer:o,inner:d,path:h};return{tag:"g",attributes:X({},m.outer),children:[{tag:"g",attributes:X({},m.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:X(X({},n.icon.attributes),m.path)}]}]}}}};const ud={x:0,y:0,width:"100%",height:"100%"};function y1(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function c7(t){return t.tag==="g"?t.children:[t]}var d7={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),r=n?ac(n.split(" ").map(s=>s.trim())):I2();return r.prefix||(r.prefix=_s()),t.mask=r,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:r,main:s,mask:i,maskId:o,transform:a}=e;const{width:u,icon:c}=s,{width:d,icon:h}=i,m=r9({transform:a,containerWidth:d,iconWidth:u}),g={tag:"rect",attributes:X(X({},ud),{},{fill:"white"})},v=c.children?{children:c.children.map(y1)}:{},E={tag:"g",attributes:X({},m.inner),children:[y1(X({tag:c.tag,attributes:X(X({},c.attributes),m.path)},v))]},A={tag:"g",attributes:X({},m.outer),children:[E]},C="mask-".concat(o||fa()),R="clip-".concat(o||fa()),F={tag:"mask",attributes:X(X({},ud),{},{id:C,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[g,A]},V={tag:"defs",children:[{tag:"clipPath",attributes:{id:R},children:c7(h)},F]};return n.push(V,{tag:"rect",attributes:X({fill:"currentColor","clip-path":"url(#".concat(R,")"),mask:"url(#".concat(C,")")},ud)}),{children:n,attributes:r}}}},f7={provides(t){let e=!1;gs.matchMedia&&(e=gs.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:X(X({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const i=X(X({},s),{},{attributeName:"opacity"}),o={tag:"circle",attributes:X(X({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:X(X({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:X(X({},i),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:X(X({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:X(X({},i),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:X(X({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:X(X({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},h7={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),r=n===null?!1:n===""?!0:n;return t.symbol=r,t}}}},p7=[o9,X9,J9,Z9,e7,a7,u7,l7,d7,f7,h7];T9(p7,{mixoutsTo:fn});fn.noAuto;fn.config;const m7=fn.library;fn.dom;const vf=fn.parse;fn.findIconDefinition;fn.toHtml;const g7=fn.icon;fn.layer;fn.text;fn.counter;function v1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v1(Object(n),!0).forEach(function(r){Jt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function y7(t){var e=_7(t,"string");return typeof e=="symbol"?e:e+""}function pl(t){"@babel/helpers - typeof";return pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pl(t)}function Jt(t,e,n){return e=y7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v7(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function b7(t,e){if(t==null)return{};var n=v7(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var E7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},R2={exports:{}};(function(t){(function(e){var n=function(C,R,F){if(!c(R)||h(R)||m(R)||g(R)||u(R))return R;var V,U=0,M=0;if(d(R))for(V=[],M=R.length;U<M;U++)V.push(n(C,R[U],F));else{V={};for(var S in R)Object.prototype.hasOwnProperty.call(R,S)&&(V[C(S,F)]=n(C,R[S],F))}return V},r=function(C,R){R=R||{};var F=R.separator||"_",V=R.split||/(?=[A-Z])/;return C.split(V).join(F)},s=function(C){return v(C)?C:(C=C.replace(/[\-_\s]+(.)?/g,function(R,F){return F?F.toUpperCase():""}),C.substr(0,1).toLowerCase()+C.substr(1))},i=function(C){var R=s(C);return R.substr(0,1).toUpperCase()+R.substr(1)},o=function(C,R){return r(C,R).toLowerCase()},a=Object.prototype.toString,u=function(C){return typeof C=="function"},c=function(C){return C===Object(C)},d=function(C){return a.call(C)=="[object Array]"},h=function(C){return a.call(C)=="[object Date]"},m=function(C){return a.call(C)=="[object RegExp]"},g=function(C){return a.call(C)=="[object Boolean]"},v=function(C){return C=C-0,C===C},E=function(C,R){var F=R&&"process"in R?R.process:R;return typeof F!="function"?C:function(V,U){return F(V,C,U)}},A={camelize:s,decamelize:o,pascalize:i,depascalize:o,camelizeKeys:function(C,R){return n(E(s,R),C)},decamelizeKeys:function(C,R){return n(E(o,R),C,R)},pascalizeKeys:function(C,R){return n(E(i,R),C)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};t.exports?t.exports=A:e.humps=A})(E7)})(R2);var w7=R2.exports,A7=["class","style"];function T7(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),s=w7.camelize(n.slice(0,r)),i=n.slice(r+1).trim();return e[s]=i,e},{})}function I7(t){return t.split(/\s+/).reduce(function(e,n){return e[n]=!0,e},{})}function O2(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var r=(t.children||[]).map(function(u){return O2(u)}),s=Object.keys(t.attributes||{}).reduce(function(u,c){var d=t.attributes[c];switch(c){case"class":u.class=I7(d);break;case"style":u.style=T7(d);break;default:u.attrs[c]=d}return u},{attrs:{},class:{},style:{}});n.class;var i=n.style,o=i===void 0?{}:i,a=b7(n,A7);return Si(t.tag,cr(cr(cr({},e),{},{class:s.class,style:cr(cr({},s.style),o)},s.attrs),a),r)}var N2=!1;try{N2=!0}catch{}function S7(){if(!N2&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function ld(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Jt({},t,e):{}}function C7(t){var e,n=(e={"fa-spin":t.spin,"fa-pulse":t.pulse,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-li":t.listItem,"fa-inverse":t.inverse,"fa-flip":t.flip===!0,"fa-flip-horizontal":t.flip==="horizontal"||t.flip==="both","fa-flip-vertical":t.flip==="vertical"||t.flip==="both"},Jt(Jt(Jt(Jt(Jt(Jt(Jt(Jt(Jt(Jt(e,"fa-".concat(t.size),t.size!==null),"fa-rotate-".concat(t.rotation),t.rotation!==null),"fa-pull-".concat(t.pull),t.pull!==null),"fa-swap-opacity",t.swapOpacity),"fa-bounce",t.bounce),"fa-shake",t.shake),"fa-beat",t.beat),"fa-fade",t.fade),"fa-beat-fade",t.beatFade),"fa-flash",t.flash),Jt(Jt(e,"fa-spin-pulse",t.spinPulse),"fa-spin-reverse",t.spinReverse));return Object.keys(n).map(function(r){return n[r]?r:null}).filter(function(r){return r})}function b1(t){if(t&&pl(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(vf.icon)return vf.icon(t);if(t===null)return null;if(pl(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}var St=Ff({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(e){return[!0,!1,"horizontal","vertical","both"].indexOf(e)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(e){return["right","left"].indexOf(e)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(e){return[90,180,270].indexOf(Number.parseInt(e,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(e){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(e)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},titleId:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function(e,n){var r=n.attrs,s=Ee(function(){return b1(e.icon)}),i=Ee(function(){return ld("classes",C7(e))}),o=Ee(function(){return ld("transform",typeof e.transform=="string"?vf.transform(e.transform):e.transform)}),a=Ee(function(){return ld("mask",b1(e.mask))}),u=Ee(function(){return g7(s.value,cr(cr(cr(cr({},i.value),o.value),a.value),{},{symbol:e.symbol,title:e.title,titleId:e.titleId,maskId:e.maskId}))});Ze(u,function(d){if(!d)return S7("Could not find one or more icon(s)",s.value,a.value)},{immediate:!0});var c=Ee(function(){return u.value?O2(u.value.abstract[0],{},r):null});return function(){return c.value}}});const x7=["dir"],k7={class:"modal-title"},D7={class:"form-group"},P7={class:"form-group"},R7={class:"form-group"},O7={class:"form-group"},N7={value:"male"},F7={value:"female"},V7={key:0,class:"pregnancy-section"},M7={class:"form-group checkbox-group"},L7={key:0,class:"form-group"},$7={class:"form-group"},U7={class:"form-group"},B7={class:"modal-actions"},j7=["disabled"],q7={__name:"PatientFormModal",props:{show:Boolean,patient:Object,isSaving:Boolean},emits:["close","save"],setup(t,{emit:e}){const n=t,r=e,s=Me("currentLanguage"),i=Qn({id:null,name:"",birthDate:"",gender:"male",weight:null,isPregnant:!1,estimatedDueDate:"",medicalHistory:"",allergies:""});Ze(()=>n.show,a=>{a&&(n.patient?(i.id=n.patient.id,i.name=n.patient.name,i.gender=n.patient.gender,i.weight=n.patient.weight||null,i.isPregnant=n.patient.isPregnant||!1,i.birthDate=n.patient.birthDate?.toDate?n.patient.birthDate.toDate().toISOString().split("T")[0]:"",i.estimatedDueDate=n.patient.estimatedDueDate?.toDate?n.patient.estimatedDueDate.toDate().toISOString().split("T")[0]:"",i.medicalHistory=Array.isArray(n.patient.medicalHistory)?n.patient.medicalHistory.join(", "):"",i.allergies=Array.isArray(n.patient.allergies)?n.patient.allergies.join(", "):""):Object.assign(i,{id:null,name:"",birthDate:"",gender:"male",weight:null,isPregnant:!1,estimatedDueDate:"",medicalHistory:"",allergies:""}))},{immediate:!0}),Ze(()=>i.isPregnant,a=>{a||(i.estimatedDueDate="")});const o=()=>{if(!i.name||!i.birthDate){alert("Name and Date of Birth are required.");return}if(i.isPregnant&&!i.estimatedDueDate){alert("Please provide the estimated due date for the pregnancy.");return}(i.gender==="male"||!i.isPregnant)&&(i.isPregnant=!1,i.estimatedDueDate=null);const a={...i,weight:Number(i.weight)||null,birthDate:new Date(i.birthDate),estimatedDueDate:i.estimatedDueDate?new Date(i.estimatedDueDate):null,medicalHistory:i.medicalHistory.split(",").map(u=>u.trim()).filter(Boolean),allergies:i.allergies.split(",").map(u=>u.trim()).filter(Boolean)};r("save",a)};return(a,u)=>(B(),Dn(vs,{name:"modal-fade"},{default:Tr(()=>[t.show?(B(),q("div",{key:0,class:"modal-overlay",onClick:u[10]||(u[10]=st(c=>a.$emit("close"),["self"]))},[f("div",{class:"modal-content",dir:y(s)==="ar"?"rtl":"ltr"},[f("button",{onClick:u[0]||(u[0]=c=>a.$emit("close")),class:"close-button"},""),f("h3",k7,b(t.patient?"Edit Patient":"Add New Patient"),1),f("form",{onSubmit:st(o,["prevent"]),class:"patient-form"},[f("div",D7,[f("label",null,b(y(s)==="en"?"Name":""),1),J(f("input",{type:"text","onUpdate:modelValue":u[1]||(u[1]=c=>i.name=c),required:""},null,512),[[me,i.name]])]),f("div",P7,[f("label",null,b(y(s)==="en"?"Weight (kg)":" ()"),1),J(f("input",{type:"number",step:"0.1","onUpdate:modelValue":u[2]||(u[2]=c=>i.weight=c),placeholder:"e.g., 70.5"},null,512),[[me,i.weight]])]),f("div",R7,[f("label",null,b(y(s)==="en"?"Date of Birth":" "),1),J(f("input",{type:"date","onUpdate:modelValue":u[3]||(u[3]=c=>i.birthDate=c),required:""},null,512),[[me,i.birthDate]])]),f("div",O7,[f("label",null,b(y(s)==="en"?"Gender":""),1),J(f("select",{"onUpdate:modelValue":u[4]||(u[4]=c=>i.gender=c)},[f("option",N7,b(y(s)==="en"?"Male":""),1),f("option",F7,b(y(s)==="en"?"Female":""),1)],512),[[ct,i.gender]])]),i.gender==="female"?(B(),q("div",V7,[f("div",M7,[f("label",null,[J(f("input",{type:"checkbox","onUpdate:modelValue":u[5]||(u[5]=c=>i.isPregnant=c)},null,512),[[ya,i.isPregnant]]),f("span",null,b(y(s)==="en"?"Currently Pregnant?":"   "),1)])]),i.isPregnant?(B(),q("div",L7,[f("label",null,b(y(s)==="en"?"Estimated Due Date":"  "),1),J(f("input",{type:"date","onUpdate:modelValue":u[6]||(u[6]=c=>i.estimatedDueDate=c),required:""},null,512),[[me,i.estimatedDueDate]])])):he("",!0)])):he("",!0),f("div",$7,[f("label",null,b(y(s)==="en"?"Medical History (comma-separated)":" "),1),J(f("textarea",{"onUpdate:modelValue":u[7]||(u[7]=c=>i.medicalHistory=c),rows:"3"},null,512),[[me,i.medicalHistory]])]),f("div",U7,[f("label",null,b(y(s)==="en"?"Allergies (comma-separated)":""),1),J(f("textarea",{"onUpdate:modelValue":u[8]||(u[8]=c=>i.allergies=c),rows:"3"},null,512),[[me,i.allergies]])]),f("div",B7,[f("button",{type:"submit",class:"action-button",disabled:t.isSaving},b(t.isSaving?"Saving...":"Save"),9,j7),f("button",{type:"button",onClick:u[9]||(u[9]=c=>a.$emit("close")),class:"action-button secondary"}," Cancel ")])],32)],8,x7)])):he("",!0)]),_:1}))}},z7=bt(q7,[["__scopeId","data-v-8459b92e"]]),H7=["dir"],G7={key:0,class:"patient-context-display"},W7={key:0,class:"form-row pregnancy-section"},K7={class:"form-group checkbox-group"},Y7={key:0,class:"form-group"},Q7={class:"form-group"},X7={disabled:"",value:""},J7=["value"],Z7={key:1,class:"form-group"},eO={class:"form-row"},tO={class:"form-group"},nO={value:"X-ray"},rO={value:"CT"},sO={class:"form-group"},iO={disabled:"",value:""},oO=["value"],aO={key:2,class:"form-group"},uO=["placeholder"],lO={key:3,class:"form-group"},cO={class:"form-group"},dO={class:"form-row"},fO={class:"form-group"},hO=["placeholder"],pO={class:"form-group"},mO=["placeholder"],gO={class:"form-group"},_O={class:"form-group"},yO={class:"form-group"},vO={class:"modal-actions"},bO=["disabled"],EO={__name:"ScanFormModal",props:{show:Boolean,scan:Object,isSaving:Boolean,patient:{type:Object,default:null}},emits:["close","save"],setup(t,{emit:e}){const n=t,r=e,s=Me("currentLanguage"),i={CT:[{value:"Abdomen & Pelvis",en:"Abdomen & Pelvis",ar:" "},{value:"Brain with contrast",en:"Brain with contrast",ar:"  "},{value:"Angiography CTA",en:"Angiography CTA",ar:"  CTA"},{value:"Urography",en:"Urography",ar:"  "},{value:"Enterography",en:"Enterography",ar:" "},{value:"Other",en:"Other...",ar:"..."}],"X-ray":[{value:"Barium Enema",en:"Barium Enema",ar:"  "},{value:"IV Urogram (IVP)",en:"IV Urogram (IVP)",ar:"   (IVP)"},{value:"HSG",en:"HSG",ar:"  (HSG)"},{value:"VCUG",en:"VCUG",ar:"   (VCUG)"},{value:"Other",en:"Other...",ar:"..."}]},o=[{value:"head",en:"Head",ar:""},{value:"neck",en:"Neck",ar:""},{value:"chest",en:"Chest",ar:""},{value:"abdomen",en:"Abdomen",ar:""},{value:"pelvis",en:"Pelvis",ar:""},{value:"spine",en:"Spine",ar:" "},{value:"upper_extremity",en:"Upper Extremity",ar:" "},{value:"lower_extremity",en:"Lower Extremity",ar:" "},{value:"other",en:"Other",ar:""}],a={patient:{CT:{"Abdomen & Pelvis":14,"Brain with contrast":2,"Angiography CTA":12,Urography:8,Enterography:8,default:6},"X-ray":{"Barium Enema":7,"IV Urogram (IVP)":2.5,HSG:1.5,VCUG:1,default:.5}},doctor:{CT:{default:1e-5},"X-ray":{"Barium Enema":1e-4,"IV Urogram (IVP)":5e-5,HSG:2e-4,VCUG:15e-5,default:5e-5}}},u=()=>new Date().toISOString().split("T")[0],c=Qn({id:null,isPregnant:!1,pregnancyMonth:null,scanType:"X-ray",subScanType:"",otherScanDescription:"",scanPlace:"",otherScanPlaceDescription:"",numberOfScans:1,scanDate:u(),patientDose:null,doctorDose:null,reason:"",notes:"",doctorAdditionalContext:""}),d=Ee(()=>i[c.scanType]||[]),h=Ee(()=>c.subScanType==="Other"),m=Ee(()=>c.scanPlace==="other");Ze(()=>n.show,E=>{if(E&&(Object.assign(c,{id:null,isPregnant:!1,pregnancyMonth:null,scanType:"X-ray",subScanType:"",otherScanDescription:"",scanPlace:"",otherScanPlaceDescription:"",numberOfScans:1,scanDate:u(),patientDose:null,doctorDose:null,reason:"",notes:"",doctorAdditionalContext:""}),n.scan)){c.id=n.scan.id,c.isPregnant=n.scan.isPregnant||!1,c.pregnancyMonth=n.scan.pregnancyMonth||null,c.scanType=n.scan.scanType;const A=n.scan.scanDate?.toDate?n.scan.scanDate.toDate():new Date(n.scan.scanDate);c.scanDate=isNaN(A)?u():A.toISOString().split("T")[0],c.patientDose=n.scan.patientDose,c.doctorDose=n.scan.doctorDose,c.reason=n.scan.reason,c.notes=n.scan.notes,c.doctorAdditionalContext=n.scan.doctorAdditionalContext,c.numberOfScans=n.scan.numberOfScans||1;const C=n.scan.scanDetail;(d.value||[]).some(U=>U.value===C)?c.subScanType=C:C&&(c.subScanType="Other",c.otherScanDescription=C);const F=n.scan.scanPlace;o.some(U=>U.value===F)?c.scanPlace=F:F&&(c.scanPlace="other",c.otherScanPlaceDescription=F)}}),Ze(()=>c.scanType,(E,A)=>{E!==A&&(c.subScanType="",c.otherScanDescription="")});const g=E=>{try{const A=c.subScanType==="Other"?"default":c.subScanType,R=a[E][c.scanType];if(!R)return null;let F=R[A]??R.default;return F===void 0?null:c.scanType==="X-ray"?F*c.numberOfScans:F}catch(A){return console.error("Error retrieving dose from table:",A),null}},v=()=>{if(!c.scanDate||!c.scanPlace||m.value&&!c.otherScanPlaceDescription||!c.subScanType||h.value&&!c.otherScanDescription){alert("Please fill all required scan details.");return}if(c.scanType==="X-ray"&&(c.numberOfScans===null||c.numberOfScans<1)){alert(s.value==="en"?"Number of scans must be at least 1 for X-ray.":"       1  .");return}if((c.patientDose===null||c.patientDose==="")&&(c.patientDose=g("patient")),(c.doctorDose===null||c.doctorDose==="")&&(c.doctorDose=g("doctor")),c.patientDose===null||c.doctorDose===null){alert(s.value==="en"?"Could not find a typical dose value for the selected scan. Please enter the dose manually.":"       .    .");return}const E=c.scanDate.split("-"),A=new Date(Date.UTC(E[0],parseInt(E[1],10)-1,parseInt(E[2],10),12,0,0));if(isNaN(A.getTime())){alert("Invalid date format. Please select a valid date.");return}const C={id:c.id,isPregnant:c.isPregnant,pregnancyMonth:c.pregnancyMonth,scanType:c.scanType,scanDetail:c.subScanType==="Other"?c.otherScanDescription:c.subScanType,scanPlace:c.scanPlace==="other"?c.otherScanPlaceDescription:c.scanPlace,numberOfScans:c.scanType==="X-ray"?Number(c.numberOfScans):1,scanDate:Ne.fromDate(A),patientDose:Number(c.patientDose),doctorDose:Number(c.doctorDose),reason:c.reason,notes:c.notes,doctorAdditionalContext:c.doctorAdditionalContext};r("save",C)};return(E,A)=>(B(),Dn(vs,{name:"modal-fade"},{default:Tr(()=>[t.show?(B(),q("div",{key:0,class:"modal-overlay",onClick:A[16]||(A[16]=st(C=>E.$emit("close"),["self"]))},[f("div",{class:"modal-content",dir:y(s)==="ar"?"rtl":"ltr"},[f("button",{class:"close-modal-button",onClick:A[0]||(A[0]=C=>E.$emit("close"))},""),f("h3",null,b(t.scan?y(s)==="en"?"Edit Scan Record":"  ":y(s)==="en"?"Add New Scan Record":"   "),1),t.patient?(B(),q("div",G7,[lt(b(y(s)==="en"?"For Patient":"")+": ",1),f("strong",null,b(t.patient.name)+" ("+b(t.patient.weight?`${t.patient.weight} kg`:"Weight N/A")+")",1)])):he("",!0),f("form",{onSubmit:st(v,["prevent"]),class:"scan-form"},[t.patient?.gender==="female"?(B(),q("div",W7,[f("div",K7,[f("label",null,[J(f("input",{type:"checkbox","onUpdate:modelValue":A[1]||(A[1]=C=>c.isPregnant=C)},null,512),[[ya,c.isPregnant]]),f("span",null,b(y(s)==="en"?"Is Pregnant?":"  "),1)])]),c.isPregnant?(B(),q("div",Y7,[f("label",null,b(y(s)==="en"?"Month of Pregnancy":" "),1),J(f("input",{type:"number","onUpdate:modelValue":A[2]||(A[2]=C=>c.pregnancyMonth=C),min:"1",max:"9",placeholder:"1-9"},null,512),[[me,c.pregnancyMonth,void 0,{number:!0}]])])):he("",!0)])):he("",!0),f("div",Q7,[f("label",null,b(y(s)==="en"?"Place of Scan":" "),1),J(f("select",{"onUpdate:modelValue":A[3]||(A[3]=C=>c.scanPlace=C),required:""},[f("option",X7,b(y(s)==="en"?"Select...":"..."),1),(B(),q(Je,null,nn(o,C=>f("option",{key:C.value,value:C.value},b(y(s)==="en"?C.en:C.ar),9,J7)),64))],512),[[ct,c.scanPlace]])]),m.value?(B(),q("div",Z7,[f("label",null,b(y(s)==="en"?"Please specify other place":"   "),1),J(f("input",{type:"text","onUpdate:modelValue":A[4]||(A[4]=C=>c.otherScanPlaceDescription=C),required:""},null,512),[[me,c.otherScanPlaceDescription]])])):he("",!0),f("div",eO,[f("div",tO,[f("label",null,b(y(s)==="en"?"Scan Category":" "),1),J(f("select",{"onUpdate:modelValue":A[5]||(A[5]=C=>c.scanType=C),required:""},[f("option",nO,b(y(s)==="en"?"X-ray":" "),1),f("option",rO,b(y(s)==="en"?"CT":" "),1)],512),[[ct,c.scanType]])]),f("div",sO,[f("label",null,b(y(s)==="en"?"Scan Protocol":" "),1),J(f("select",{"onUpdate:modelValue":A[6]||(A[6]=C=>c.subScanType=C),required:""},[f("option",iO,b(y(s)==="en"?"Select...":"..."),1),(B(!0),q(Je,null,nn(d.value,C=>(B(),q("option",{key:C.value,value:C.value},b(y(s)==="en"?C.en:C.ar),9,oO))),128))],512),[[ct,c.subScanType]])])]),h.value?(B(),q("div",aO,[f("label",null,b(y(s)==="en"?"Please specify scan protocol":"   "),1),J(f("input",{type:"text","onUpdate:modelValue":A[7]||(A[7]=C=>c.otherScanDescription=C),placeholder:y(s)==="en"?"e.g., Chest X-ray":":   ",required:""},null,8,uO),[[me,c.otherScanDescription]])])):he("",!0),c.scanType==="X-ray"?(B(),q("div",lO,[f("label",null,b(y(s)==="en"?"Number of Scans":" "),1),J(f("input",{type:"number","onUpdate:modelValue":A[8]||(A[8]=C=>c.numberOfScans=C),min:"1",required:""},null,512),[[me,c.numberOfScans,void 0,{number:!0}]])])):he("",!0),f("div",cO,[f("label",null,b(y(s)==="en"?"Scan Date":" "),1),J(f("input",{type:"date","onUpdate:modelValue":A[9]||(A[9]=C=>c.scanDate=C),required:""},null,512),[[me,c.scanDate]])]),f("div",dO,[f("div",fO,[f("label",null,b(y(s)==="en"?"Patient's Dose (mSv)":"  (mSv)"),1),J(f("input",{type:"number",step:"0.0001","onUpdate:modelValue":A[10]||(A[10]=C=>c.patientDose=C),placeholder:y(s)==="en"?"Leave blank for typical value":"    "},null,8,hO),[[me,c.patientDose,void 0,{number:!0}]])]),f("div",pO,[f("label",null,b(y(s)==="en"?"Doctor's Dose (mSv)":"  (mSv)"),1),J(f("input",{type:"number","onUpdate:modelValue":A[11]||(A[11]=C=>c.doctorDose=C),placeholder:y(s)==="en"?"Leave blank for AI estimate":"    "},null,8,mO),[[me,c.doctorDose,void 0,{number:!0}]])])]),f("div",gO,[f("label",null,b(y(s)==="en"?"Reason for Scan":" "),1),J(f("textarea",{"onUpdate:modelValue":A[12]||(A[12]=C=>c.reason=C),rows:"2"},null,512),[[me,c.reason]])]),f("div",_O,[f("label",null,b(y(s)==="en"?"Additional Notes":" "),1),J(f("textarea",{"onUpdate:modelValue":A[13]||(A[13]=C=>c.notes=C),rows:"3"},null,512),[[me,c.notes]])]),f("div",yO,[f("label",null,b(y(s)==="en"?"Details affecting your exposure (optional)":"    ()"),1),J(f("textarea",{"onUpdate:modelValue":A[14]||(A[14]=C=>c.doctorAdditionalContext=C),rows:"2"},null,512),[[me,c.doctorAdditionalContext]])]),f("div",vO,[f("button",{type:"submit",class:"action-button",disabled:t.isSaving},b(t.isSaving?y(s)==="en"?"Saving...":" ...":y(s)==="en"?"Save":""),9,bO),f("button",{type:"button",onClick:A[15]||(A[15]=C=>E.$emit("close")),class:"action-button secondary"},b(y(s)==="en"?"Cancel":""),1)])],32)],8,H7)])):he("",!0)]),_:1}))}},wO=bt(EO,[["__scopeId","data-v-48552722"]]),AO={class:"modal-content delete-confirm-modal"},TO={class:"modal-title"},IO={class:"warning-text"},SO={class:"modal-actions"},CO={__name:"ConfirmDeleteModal",props:{show:Boolean,title:String,message:String},emits:["close","confirm"],setup(t){const e=Me("triggerMsvRecalculation"),n=Me("currentLanguage");return(r,s)=>(B(),Dn(vs,{name:"modal-fade"},{default:Tr(()=>[t.show?(B(),q("div",{key:0,class:"modal-overlay",onClick:s[2]||(s[2]=st(i=>r.$emit("close"),["self"]))},[f("div",AO,[f("h3",TO,b(t.title),1),f("p",null,b(t.message),1),f("p",IO,b(y(n)==="en"?"This action cannot be undone.":"     ."),1),f("div",SO,[f("button",{onClick:s[0]||(s[0]=i=>r.$emit("close")),class:"action-button secondary"},b(y(n)==="en"?"Cancel":""),1),f("button",{onClick:s[1]||(s[1]=i=>{r.$emit("confirm"),y(e)()}),class:"action-button delete-button-confirm"},b(y(n)==="en"?"Delete":""),1)])])])):he("",!0)]),_:1}))}},ml=bt(CO,[["__scopeId","data-v-8046b31b"]]),xO=["dir"],kO={key:0},DO={class:"patient-details-grid"},PO={class:"detail-item"},RO={class:"detail-label"},OO={class:"detail-value"},NO={class:"detail-item"},FO={class:"detail-label"},VO={class:"detail-value"},MO={class:"scans-list-container"},LO={key:0,class:"loading-message"},$O={key:1,class:"no-scans-message"},UO={key:2,class:"scans-list"},BO={class:"scan-info"},jO={class:"scan-type-place"},qO={class:"scan-type"},zO={class:"scan-place"},HO={class:"scan-date"},GO={class:"scan-dose"},WO={class:"scan-actions"},KO=["onClick"],YO=["onClick"],QO={__name:"PatientDetailsModal",props:{show:Boolean,patient:Object},emits:["close","scan-saved"],setup(t,{emit:e}){const n=t,r=e,s=Yi(),i=Me("currentLanguage"),o=Me("triggerMsvRecalculation"),a=Ae([]),u=Ae(null),c=Ae(null),d=Ae(!1),h=Ae(!1),m=Ee(()=>n.patient?.id),g=async()=>{if(!m.value){a.value=[];return}const V=await s.fetchScansForPatient(m.value);a.value=V||[]};Ze(()=>n.show,V=>{V&&m.value&&g()});const v=async V=>{if(!n.patient?.id){alert("Error: No patient selected to save this scan for.");return}const U={...V,patientId:n.patient.id};(U.id?await s.updateScan(U.id,U):await s.createScan(U))?(d.value=!1,await g(),r("scan-saved"),o&&o()):alert(`Error saving patient scan: ${s.error}`)},E=async()=>{if(!c.value?.id)return;await s.deleteScan(c.value.id)?(h.value=!1,await g(),r("scan-saved"),o&&o()):alert(`Failed to delete scan: ${s.error}`)};function A(){u.value=null,d.value=!0}function C(V){u.value=V,d.value=!0}function R(V){c.value=V,h.value=!0}const F=V=>!V||!V.toDate?"N/A":V.toDate().toLocaleDateString(i.value==="ar"?"ar-EG":"en-US");return(V,U)=>(B(),q(Je,null,[ke(vs,{name:"modal-fade"},{default:Tr(()=>[t.show?(B(),q("div",{key:0,class:"modal-overlay",onClick:U[1]||(U[1]=st(M=>V.$emit("close"),["self"]))},[f("div",{class:"modal-content-details",dir:y(i)==="ar"?"rtl":"ltr"},[f("button",{class:"close-modal-button",onClick:U[0]||(U[0]=M=>V.$emit("close"))},""),t.patient?(B(),q("div",kO,[f("h3",null,[lt(b(y(i)==="en"?"Scan History for":"  ")+" ",1),f("strong",null,b(t.patient.name),1)]),f("p",null,b(y(i)==="en"?"Review past scans or add a new record.":"      ."),1),f("div",DO,[f("div",PO,[f("span",RO,b(y(i)==="en"?"Gender":""),1),f("span",OO,b(t.patient.gender||"N/A"),1)]),f("div",NO,[f("span",FO,b(y(i)==="en"?"Weight":""),1),f("span",VO,b(t.patient.weight?`${t.patient.weight} kg`:"N/A"),1)])]),f("button",{onClick:A,class:"add-scan-button"},[ke(y(St),{icon:"plus"}),lt(" "+b(y(i)==="en"?"Add New Scan":"  "),1)]),f("div",MO,[y(s).loading?(B(),q("div",LO,[ke(y(St),{icon:"spinner",spin:""}),lt(" "+b(y(i)==="en"?"Loading scans...":"  ..."),1)])):a.value.length===0?(B(),q("div",$O,b(y(i)==="en"?"No scans recorded for this patient yet.":"      ."),1)):(B(),q("ul",UO,[(B(!0),q(Je,null,nn(a.value,M=>(B(),q("li",{key:M.id,class:"scan-item"},[f("div",BO,[f("span",jO,[f("span",qO,b(M.scanType),1),f("span",zO,"of the "+b(M.scanPlace||"N/A"),1)]),f("span",HO,b(F(M.scanDate)),1),f("span",GO,b(y(i)==="en"?"Dose:":":")+" "+b(M.patientDose)+" mSv",1)]),f("div",WO,[f("button",{onClick:S=>C(M),class:"action-button-icon edit-button"},[ke(y(St),{icon:"edit"})],8,KO),f("button",{onClick:S=>R(M),class:"action-button-icon delete-button"},[ke(y(St),{icon:"trash-alt"})],8,YO)])]))),128))]))])])):he("",!0)],8,xO)])):he("",!0)]),_:1}),ke(wO,{show:d.value,patient:t.patient,scan:u.value,"is-saving":y(s).loading,onClose:U[2]||(U[2]=M=>d.value=!1),onSave:v},null,8,["show","patient","scan","is-saving"]),ke(ml,{show:h.value,title:y(i)==="en"?"Delete Scan":" ",message:`${y(i)==="en"?"Are you sure you want to delete this scan from":"       "} ${F(c.value?.scanDate)}?`,onClose:U[3]||(U[3]=M=>h.value=!1),onConfirm:E},null,8,["show","title","message"])],64))}},XO=bt(QO,[["__scopeId","data-v-e5fe2d03"]]),JO={class:"patient-list-page"},ZO={class:"patient-list-main-content"},eN={class:"patient-list-card"},tN=["dir"],nN={key:0,class:"loading-message"},rN={key:1,class:"no-patients-message"},sN={key:2,class:"patient-table-container"},iN={class:"patient-table"},oN={class:"details-column"},aN={class:"details-column"},uN={class:"details-column"},lN={class:"details-column"},cN={class:"action-buttons-wrapper"},dN=["onClick","title"],fN=["onClick","title"],hN=["onClick","title"],pN=["onClick","title"],mN={class:"switch-link-container"},gN={__name:"PatientsView",setup(t){const e=wn(),n=Yi(),r=bs(),s=Me("currentLanguage"),i=Ae([]),o=Ae(null),a=Ae(null),u=Ae(null),c=Ae(!1),d=Ae(!1),h=Ae(!1),m=Ee(()=>e.user?.uid),g=async()=>{const M=await n.fetchPatientsForDoctor();M&&(i.value=M)},v=M=>{if(!M?.toDate)return"N/A";const S=M.toDate(),w=new Date;let T=w.getFullYear()-S.getFullYear(),k=w.getMonth()-S.getMonth();if(w.getDate()<S.getDate()&&k--,k<0&&(T--,k+=12),T>=2)return`${T} ${s.value==="ar"?"":"years"}`;{const N=s.value==="ar"?"":"year",P=s.value==="ar"?"":"months",x=s.value==="ar"?"":"month";return T>0?`${T} ${N}, ${k} ${k===1?x:P}`:k>0?`${k} ${k===1?x:P}`:s.value==="ar"?"  ":"Less than a month"}},E=async M=>{const{id:S,...w}=M;let T=!1;S?T=await n.updatePatientProfile(S,w):T=!!await n.addNewPatient(w),T?(c.value=!1,await g()):alert(`Failed to save patient. Error: ${n.error}`)},A=async()=>{if(!o.value?.id)return;await n.deletePatientProfile(o.value.id)?(h.value=!1,await g()):alert(`Failed to delete patient. Error: ${n.error}`)};function C(){u.value=null,c.value=!0}function R(M){u.value=M,c.value=!0}function F(M){a.value=M,d.value=!0}function V(M){o.value=M,h.value=!0}function U(M){M&&r.push({name:"recommend",query:{patientId:M}})}return Ze(m,M=>{M&&g()},{immediate:!0}),(M,S)=>(B(),q("div",JO,[f("div",ZO,[f("div",eN,[f("h2",null,b(y(s)==="en"?"Manage Patients":" "),1),f("p",null,b(y(s)==="en"?"Add new patients or view existing records":"       ."),1),f("button",{onClick:C,class:"add-new-patient-button"},b(y(s)==="en"?"Add New Patient":"  "),1),f("div",{class:"patient-list-section",dir:y(s)==="ar"?"rtl":"ltr"},[f("h3",null,b(y(s)==="en"?"Existing Patients":" "),1),y(n).loading?(B(),q("div",nN,[ke(y(St),{icon:"spinner",spin:""}),lt(" "+b(y(s)==="en"?"Loading patients...":"  ..."),1)])):!i.value||i.value.length===0?(B(),q("div",rN,b(y(s)==="en"?"No patients added yet.":"     ."),1)):(B(),q("div",sN,[f("table",iN,[f("thead",null,[f("tr",null,[f("th",null,b(y(s)==="en"?"Name":""),1),f("th",null,b(y(s)==="en"?"Age":""),1),f("th",null,b(y(s)==="en"?"Weight":""),1),f("th",null,b(y(s)==="en"?"Gender":""),1),f("th",oN,b(y(s)==="en"?"Medical History":" "),1),f("th",aN,b(y(s)==="en"?"Allergies":""),1),f("th",null,b(y(s)==="en"?"Actions":""),1)])]),f("tbody",null,[(B(!0),q(Je,null,nn(i.value,w=>(B(),q("tr",{key:w.id},[f("td",null,b(w.name??"N/A"),1),f("td",null,b(v(w.birthDate)),1),f("td",null,b(w.weight?`${w.weight} kg`:"N/A"),1),f("td",null,b(y(s)==="en"?(w.gender?.charAt(0).toUpperCase()??"")+(w.gender?.slice(1)??"N/A"):w.gender==="male"?"":""),1),f("td",uN,b(w.medicalHistory?.join(", ")||(y(s)==="en"?"None":" ")),1),f("td",lN,b(w.allergies?.join(", ")||(y(s)==="en"?"None":" ")),1),f("td",null,[f("div",cN,[f("button",{onClick:T=>F(w),class:"action-button-sm view-button",title:y(s)==="en"?"View Scan History":"  "},[ke(y(St),{icon:"eye"})],8,dN),f("button",{onClick:T=>R(w),class:"action-button-sm edit-button",title:y(s)==="en"?"Edit Patient Details":"  "},[ke(y(St),{icon:"edit"})],8,fN),f("button",{onClick:T=>V(w),class:"action-button-sm delete-button",title:y(s)==="en"?"Delete Patient":" "},[ke(y(St),{icon:"trash-alt"})],8,hN),f("button",{onClick:T=>U(w.id),class:"action-button-sm recommend-button",title:y(s)==="en"?"Get Recommendation":"  "},[ke(y(St),{icon:"file-medical"})],8,pN)])])]))),128))])])]))],8,tN),f("div",mN,[f("a",{href:"#",onClick:S[0]||(S[0]=st(w=>y(r).push("/dashboard"),["prevent"]))},b(y(s)==="en"?"Back to dashboard":"   "),1)])])]),ke(z7,{show:c.value,patient:u.value,"is-saving":y(n).loading,onClose:S[1]||(S[1]=w=>c.value=!1),onSave:E},null,8,["show","patient","is-saving"]),ke(XO,{show:d.value,patient:a.value,onClose:S[2]||(S[2]=w=>d.value=!1),onScanSaved:g},null,8,["show","patient"]),ke(ml,{show:h.value,title:y(s)==="en"?"Delete Patient":" ",message:`${y(s)==="en"?"Are you sure you want to delete":"    "} ${o.value?.name??"this patient"}?`,onClose:S[3]||(S[3]=w=>h.value=!1),onConfirm:A},null,8,["show","title","message"])]))}},_N=bt(gN,[["__scopeId","data-v-63db406d"]]),yN={key:0,class:"loading-container"},vN={key:0,class:"role-modal-backdrop"},bN={class:"role-modal"},EN={class:"form-group"},wN={value:"",disabled:""},AN={value:"doctor"},TN={value:"patient"},IN={class:"form-group"},SN={class:"form-group"},CN={value:"",disabled:""},xN={value:"male"},kN={value:"female"},DN={class:"form-group"},PN=["placeholder"],RN={class:"form-group"},ON=["placeholder"],NN=["disabled"],FN={key:1},VN={class:"dashboard-main-content"},MN={class:"dashboard-card"},LN=["dir"],$N=["dir"],UN={class:"dashboard-features"},BN=["dir"],jN=["dir"],qN=["dir"],zN=["dir"],HN=["dir"],GN=["dir"],WN={__name:"DashboardView",setup(t){const e=wn(),n=Yi(),r=bs(),s=Ae({role:null,birthDate:"",gender:"",allergies:"",medicalHistory:""}),i=Ee(()=>!e.isAuthReady||e.isProfileLoading),o=Ee(()=>e.user?!e.isProfileComplete:!1),a=Ee(()=>e.role),u=Me("currentLanguage"),c=async()=>{const{uid:h,email:m,displayName:g}=e.user,{role:v,birthDate:E,gender:A,allergies:C,medicalHistory:R}=s.value;if(!v||!E||!A){alert("Please fill out all required fields: Role, Birth Date, and Gender.");return}const F={email:m,displayName:g,role:v,birthDate:Ne.fromDate(new Date(E)),gender:A,allergies:C.split(",").map(U=>U.trim()).filter(Boolean),medicalHistory:R.split(",").map(U=>U.trim()).filter(Boolean)};await n.setUserProfile(h,F)?e.setUserProfile(F):alert(`Failed to save profile. Error: ${n.error}`)},d=async()=>{await e.logout(),r.push("/signin")};return(h,m)=>(B(),q("div",null,[i.value?(B(),q("div",yN,[f("p",null,b(y(u)==="en"?"Verifying session...":"   ..."),1),ke(y(St),{icon:"spinner",spin:"",size:"2x"})])):(B(),q(Je,{key:1},[o.value?(B(),q("div",vN,[f("div",bN,[f("h2",null,b(y(u)==="en"?"Complete Your Profile":"  "),1),f("div",EN,[f("label",null,b(y(u)==="en"?"I am a:":":"),1),J(f("select",{"onUpdate:modelValue":m[0]||(m[0]=g=>s.value.role=g)},[f("option",wN,b(y(u)==="en"?"-- Select Role --":"--   --"),1),f("option",AN,b(y(u)==="en"?"Doctor":""),1),f("option",TN,b(y(u)==="en"?"Patient":""),1)],512),[[ct,s.value.role]])]),f("div",IN,[f("label",null,b(y(u)==="en"?"Birth Date":" "),1),J(f("input",{type:"date","onUpdate:modelValue":m[1]||(m[1]=g=>s.value.birthDate=g)},null,512),[[me,s.value.birthDate]])]),f("div",SN,[f("label",null,b(y(u)==="en"?"Gender":""),1),J(f("select",{"onUpdate:modelValue":m[2]||(m[2]=g=>s.value.gender=g)},[f("option",CN,b(y(u)==="en"?"-- Select Gender --":"--   --"),1),f("option",xN,b(y(u)==="en"?"Male":""),1),f("option",kN,b(y(u)==="en"?"Female":""),1)],512),[[ct,s.value.gender]])]),f("div",DN,[f("label",null,b(y(u)==="en"?"Allergies (comma-separated)":" ( )"),1),J(f("textarea",{"onUpdate:modelValue":m[3]||(m[3]=g=>s.value.allergies=g),rows:"2",placeholder:y(u)==="en"?"e.g., Iodine-Based Dyes":":  "},null,8,PN),[[me,s.value.allergies]])]),f("div",RN,[f("label",null,b(y(u)==="en"?"Medical History (comma-separated)":"  ( )"),1),J(f("textarea",{"onUpdate:modelValue":m[4]||(m[4]=g=>s.value.medicalHistory=g),rows:"2",placeholder:y(u)==="en"?"e.g., Diabetes, Asthma":":  , "},null,8,ON),[[me,s.value.medicalHistory]])]),f("button",{class:"action-button",onClick:c,disabled:y(n).loading},[y(n).loading?(B(),Dn(y(St),{key:0,icon:"spinner",spin:""})):(B(),q("span",FN,b(y(u)==="en"?"Save & Continue":" "),1))],8,NN)])])):he("",!0),f("div",{class:is(["dashboard-page dashboard-blur-area",{"is-blurred":o.value}])},[f("main",VN,[f("section",MN,[f("h2",{dir:y(u)==="ar"?"rtl":"ltr"},b(y(u)==="en"?"Welcome to mSv Dose Tracker":"      "),9,LN),f("p",{dir:y(u)==="ar"?"rtl":"ltr"},b(y(u)==="en"?"Your comprehensive tool for managing radiation exposure.":"    ."),9,$N),f("div",UN,[f("div",{class:"feature-item",onClick:m[5]||(m[5]=g=>y(r).push("/recommend"))},[m[8]||(m[8]=f("i",{class:"fas fa-file-medical"},null,-1)),f("h3",{dir:y(u)==="ar"?"rtl":"ltr"},b(y(u)==="en"?"Get Scan Recommendation":"  "),9,BN),f("p",{dir:y(u)==="ar"?"rtl":"ltr"},b(y(u)==="en"?"Use AI to get recommendations on the necessity of radiological scans.":"         ."),9,jN)]),a.value==="doctor"?(B(),q("div",{key:0,class:"feature-item",onClick:m[6]||(m[6]=g=>y(r).push("/patients"))},[m[9]||(m[9]=f("i",{class:"fas fa-users"},null,-1)),f("h3",{dir:y(u)==="ar"?"rtl":"ltr"},b(y(u)==="en"?"Manage Patients":" "),9,qN),f("p",{dir:y(u)==="ar"?"rtl":"ltr"},b(y(u)==="en"?"View, add, and manage your patient records and their scan histories.":"      ."),9,zN)])):he("",!0),f("div",{class:"feature-item",onClick:m[7]||(m[7]=g=>y(r).push("/profile"))},[m[10]||(m[10]=f("i",{class:"fas fa-user"},null,-1)),f("h3",{dir:y(u)==="ar"?"rtl":"ltr"},b(y(u)==="en"?"View Profile":"  "),9,HN),f("p",{dir:y(u)==="ar"?"rtl":"ltr"},b(y(u)==="en"?"Review your personal details and dose history.":"    ."),9,GN)])]),f("button",{onClick:d,class:"action-button secondary logout-button"},b(y(u)==="en"?"Logout":" "),1)])])],2)],64))]))}},KN=bt(WN,[["__scopeId","data-v-2c9adee3"]]),YN={class:"reset-password-page"},QN={class:"reset-password-main-content"},XN={class:"reset-password-card"},JN=["dir"],ZN=["dir"],eF={class:"form-group"},tF=["dir"],nF=["placeholder","dir"],rF=["disabled"],sF={key:0},iF={key:1},oF=["dir"],aF=["dir"],uF=["dir"],lF={__name:"ResetPasswordView",setup(t){const e=bs(),n=wn(),r=Me("currentLanguage"),s=Ae(""),i=async()=>{await n.sendPasswordReset(s.value)},o=()=>{e.push("/signin")};return(a,u)=>(B(),q("div",YN,[f("main",QN,[f("section",XN,[f("h2",{dir:y(r)==="ar"?"rtl":"ltr"},b(y(r)==="en"?"Reset Your Password":"   "),9,JN),f("p",{dir:y(r)==="ar"?"rtl":"ltr"},b(y(r)==="en"?"Enter your email address to receive a password reset link.":"         ."),9,ZN),f("form",{onSubmit:st(i,["prevent"]),class:"reset-password-form"},[f("div",eF,[f("label",{for:"email",dir:y(r)==="ar"?"rtl":"ltr"},b(y(r)==="en"?"Email Address":"  "),9,tF),J(f("input",{type:"email",id:"email","onUpdate:modelValue":u[0]||(u[0]=c=>s.value=c),placeholder:y(r)==="en"?"Enter your email":"  ",dir:y(r)==="ar"?"rtl":"ltr",required:""},null,8,nF),[[me,s.value]])]),f("button",{class:"action-button primary",type:"submit",disabled:y(n).loading},[y(n).loading?(B(),q("span",sF,b(y(r)==="en"?"Sending Link...":"  ..."),1)):(B(),q("span",iF,b(y(r)==="en"?"Send Reset Link":"   "),1))],8,rF)],32),y(n).error?(B(),q("div",{key:0,class:"message error-message",dir:y(r)==="ar"?"rtl":"ltr"},b(y(n).error),9,oF)):he("",!0),y(n).successMessage?(B(),q("div",{key:1,class:"message success-message",dir:y(r)==="ar"?"rtl":"ltr"},b(y(n).successMessage),9,aF)):he("",!0),f("p",{class:"switch-link-container",dir:y(r)==="ar"?"rtl":"ltr"},[lt(b(y(r)==="en"?"Remembered your password?":"   ")+" ",1),f("a",{href:"#",onClick:st(o,["prevent"])},b(y(r)==="en"?"Sign In":" "),1)],8,uF)])])]))}},cF=bt(lF,[["__scopeId","data-v-73a48bd7"]]),dF=["dir"],fF={class:"modal-title"},hF={class:"form-group"},pF={value:"doctor"},mF={value:"patient"},gF={class:"form-group"},_F={class:"form-group"},yF={class:"form-group"},vF={value:"male"},bF={value:"female"},EF={key:0,class:"pregnancy-section"},wF={class:"form-group checkbox-group"},AF={key:0,class:"form-group"},TF={class:"form-group"},IF={class:"form-group"},SF={class:"modal-actions"},CF={type:"submit",class:"action-button"},xF={__name:"ProfileFormModal",props:{show:Boolean,profileData:{type:Object,default:()=>null}},emits:["close","save"],setup(t,{emit:e}){const n=t,r=e,s=Me("currentLanguage"),i=Qn({role:"",birthDate:"",gender:"male",weight:null,isPregnant:!1,estimatedDueDate:"",allergies:"",medicalHistory:""});Ze(()=>n.show,a=>{a&&n.profileData&&(i.role=n.profileData.role||"patient",i.birthDate=n.profileData.birthDate||"",i.gender=n.profileData.gender||"male",i.weight=n.profileData.weight||null,i.isPregnant=n.profileData.isPregnant||!1,i.estimatedDueDate=n.profileData.estimatedDueDate||"",i.allergies=Array.isArray(n.profileData.allergies)?n.profileData.allergies.join(", "):"",i.medicalHistory=Array.isArray(n.profileData.medicalHistory)?n.profileData.medicalHistory.join(", "):"")},{immediate:!0}),Ze(()=>i.gender,a=>{a==="male"&&(i.isPregnant=!1,i.estimatedDueDate="")}),Ze(()=>i.isPregnant,a=>{a||(i.estimatedDueDate="")});const o=()=>{if(!i.role||!i.birthDate||!i.gender){alert("Role, Birth Date, and Gender are required.");return}if(i.isPregnant&&!i.estimatedDueDate){alert("Estimated due date is required for pregnant patients.");return}r("save",i)};return(a,u)=>(B(),Dn(vs,{name:"modal-fade"},{default:Tr(()=>[t.show?(B(),q("div",{key:0,class:"modal-overlay",onClick:u[10]||(u[10]=st(c=>r("close"),["self"]))},[f("div",{class:"modal-content",dir:y(s)==="ar"?"rtl":"ltr"},[f("button",{class:"close-button",onClick:u[0]||(u[0]=c=>r("close"))},""),f("h3",fF,b(y(s)==="en"?"Edit Profile":"  "),1),f("form",{onSubmit:st(o,["prevent"]),class:"profile-form"},[f("div",hF,[f("label",null,b(y(s)==="en"?"Role":""),1),J(f("select",{"onUpdate:modelValue":u[1]||(u[1]=c=>i.role=c),required:""},[f("option",pF,b(y(s)==="en"?"Doctor":""),1),f("option",mF,b(y(s)==="en"?"Patient":""),1)],512),[[ct,i.role]])]),f("div",gF,[f("label",null,b(y(s)==="en"?"Weight (kg)":" ()"),1),J(f("input",{type:"number",step:"0.1","onUpdate:modelValue":u[2]||(u[2]=c=>i.weight=c),placeholder:"e.g., 70.5"},null,512),[[me,i.weight]])]),f("div",_F,[f("label",null,b(y(s)==="en"?"Birth Date":" "),1),J(f("input",{type:"date","onUpdate:modelValue":u[3]||(u[3]=c=>i.birthDate=c),required:""},null,512),[[me,i.birthDate]])]),f("div",yF,[f("label",null,b(y(s)==="en"?"Gender":""),1),J(f("select",{"onUpdate:modelValue":u[4]||(u[4]=c=>i.gender=c),required:""},[f("option",vF,b(y(s)==="en"?"Male":""),1),f("option",bF,b(y(s)==="en"?"Female":""),1)],512),[[ct,i.gender]])]),i.gender==="female"?(B(),q("div",EF,[f("div",wF,[f("label",null,[J(f("input",{type:"checkbox","onUpdate:modelValue":u[5]||(u[5]=c=>i.isPregnant=c)},null,512),[[ya,i.isPregnant]]),f("span",null,b(y(s)==="en"?"Currently Pregnant?":"   "),1)])]),i.isPregnant?(B(),q("div",AF,[f("label",null,b(y(s)==="en"?"Estimated Due Date":"  "),1),J(f("input",{type:"date","onUpdate:modelValue":u[6]||(u[6]=c=>i.estimatedDueDate=c),required:""},null,512),[[me,i.estimatedDueDate]])])):he("",!0)])):he("",!0),f("div",TF,[f("label",null,b(y(s)==="en"?"Allergies (comma-separated)":" ( )"),1),J(f("textarea",{"onUpdate:modelValue":u[7]||(u[7]=c=>i.allergies=c),rows:"2"},null,512),[[me,i.allergies]])]),f("div",IF,[f("label",null,b(y(s)==="en"?"Medical History (comma-separated)":"  ( )"),1),J(f("textarea",{"onUpdate:modelValue":u[8]||(u[8]=c=>i.medicalHistory=c),rows:"2"},null,512),[[me,i.medicalHistory]])]),f("div",SF,[f("button",{type:"button",onClick:u[9]||(u[9]=c=>r("close")),class:"action-button secondary"},b(y(s)==="en"?"Cancel":""),1),f("button",CF,b(y(s)==="en"?"Save Changes":" "),1)])],32)],8,dF)])):he("",!0)]),_:1}))}},kF=bt(xF,[["__scopeId","data-v-efada37a"]]),DF=["dir"],PF={class:"form-row"},RF={class:"form-group"},OF={disabled:"",value:""},NF=["value"],FF={key:0,class:"form-group"},VF={class:"form-row"},MF={class:"form-group"},LF={value:"X-ray"},$F={value:"CT"},UF={class:"form-group"},BF={disabled:"",value:""},jF=["value"],qF={key:0,class:"form-group"},zF=["placeholder"],HF={key:1,class:"form-group"},GF={class:"form-group"},WF={class:"form-group"},KF=["placeholder"],YF={class:"form-group"},QF={class:"form-group"},XF={class:"modal-actions"},JF=["disabled"],ZF={__name:"PersonalScanFormModal",props:{show:Boolean,scan:Object,isSaving:Boolean},emits:["close","save"],setup(t,{emit:e}){const n=t,r=e,s=Me("currentLanguage"),i={CT:[{value:"Abdomen & Pelvis",en:"Abdomen & Pelvis",ar:" "},{value:"Brain with contrast",en:"Brain with contrast",ar:"  "},{value:"Angiography CTA",en:"Angiography CTA",ar:"  CTA"},{value:"Urography",en:"Urography",ar:"  "},{value:"Enterography",en:"Enterography",ar:" "},{value:"Other",en:"Other...",ar:"..."}],"X-ray":[{value:"Barium Enema",en:"Barium Enema",ar:"  "},{value:"IV Urogram (IVP)",en:"IV Urogram (IVP)",ar:"   (IVP)"},{value:"HSG",en:"HSG",ar:"  (HSG)"},{value:"VCUG",en:"VCUG",ar:"   (VCUG)"},{value:"Other",en:"Other...",ar:"..."}]},o=[{value:"head",en:"Head",ar:""},{value:"neck",en:"Neck",ar:""},{value:"chest",en:"Chest",ar:""},{value:"abdomen",en:"Abdomen",ar:""},{value:"pelvis",en:"Pelvis",ar:""},{value:"spine",en:"Spine",ar:" "},{value:"upper_extremity",en:"Upper Extremity",ar:" "},{value:"lower_extremity",en:"Lower Extremity",ar:" "},{value:"other",en:"Other",ar:""}],a={patient:{CT:{"Abdomen & Pelvis":14,"Brain with contrast":2,"Angiography CTA":12,Urography:8,Enterography:8,default:6},"X-ray":{"Barium Enema":7,"IV Urogram (IVP)":2.5,HSG:1.5,VCUG:1,default:.5}},doctor:{CT:{default:1e-5},"X-ray":{"Barium Enema":1e-4,"IV Urogram (IVP)":5e-5,HSG:2e-4,VCUG:15e-5,default:5e-5}}},u=Qn({id:null,scanType:"X-ray",subScanType:"",otherScanDescription:"",scanPlace:"",otherScanPlaceDescription:"",numberOfScans:1,scanDate:new Date().toISOString().split("T")[0],patientDose:null,reason:"",notes:""}),c=Ee(()=>i[u.scanType]||[]),d=Ee(()=>u.subScanType==="Other"),h=Ee(()=>u.scanPlace==="other");Ze(()=>n.show,v=>{if(v&&(Object.assign(u,{id:null,scanType:"X-ray",subScanType:"",otherScanDescription:"",scanPlace:"",otherScanPlaceDescription:"",numberOfScans:1,scanDate:new Date().toISOString().split("T")[0],patientDose:null,reason:"",notes:""}),n.scan)){u.id=n.scan.id,u.scanType=n.scan.scanType,u.scanDate=n.scan.scanDate?.toDate()?.toISOString().split("T")[0]||"",u.patientDose=n.scan.patientDose,u.reason=n.scan.reason,u.notes=n.scan.notes,u.numberOfScans=n.scan.numberOfScans||1;const E=n.scan.scanDetail;c.value.some(F=>F.value===E)?u.subScanType=E:E&&(u.subScanType="Other",u.otherScanDescription=E);const C=n.scan.scanPlace;o.some(F=>F.value===C)?u.scanPlace=C:C&&(u.scanPlace="other",u.otherScanPlaceDescription=C)}}),Ze(()=>u.scanType,()=>{u.subScanType="",u.otherScanDescription=""});const m=()=>{try{const v=u.subScanType==="Other"?"default":u.subScanType,A=a.patient[u.scanType];if(!A)return null;let C=A[v]??A.default;return C===void 0?null:u.scanType==="X-ray"?C*u.numberOfScans:C}catch(v){return console.error("Error retrieving fallback dose:",v),null}},g=()=>{if(!u.scanDate||!u.scanPlace||h.value&&!u.otherScanPlaceDescription||!u.subScanType||d.value&&!u.otherScanDescription){alert(s.value==="en"?"Please fill all required scan details.":"     .");return}if(u.scanType==="X-ray"&&(u.numberOfScans===null||u.numberOfScans<1)){alert(s.value==="en"?"Number of scans must be at least 1 for X-ray.":"       1  .");return}if((u.patientDose===null||u.patientDose==="")&&(u.patientDose=m()),u.patientDose===null){alert(s.value==="en"?"Could not find a typical dose value for the selected scan. Please enter the dose manually.":"       .    .");return}const v=u.scanDate.split("-"),E=new Date(Date.UTC(v[0],parseInt(v[1],10)-1,v[2]));if(isNaN(E.getTime())){alert("Invalid date. Please select a valid date.");return}const A={id:u.id,scanType:u.scanType,scanDetail:d.value?u.otherScanDescription:u.subScanType,scanPlace:h.value?u.otherScanPlaceDescription:u.scanPlace,numberOfScans:u.scanType==="X-ray"?Number(u.numberOfScans):1,scanDate:Ne.fromDate(E),patientDose:Number(u.patientDose),reason:u.reason,notes:u.notes,isPersonalScan:!0};r("save",A)};return(v,E)=>(B(),Dn(vs,{name:"modal-fade"},{default:Tr(()=>[t.show?(B(),q("div",{key:0,class:"modal-overlay",onClick:E[12]||(E[12]=st(A=>v.$emit("close"),["self"]))},[f("div",{class:"modal-content",dir:y(s)==="ar"?"rtl":"ltr"},[f("button",{class:"close-modal-button",onClick:E[0]||(E[0]=A=>v.$emit("close"))},""),f("h3",null,b(t.scan?y(s)==="en"?"Edit Personal Scan":"  ":y(s)==="en"?"Add Personal Scan":"  "),1),f("form",{onSubmit:st(g,["prevent"]),class:"scan-form"},[f("div",PF,[f("div",RF,[f("label",null,b(y(s)==="en"?"Place of Scan":" "),1),J(f("select",{"onUpdate:modelValue":E[1]||(E[1]=A=>u.scanPlace=A),required:""},[f("option",OF,b(y(s)==="en"?"Select...":"..."),1),(B(),q(Je,null,nn(o,A=>f("option",{key:A.value,value:A.value},b(y(s)==="en"?A.en:A.ar),9,NF)),64))],512),[[ct,u.scanPlace]])]),h.value?(B(),q("div",FF,[f("label",null,b(y(s)==="en"?"Please specify other place":"   "),1),J(f("input",{type:"text","onUpdate:modelValue":E[2]||(E[2]=A=>u.otherScanPlaceDescription=A),required:""},null,512),[[me,u.otherScanPlaceDescription]])])):he("",!0)]),f("div",VF,[f("div",MF,[f("label",null,b(y(s)==="en"?"Scan Category":" "),1),J(f("select",{"onUpdate:modelValue":E[3]||(E[3]=A=>u.scanType=A),required:""},[f("option",LF,b(y(s)==="en"?"X-ray":" "),1),f("option",$F,b(y(s)==="en"?"CT":" "),1)],512),[[ct,u.scanType]])]),f("div",UF,[f("label",null,b(y(s)==="en"?"Scan Protocol":" "),1),J(f("select",{"onUpdate:modelValue":E[4]||(E[4]=A=>u.subScanType=A),required:""},[f("option",BF,b(y(s)==="en"?"Select...":"..."),1),(B(!0),q(Je,null,nn(c.value,A=>(B(),q("option",{key:A.value,value:A.value},b(y(s)==="en"?A.en:A.ar),9,jF))),128))],512),[[ct,u.subScanType]])])]),d.value?(B(),q("div",qF,[f("label",null,b(y(s)==="en"?"Please specify scan protocol":"   "),1),J(f("input",{type:"text","onUpdate:modelValue":E[5]||(E[5]=A=>u.otherScanDescription=A),placeholder:y(s)==="en"?"e.g., Left Hand X-ray":":    ",required:""},null,8,zF),[[me,u.otherScanDescription]])])):he("",!0),u.scanType==="X-ray"?(B(),q("div",HF,[f("label",null,b(y(s)==="en"?"Number of Scans":" "),1),J(f("input",{type:"number","onUpdate:modelValue":E[6]||(E[6]=A=>u.numberOfScans=A),min:"1",required:""},null,512),[[me,u.numberOfScans,void 0,{number:!0}]])])):he("",!0),f("div",GF,[f("label",null,b(y(s)==="en"?"Scan Date":" "),1),J(f("input",{type:"date","onUpdate:modelValue":E[7]||(E[7]=A=>u.scanDate=A),required:""},null,512),[[me,u.scanDate]])]),f("div",WF,[f("label",null,b(y(s)==="en"?"Your Dose (mSv)":" (mSv)"),1),J(f("input",{type:"number",step:"0.00005","onUpdate:modelValue":E[8]||(E[8]=A=>u.patientDose=A),placeholder:y(s)==="en"?"Leave blank for typical value":"    "},null,8,KF),[[me,u.patientDose,void 0,{number:!0}]])]),f("div",YF,[f("label",null,b(y(s)==="en"?"Reason for Scan":" "),1),J(f("textarea",{"onUpdate:modelValue":E[9]||(E[9]=A=>u.reason=A),rows:"2"},null,512),[[me,u.reason]])]),f("div",QF,[f("label",null,b(y(s)==="en"?"Additional Notes":" "),1),J(f("textarea",{"onUpdate:modelValue":E[10]||(E[10]=A=>u.notes=A),rows:"3"},null,512),[[me,u.notes]])]),f("div",XF,[f("button",{type:"button",onClick:E[11]||(E[11]=A=>v.$emit("close")),class:"action-button secondary"},b(y(s)==="en"?"Cancel":""),1),f("button",{type:"submit",class:"action-button",disabled:t.isSaving},b(t.isSaving?y(s)==="en"?"Saving...":" ...":y(s)==="en"?"Save":""),9,JF)])],32)],8,DF)])):he("",!0)]),_:1}))}},eV=bt(ZF,[["__scopeId","data-v-dd048426"]]),tV=["dir"],nV={key:0,class:"loading-state"},rV={key:1,class:"empty-state"},sV={key:2,class:"table-container"},iV={class:"history-table"},oV={class:"details-column"},aV={class:"details-column"},uV={class:"details-column"},lV={class:"details-column"},cV={class:"details-column"},dV={class:"details-column"},fV={class:"details-column"},hV={class:"details-column"},pV={class:"action-buttons"},mV=["onClick","title"],gV=["onClick","title"],_V={__name:"HistoryTable",props:{scans:{type:Array,required:!0},isLoading:{type:Boolean,default:!1},isPersonalView:{type:Boolean,default:!1}},emits:["edit","delete"],setup(t,{emit:e}){const n=Me("currentLanguage"),r=s=>!s||!s.toDate?"N/A":s.toDate().toLocaleDateString();return(s,i)=>(B(),q("div",{class:"history-table-wrapper",dir:y(n)==="ar"?"rtl":"ltr"},[t.isLoading?(B(),q("div",nV,[ke(y(St),{icon:"spinner",spin:""}),f("span",null,b(y(n)==="en"?"Loading history...":"  ..."),1)])):!t.scans||t.scans.length===0?(B(),q("div",rV,[f("p",null,b(y(n)==="en"?"No scan records found.":"     ."),1)])):(B(),q("div",sV,[f("table",iV,[f("thead",null,[f("tr",null,[f("th",null,b(y(n)==="en"?"Scan Type":" "),1),f("th",oV,b(y(n)==="en"?"Place of Scan":" "),1),f("th",aV,b(y(n)==="en"?"Scan Protocol":" "),1),f("th",null,b(y(n)==="en"?"Date":""),1),f("th",null,b(y(n)==="en"?"Dose":"")+" (mSv)",1),f("th",uV,b(y(n)==="en"?"Reason for Scan":" "),1),f("th",lV,b(y(n)==="en"?"Additional Notes":" "),1),f("th",null,b(y(n)==="en"?"Actions":""),1)])]),f("tbody",null,[(B(!0),q(Je,null,nn(t.scans,o=>(B(),q("tr",{key:o.id},[f("td",null,b(o.scanType||"N/A"),1),f("td",cV,b(o.scanPlace||"N/A"),1),f("td",dV,b(o.scanDetail||"N/A"),1),f("td",null,b(r(o.scanDate)),1),f("td",null,b(o.patientDose??"N/A"),1),f("td",fV,b(o.reason||"N/A"),1),f("td",hV,b(o.notes||"N/A"),1),f("td",null,[f("div",pV,[f("button",{onClick:a=>s.$emit("edit",o),class:"action-button-icon edit-button",title:y(n)==="en"?"Edit":""},[ke(y(St),{icon:"edit"})],8,mV),f("button",{onClick:a=>s.$emit("delete",o),class:"action-button-icon delete-button",title:y(n)==="en"?"Delete":""},[ke(y(St),{icon:"trash-alt"})],8,gV)])])]))),128))])])]))],8,tV))}},yV=bt(_V,[["__scopeId","data-v-757f7f6d"]]),vV=["dir"],bV={class:"form-group"},EV=["value"],wV={key:0,class:"form-group"},AV={class:"form-group"},TV={class:"form-group"},IV=["disabled"],SV=["value"],CV={key:1,class:"form-group"},xV={key:2,class:"form-group"},kV={class:"form-group"},DV={class:"form-group"},PV=["placeholder"],RV={class:"form-group"},OV=["placeholder"],NV={class:"modal-actions"},FV=["disabled"],VV={__name:"OtherScanFormModal",props:{show:Boolean,scan:Object,isSaving:Boolean},emits:["close","save"],setup(t,{emit:e}){const n=t,r=e,s=Me("currentLanguage"),i={CT:[{value:"Abdomen & Pelvis",en:"Abdomen & Pelvis",ar:" "},{value:"Brain with contrast",en:"Brain with contrast",ar:"  "},{value:"Angiography CTA",en:"Angiography CTA",ar:"  CTA"},{value:"Urography",en:"Urography",ar:"  "},{value:"Enterography",en:"Enterography",ar:" "},{value:"Other",en:"Other...",ar:"..."}],"X-ray":[{value:"Barium Enema",en:"Barium Enema",ar:"  "},{value:"IV Urogram (IVP)",en:"IV Urogram (IVP)",ar:"   (IVP)"},{value:"HSG",en:"HSG",ar:"  (HSG)"},{value:"VCUG",en:"VCUG",ar:"   (VCUG)"},{value:"Other",en:"Other...",ar:"..."}]},o=[{value:"head",en:"Head",ar:""},{value:"neck",en:"Neck",ar:""},{value:"chest",en:"Chest",ar:""},{value:"abdomen",en:"Abdomen",ar:""},{value:"pelvis",en:"Pelvis",ar:""},{value:"spine",en:"Spine",ar:" "},{value:"upper_extremity",en:"Upper Extremity",ar:" "},{value:"lower_extremity",en:"Lower Extremity",ar:" "},{value:"other",en:"Other",ar:""}],a={doctor:{CT:{default:1e-5},"X-ray":{"Barium Enema":1e-4,"IV Urogram (IVP)":5e-5,HSG:2e-4,VCUG:15e-5,default:5e-5}}},u=Qn({id:null,scanPlace:"",otherScanPlaceDescription:"",scanType:"X-ray",scanDetail:"",otherScanDetailDescription:"",numberOfScans:1,date:new Date().toISOString().split("T")[0],dosage:null,doctorAdditionalContext:""}),c=Ee(()=>i[u.scanType]||[]),d=Ee(()=>u.scanPlace==="other"),h=Ee(()=>u.scanDetail==="Other");Ze(()=>n.show,v=>{v&&(Object.assign(u,{id:null,scanPlace:"",otherScanPlaceDescription:"",scanType:"X-ray",scanDetail:"",otherScanDetailDescription:"",numberOfScans:1,date:new Date().toISOString().split("T")[0],dosage:null,doctorAdditionalContext:""}),n.scan&&(u.id=n.scan.id,u.scanPlace=n.scan.scanPlace||"",u.scanType=n.scan.scanType||"X-ray",u.scanDetail=n.scan.scanDetail||"",u.numberOfScans=n.scan.numberOfScans||1,u.dosage=n.scan.dosage,u.date=n.scan.date?.toDate?n.scan.date.toDate().toISOString().split("T")[0]:"",u.doctorAdditionalContext=n.scan.doctorAdditionalContext||""))}),Ze(()=>u.scanType,()=>{u.scanDetail="",u.otherScanDetailDescription=""});const m=()=>{try{const v=u.scanDetail==="Other"?"default":u.scanDetail,A=a.doctor[u.scanType];if(!A)return null;let C=A[v]??A.default;return C===void 0?null:u.scanType==="X-ray"?C*u.numberOfScans:C}catch(v){return console.error("Error retrieving fallback dose:",v),null}},g=()=>{if(!u.scanPlace||!u.scanType||!u.date){alert("Please fill all required fields.");return}if((u.dosage===null||u.dosage==="")&&(u.dosage=m()),u.dosage===null){alert(s.value==="en"?"Could not find a typical dose value for the selected scan. Please enter the dose manually.":"       .    .");return}const v=u.date.split("-"),E=new Date(Date.UTC(v[0],parseInt(v[1],10)-1,parseInt(v[2],10)));if(isNaN(E.getTime())){alert("Invalid date format. Please use YYYY-MM-DD.");return}const A={id:u.id,scanPlace:d.value?u.otherScanPlaceDescription:u.scanPlace,scanType:u.scanType,scanDetail:h.value?u.otherScanDetailDescription:u.scanDetail,numberOfScans:u.scanType==="X-ray"?Number(u.numberOfScans):1,date:Ne.fromDate(E),dosage:Number(u.dosage),doctorAdditionalContext:u.doctorAdditionalContext};r("save",A)};return(v,E)=>(B(),Dn(vs,{name:"modal-fade"},{default:Tr(()=>[t.show?(B(),q("div",{key:0,class:"modal-overlay",onClick:E[11]||(E[11]=st(A=>v.$emit("close"),["self"]))},[f("div",{class:"modal-content",dir:y(s)==="ar"?"rtl":"ltr"},[f("button",{class:"close-modal-button",onClick:E[0]||(E[0]=A=>v.$emit("close"))},""),f("h3",null,b(t.scan?"Edit Other Source":"Add Other Source"),1),E[22]||(E[22]=f("p",{class:"subtitle"},"For miscellaneous radiation sources like background radiation or occupational exposure.",-1)),f("form",{onSubmit:st(g,["prevent"]),class:"scan-form"},[f("div",bV,[E[13]||(E[13]=f("label",null,"Place of Scan",-1)),J(f("select",{"onUpdate:modelValue":E[1]||(E[1]=A=>u.scanPlace=A),required:""},[E[12]||(E[12]=f("option",{disabled:"",value:""},"Select...",-1)),(B(),q(Je,null,nn(o,A=>f("option",{key:A.value,value:A.value},b(y(s)==="en"?A.en:A.ar),9,EV)),64))],512),[[ct,u.scanPlace]])]),d.value?(B(),q("div",wV,[E[14]||(E[14]=f("label",null,"Please specify place",-1)),J(f("input",{type:"text","onUpdate:modelValue":E[2]||(E[2]=A=>u.otherScanPlaceDescription=A),required:""},null,512),[[me,u.otherScanPlaceDescription]])])):he("",!0),f("div",AV,[E[16]||(E[16]=f("label",null,"Scan Type",-1)),J(f("select",{"onUpdate:modelValue":E[3]||(E[3]=A=>u.scanType=A),required:""},E[15]||(E[15]=[f("option",{value:"X-ray"},"X-ray",-1),f("option",{value:"CT"},"CT",-1)]),512),[[ct,u.scanType]])]),f("div",TV,[E[18]||(E[18]=f("label",null,"Scan Detail / Protocol",-1)),J(f("select",{"onUpdate:modelValue":E[4]||(E[4]=A=>u.scanDetail=A),disabled:!c.value.length},[E[17]||(E[17]=f("option",{disabled:"",value:""},"Select...",-1)),(B(!0),q(Je,null,nn(c.value,A=>(B(),q("option",{key:A.value,value:A.value},b(y(s)==="en"?A.en:A.ar),9,SV))),128))],8,IV),[[ct,u.scanDetail]])]),h.value?(B(),q("div",CV,[E[19]||(E[19]=f("label",null,"Please specify detail",-1)),J(f("input",{type:"text","onUpdate:modelValue":E[5]||(E[5]=A=>u.otherScanDetailDescription=A),required:""},null,512),[[me,u.otherScanDetailDescription]])])):he("",!0),u.scanType==="X-ray"?(B(),q("div",xV,[E[20]||(E[20]=f("label",null,"Number of Scans",-1)),J(f("input",{type:"number","onUpdate:modelValue":E[6]||(E[6]=A=>u.numberOfScans=A),min:"1",required:""},null,512),[[me,u.numberOfScans,void 0,{number:!0}]])])):he("",!0),f("div",kV,[E[21]||(E[21]=f("label",null,"History (Date)",-1)),J(f("input",{type:"date","onUpdate:modelValue":E[7]||(E[7]=A=>u.date=A),required:""},null,512),[[me,u.date]])]),f("div",DV,[f("label",null,b(y(s)==="en"?"Your Exposure Context (Optional)":"  ()"),1),J(f("textarea",{"onUpdate:modelValue":E[8]||(E[8]=A=>u.doctorAdditionalContext=A),rows:"2",placeholder:y(s)==="en"?"e.g., shielding used, distance from source...":":     ..."},"          ",8,PV),[[me,u.doctorAdditionalContext]])]),f("div",RV,[f("label",null,b(y(s)==="en"?"Occupational Dose (mSv)":"  (mSv)"),1),J(f("input",{type:"number",step:"0.00005","onUpdate:modelValue":E[9]||(E[9]=A=>u.dosage=A),placeholder:y(s)==="en"?"Leave blank for typical value":"    "},null,8,OV),[[me,u.dosage,void 0,{number:!0}]])]),f("div",NV,[f("button",{type:"submit",class:"action-button",disabled:t.isSaving},b(t.isSaving?y(s)==="en"?"Saving...":" ...":y(s)==="en"?"Save":""),9,FV),f("button",{type:"button",onClick:E[10]||(E[10]=A=>v.$emit("close")),class:"action-button secondary"},b(y(s)==="en"?"Cancel":""),1)])],32)],8,vV)])):he("",!0)]),_:1}))}},MV=bt(VV,[["__scopeId","data-v-72feaf34"]]),LV=["dir"],$V={key:0,class:"loading-state"},UV={key:1,class:"empty-state"},BV={key:2,class:"table-container"},jV={class:"history-table"},qV=["title"],zV={class:"action-buttons"},HV=["onClick","title"],GV=["onClick","title"],WV={__name:"OtherScansTable",props:{scans:{type:Array,required:!0},isLoading:{type:Boolean,default:!1}},emits:["edit","delete"],setup(t,{emit:e}){const n=Me("currentLanguage"),r=s=>!s||!s.toDate?"N/A":s.toDate().toLocaleDateString(n.value==="ar"?"ar-EG":"en-US");return(s,i)=>(B(),q("div",{class:"history-table-wrapper",dir:y(n)==="ar"?"rtl":"ltr"},[t.isLoading?(B(),q("div",$V,[ke(y(St),{icon:"spinner",spin:""}),f("span",null,b(y(n)==="en"?"Loading other sources...":"   ..."),1)])):!t.scans||t.scans.length===0?(B(),q("div",UV,[f("p",null,b(y(n)==="en"?"No other scan records found.":"      ."),1)])):(B(),q("div",BV,[f("table",jV,[f("thead",null,[f("tr",null,[f("th",null,b(y(n)==="en"?"Place":""),1),f("th",null,b(y(n)==="en"?"Type":""),1),f("th",null,b(y(n)==="en"?"Detail":""),1),f("th",null,b(y(n)==="en"?"Context":""),1),f("th",null,b(y(n)==="en"?"Date":""),1),f("th",null,b(y(n)==="en"?"Dosage":"")+" (mSv)",1),f("th",null,b(y(n)==="en"?"Actions":""),1)])]),f("tbody",null,[(B(!0),q(Je,null,nn(t.scans,o=>(B(),q("tr",{key:o.id},[f("td",null,b(o.scanPlace||"N/A"),1),f("td",null,b(o.scanType||"N/A"),1),f("td",null,b(o.scanDetail||"N/A"),1),f("td",{class:"context-cell",title:o.doctorAdditionalContext},b(o.doctorAdditionalContext||"N/A"),9,qV),f("td",null,b(r(o.date)),1),f("td",null,b(o.dosage??"N/A"),1),f("td",null,[f("div",zV,[f("button",{onClick:a=>s.$emit("edit",o),class:"action-button-icon edit-button",title:y(n)==="en"?"Edit":""},[ke(y(St),{icon:"edit"})],8,HV),f("button",{onClick:a=>s.$emit("delete",o),class:"action-button-icon delete-button",title:y(n)==="en"?"Delete":""},[ke(y(St),{icon:"trash-alt"})],8,GV)])])]))),128))])])]))],8,LV))}},KV=bt(WV,[["__scopeId","data-v-46c6e165"]]),YV=["dir"],QV={class:"profile-section card"},XV={class:"card-header"},JV={key:0,class:"loading-state"},ZV={key:1,class:"profile-details"},eM={key:0,class:"role-tag"},tM={key:1,class:"role-tag"},nM={key:0},rM={key:1},sM={key:2},iM={key:0},oM={key:0},aM={key:1},uM={class:"history-section card"},lM={class:"card-header"},cM={class:"history-section card"},dM={class:"card-header"},fM={class:"switch-link-container"},hM={__name:"ProfileView",setup(t){const e=wn(),n=Yi(),r=bs(),s=Me("currentLanguage"),i=Me("triggerMsvRecalculation"),o=Ae([]),a=Ae([]),u=Ae(!1),c=Ae(!1),d=Ae(!1),h=Ae(null),m=Ae(null),g=Ae(!1),v=Ae(null),E=Ae(null),A=Ae(!1),C=Ee(()=>e.user?.uid),R=Ee(()=>{if(!e.userProfile)return{displayName:e.user?.displayName||"",email:e.user?.email||""};const ae=ue=>{if(!ue)return"";const de=ue.toDate?ue.toDate():new Date(ue);return isNaN(de)?"":de.toISOString().split("T")[0]};return{...e.userProfile,displayName:e.user?.displayName,email:e.user?.email,birthDate:ae(e.userProfile.birthDate),estimatedDueDate:ae(e.userProfile.estimatedDueDate)}}),F=async()=>{C.value&&(o.value=await n.fetchScansForPatient(C.value),a.value=await n.fetchOtherScansForUser(C.value))},V=async ae=>{if(!C.value)return;const ue={};ae.name!==void 0&&ae.name!==null&&ae.name!==""&&(ue.name=ae.name.trim()),ae.email!==void 0&&ae.email!==null&&ae.email!==""&&(ue.email=ae.email.trim()),ae.role&&(ue.role=ae.role),ae.weight&&(ue.weight=ae.weight),ae.birthDate&&(ue.birthDate=ae.birthDate),ae.gender&&(ue.gender=ae.gender),ue.updatedAt=new Date().toISOString(),await n.setUserProfile(C.value,ue)?(e.setUserProfile(ue),u.value=!1,i&&i()):alert(`Failed to save profile. Error: ${n.error}`)},U=async ae=>{if(!C.value)return;const ue={...ae,patientId:C.value};(ue.id?await n.updateScan(ue.id,ue):await n.createScan(ue))?(c.value=!1,await F(),i&&i()):alert(`Failed to save scan: ${n.error}`)},M=async()=>{if(!m.value?.id)return;await n.deleteScan(m.value.id)?(d.value=!1,await F(),i&&i()):alert(`Failed to delete scan: ${n.error}`)},S=async ae=>{(ae.id?await n.updateOtherScan(ae.id,ae):await n.createOtherScan(ae))?(g.value=!1,console.log("[ProfileView] Save successful. Waiting 1 second before refetching data..."),setTimeout(async()=>{console.log("[ProfileView] Refetching data now..."),await F(),i&&i()},1e3)):alert(`Failed to save other scan: ${n.error}`)},w=async()=>{if(!E.value?.id)return;await n.deleteOtherScan(E.value.id)?(A.value=!1,await F(),i&&i()):alert(`Failed to delete other scan: ${n.error}`)},T=()=>{h.value=null,c.value=!0},k=ae=>{h.value=ae,c.value=!0},N=ae=>{m.value=ae,d.value=!0},P=()=>{v.value=null,g.value=!0},x=ae=>{v.value=ae,g.value=!0},Pe=ae=>{E.value=ae,A.value=!0};return Vf(()=>{Ze(()=>e.isAuthReady,ae=>{ae&&C.value&&F()},{immediate:!0})}),(ae,ue)=>(B(),q("div",{class:"profile-page",dir:y(s)==="ar"?"rtl":"ltr"},[f("div",QV,[f("div",XV,[f("h2",null,b(y(s)==="en"?"My Profile":" "),1),f("button",{onClick:ue[0]||(ue[0]=de=>u.value=!0),class:"action-button"},b(y(s)==="en"?"Edit Profile":"  "),1)]),y(e).isProfileLoading?(B(),q("div",JV,"Loading profile...")):R.value?(B(),q("div",ZV,[f("p",null,[f("strong",null,b(y(s)==="en"?"Name:":":"),1),f("span",null,b(R.value.displayName),1)]),f("p",null,[f("strong",null,b(y(s)==="en"?"Email:":" :"),1),f("span",null,b(R.value.email),1)]),f("p",null,[f("strong",null,b(y(s)==="en"?"Role":"")+":",1),R.value.role==="doctor"?(B(),q("span",eM,b(y(s)==="en"?"Doctor":""),1)):(B(),q("span",tM,b(y(s)==="en"?"Patient":""),1))]),f("p",null,[f("strong",null,b(y(s)==="en"?"Birth Date:":" :"),1),f("span",null,b(R.value.birthDate||"Not set"),1)]),f("p",null,[f("strong",null,b(y(s)==="en"?"Weight:":":"),1),f("span",null,b(R.value.weight?`${R.value.weight} kg`:"Not set"),1)]),f("p",null,[f("strong",null,b(y(s)==="en"?"Gender: ":": "),1),R.value.gender==="male"?(B(),q("span",nM,b(y(s)==="en"?"Male":""),1)):R.value.gender==="female"?(B(),q("span",rM,b(y(s)==="en"?"Female":""),1)):(B(),q("span",sM,"Not set"))]),R.value.gender==="female"?(B(),q("p",iM,[f("strong",null,b(y(s)==="en"?"Pregnant: ":": "),1),R.value.isPregnant?(B(),q("span",oM,b(y(s)==="en"?"Yes":"")+" ("+b(y(s)==="en"?"Due:":":")+" "+b(R.value.estimatedDueDate)+")",1)):(B(),q("span",aM,b(y(s)==="en"?"No":""),1))])):he("",!0),f("p",null,[f("strong",null,b(y(s)==="en"?"Allergies:":":"),1),f("span",null,b(R.value.allergies?.join(", ")||"None"),1)]),f("p",null,[f("strong",null,b(y(s)==="en"?"Medical History:":" :"),1),f("span",null,b(R.value.medicalHistory?.join(", ")||"None"),1)])])):he("",!0)]),f("div",uM,[f("div",lM,[f("h2",null,b(y(s)==="en"?"Personal Scan History":"  "),1),f("button",{onClick:T,class:"action-button"},b(y(s)==="en"?"Add Personal Scan":"  "),1)]),ke(yV,{scans:o.value,"is-loading":y(n).loading,"is-personal-view":!0,onEdit:k,onDelete:N},null,8,["scans","is-loading"])]),f("div",cM,[f("div",dM,[f("h2",null,b(y(e).role==="doctor"?y(s)==="en"?"Occupational Exposure":" ":y(s)==="en"?"Other Sources":" "),1),f("button",{onClick:P,class:"action-button"},b(y(s)==="en"?"Add Other Source":"  "),1)]),ke(KV,{scans:a.value,"is-loading":y(n).loading,onEdit:x,onDelete:Pe},null,8,["scans","is-loading"])]),ke(kF,{show:u.value,"profile-data":R.value,onClose:ue[1]||(ue[1]=de=>u.value=!1),onSave:V},null,8,["show","profile-data"]),ke(eV,{show:c.value,scan:h.value,"is-saving":y(n).loading,onClose:ue[2]||(ue[2]=de=>c.value=!1),onSave:U},null,8,["show","scan","is-saving"]),ke(ml,{show:d.value,title:"Delete Scan",message:"Are you sure you want to delete this scan record?",onClose:ue[3]||(ue[3]=de=>d.value=!1),onConfirm:M},null,8,["show"]),ke(MV,{show:g.value,scan:v.value,"is-saving":y(n).loading,onClose:ue[4]||(ue[4]=de=>g.value=!1),onSave:S},null,8,["show","scan","is-saving"]),ke(ml,{show:A.value,title:"Delete Other Scan",message:"Are you sure you want to delete this record?",onClose:ue[5]||(ue[5]=de=>A.value=!1),onConfirm:w},null,8,["show"]),f("div",fM,[f("a",{href:"#",onClick:ue[6]||(ue[6]=st(de=>y(r).push("/dashboard"),["prevent"]))},b(y(s)==="en"?"Back to dashboard":"   "),1)])],8,YV))}},pM=bt(hM,[["__scopeId","data-v-31146a8e"]]),mM=["dir"],gM={class:"recommend-main-content"},_M={class:"recommend-card"},yM={class:"form-group"},vM=["dir"],bM={class:"form-group"},EM=["dir"],wM={class:"form-group"},AM=["dir"],TM={value:"male"},IM={value:"female"},SM={key:0,class:"pregnancy-section"},CM={class:"form-group checkbox-group"},xM={key:0,class:"form-group"},kM=["dir"],DM={class:"form-group"},PM={class:"form-group"},RM=["dir"],OM={class:"form-group"},NM={class:"section-title"},FM={class:"form-group"},VM=["dir"],MM={value:"",disabled:"",selected:""},LM=["value"],$M={key:1,class:"form-group"},UM=["dir"],BM={class:"form-row"},jM={class:"form-group"},qM=["dir"],zM={value:"CT"},HM={value:"X-ray"},GM={class:"form-group"},WM=["dir"],KM={value:"",disabled:"",selected:""},YM=["value"],QM={key:2,class:"form-group"},XM=["dir"],JM=["disabled"],ZM={key:0,class:"message error-message"},eL={key:1,class:"prediction-result-wrapper"},tL={key:0,class:"message warning-message"},nL={style:{"white-space":"pre-wrap"}},rL={class:"prediction-result"},sL={key:0,class:"msv-details-container"},iL={class:"msv-details"},oL={class:"result-text"},aL=["innerHTML"],uL={class:"switch-link-container"},lL={__name:"RecommendGuestView",setup(t){const e=bs();K_();const n=wn(),r=new dn,s=Me("currentLanguage"),i=Me("doseLimit");Ee(()=>!n.user);const o=Ae({weight:null,birthDate:"",gender:"male",medicalHistory:"",previousYearDose:0,isPregnant:!1,estimatedDueDate:"",scanType:"CT",scanPlace:"",otherScanPlaceDescription:"",subScanType:"",otherScanDescription:"",numberOfScans:1,currentSymptoms:""}),a={CT:[{value:"Abdomen & Pelvis",en:"Abdomen & Pelvis",ar:" "},{value:"Brain with contrast",en:"Brain with contrast",ar:"  "},{value:"Angiography CTA",en:"Angiography CTA",ar:"  CTA"},{value:"Urography",en:"Urography",ar:"  "},{value:"Enterography",en:"Enterography",ar:" "},{value:"Other",en:"Other...",ar:"..."}],"X-ray":[{value:"Barium Enema",en:"Barium Enema",ar:"  "},{value:"IV Urogram (IVP)",en:"IV Urogram (IVP)",ar:"   (IVP)"},{value:"HSG",en:"HSG",ar:"  (HSG)"},{value:"VCUG",en:"VCUG",ar:"   (VCUG)"},{value:"Other",en:"Other...",ar:"..."}]},u=[{value:"head",en:"Head",ar:""},{value:"neck",en:"Neck",ar:""},{value:"chest",en:"Chest",ar:""},{value:"abdomen",en:"Abdomen",ar:""},{value:"pelvis",en:"Pelvis",ar:""},{value:"spine",en:"Spine",ar:" "},{value:"upper_extremity",en:"Upper Extremity",ar:" "},{value:"lower_extremity",en:"Lower Extremity",ar:" "},{value:"other",en:"Other",ar:""}],c={patient:{CT:{"Abdomen & Pelvis":14,"Brain with contrast":2,"Angiography CTA":12,Urography:8,Enterography:8,default:6},"X-ray":{"Barium Enema":7,"IV Urogram (IVP)":2.5,HSG:1.5,VCUG:1,default:.5}}},d=Ee(()=>a[o.value.scanType]||[]),h=Ee(()=>o.value.subScanType==="Other"),m=Ee(()=>o.value.scanPlace==="other"),g=Ae(!1),v=Ae(""),E=Ae(null),A=Ee(()=>E.value&&E.value.recommendationText?r.render(E.value.recommendationText):""),C=Ee(()=>{const U=F("patient");return U===null?null:(parseFloat(o.value.previousYearDose)||0)+U}),R=Ee(()=>C.value===null?!1:C.value>i.value);function F(U){try{const M=o.value.subScanType==="Other"?"default":o.value.subScanType,S=c[U];if(!S)return null;const w=S[o.value.scanType];if(!w)return null;let T=w[M]??w.default;return T===void 0?null:(o.value.scanType==="X-ray"&&(T=T*(o.value.numberOfScans||1)),T)}catch{return null}}Ze(()=>o.value.gender,U=>{U!=="female"&&(o.value.isPregnant=!1,o.value.estimatedDueDate="")}),Ze(()=>o.value.scanType,()=>{o.value.subScanType="",o.value.otherScanDescription="",o.value.numberOfScans=1});async function V(){if(g.value=!0,v.value="",E.value=null,!o.value.birthDate){v.value=s.value==="en"?"Date of Birth is required.":"  .",g.value=!1;return}const U=o.value.scanPlace&&o.value.scanType&&o.value.subScanType;let M=null;if(U&&(M=F("patient"),M===null)){v.value=s.value==="en"?"Unable to estimate dose for the selected scan.":"    .",g.value=!1;return}const S=s.value,w=`You are an expert medical radiation physicist and AI assistant specialized in radiological protection and dosimetry.
You are assisting in a medical radiation exposure tracking system for X-ray and CT imaging.

Use the following input fields to generate customized recommendations:

- User type: [Doctor / Patient]
- Examination type: [X-ray / CT / Dental / Chest / Abdomen / Limbs / etc.]
- Number of scans: [integer]
- Exposure time: [seconds]
- Patient parameters: [age, sex, pregnancy status, body thickness]
- Distance from source: [cm]
- Shielding availability: [Lead apron / thyroid collar / gonadal shield / none]
- Estimated dose (mSv): [value from AI estimation model]

Now, based on these inputs:

If the user is Patient:
1. Explain the expected radiation dose and its percentage relative to the annual recommended public limit (1 mSv/year).
2. Indicate the risk level qualitatively (e.g., negligible / low / moderate / high).
3. Provide safety tips before and after the scan (e.g., avoid repeated imaging unnecessarily).
4. Advise consulting the doctor about radiation-free alternatives (e.g., ultrasound, MRI) if appropriate for the case.
5. Offer educational notes about radiation safety, purpose of shields, and importance of medical justification.
6. Encourage saving and tracking dose history in the app for cumulative exposure monitoring.

Always provide the output in clear, human-friendly language and reference international safety standards (ICRP 103, IAEA GSR Part 3, WHO 2016).
`,T=U?h.value?o.value.otherScanDescription:o.value.subScanType:"N/A",k=U?m.value?o.value.otherScanPlaceDescription:o.value.scanPlace:"N/A",N=U?`${o.value.scanType} of the ${k}, protocol: "${T}"`:"Not specified",P=`
    ${w}

    ---
    **GENERATE RECOMMENDATION BASED ON THE FOLLOWING DATA. YOU ARE ADDRESSING A PATIENT.**
    ---
    - **User type:** Patient
    - **Examination type:** ${N}
    - **Number of scans:** ${o.value.numberOfScans}
    - **Exposure time:** "Not provided"
    - **Patient parameters:** "age: ${new Date().getFullYear()-new Date(o.value.birthDate).getFullYear()}, sex: ${o.value.gender}, pregnancy status: ${o.value.isPregnant?`Yes, due around ${o.value.estimatedDueDate}`:"No"}, body thickness: ${o.value.weight?`${o.value.weight}kg`:"Not provided"}"
    - **Distance from source:** "Not provided"
    - **Shielding availability:** "Not provided"
    - **Estimated dose (mSv) for this scan:** ${M!==null?M.toFixed(3):"N/A"}
    - **Patient Cumulative Dose (This Year, including this scan):** ${C.value!==null?C.value.toFixed(3):"N/A"}
    - **Reason / Symptoms / Medical History:** "${o.value.currentSymptoms||"Not provided"}. History: ${o.value.medicalHistory||"None"}"
    - **Language for response:** ${S==="en"?"English":"Arabic"}

    **Your Instructions:**
    1.  **recommendationText:** Fulfill all the requirements for the **Patient** user type above.
    Combine all points into a single, comprehensive, well-structured response, **Use Markdown for
    formatting** (e.g., **bold** for emphasis, and unordered lists with -)
    2.  **Warning:** Write a clear, actionable warning if any high-risk factors are present (e.g., pregnancy, high cumulative dose, etc.). If none, state that clearly.
  `,x={type:"OBJECT",properties:{recommendationText:{type:"STRING"},Warning:{type:"STRING"}},required:["recommendationText","Warning"]};try{const de=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyC8npsehZb6bm1r7lOc4oofjwkrldVINvY",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:P}]}],generationConfig:{responseMimeType:"application/json",responseSchema:x}})});if(!de.ok)throw new Error(`API error: ${de.statusText}`);const Fe=await de.json(),Se=JSON.parse(Fe.candidates[0].content.parts[0].text);E.value={...Se,patientCalculatedMsv:C.value}}catch(Pe){console.error("AI generation failed:",Pe),E.value={recommendationText:S==="en"?"Unable to get AI advice at the moment. Please consult your doctor.":"        .   .",Warning:S==="en"?"Review your inputs carefully.":"   .",patientCalculatedMsv:C.value}}finally{g.value=!1}}return(U,M)=>(B(),q("div",{class:"recommend-page",dir:y(s)==="ar"?"rtl":"ltr"},[f("main",gM,[f("section",_M,[f("h2",null,b(y(s)==="en"?"Medical Scan Advisor for Guests":"   "),1),f("p",null,b(y(s)==="en"?"Fill in your details to get simple AI-powered advice. Scan details are optional.":"        .   ."),1),f("form",{onSubmit:st(V,["prevent"]),class:"recommend-form",novalidate:""},[f("div",yM,[f("label",null,b(y(s)==="en"?"Weight (kg)":" ()"),1),J(f("input",{type:"number",step:"0.1","onUpdate:modelValue":M[0]||(M[0]=S=>o.value.weight=S),placeholder:"e.g. 70.5",dir:y(s)==="ar"?"rtl":"ltr",min:"1"},null,8,vM),[[me,o.value.weight]])]),f("div",bM,[f("label",null,[lt(b(y(s)==="en"?"Date of Birth":" ")+" ",1),M[14]||(M[14]=f("span",{class:"required-indicator"},"*",-1))]),J(f("input",{type:"date","onUpdate:modelValue":M[1]||(M[1]=S=>o.value.birthDate=S),required:"",dir:y(s)==="ar"?"rtl":"ltr"},null,8,EM),[[me,o.value.birthDate]])]),f("div",wM,[f("label",null,[lt(b(y(s)==="en"?"Gender":"")+" ",1),M[15]||(M[15]=f("span",{class:"required-indicator"},"*",-1))]),J(f("select",{"onUpdate:modelValue":M[2]||(M[2]=S=>o.value.gender=S),required:"",dir:y(s)==="ar"?"rtl":"ltr"},[f("option",TM,b(y(s)==="en"?"Male":""),1),f("option",IM,b(y(s)==="en"?"Female":""),1)],8,AM),[[ct,o.value.gender]])]),o.value.gender==="female"?(B(),q("div",SM,[f("div",CM,[f("label",null,[J(f("input",{type:"checkbox","onUpdate:modelValue":M[3]||(M[3]=S=>o.value.isPregnant=S)},null,512),[[ya,o.value.isPregnant]]),f("span",null,b(y(s)==="en"?"Is Pregnant?":"  "),1)])]),o.value.isPregnant?(B(),q("div",xM,[f("label",null,[lt(b(y(s)==="en"?"Estimated Due Date":"  ")+" ",1),M[16]||(M[16]=f("span",{class:"required-indicator"},"*",-1))]),J(f("input",{type:"date","onUpdate:modelValue":M[4]||(M[4]=S=>o.value.estimatedDueDate=S),required:"",dir:y(s)==="ar"?"rtl":"ltr"},null,8,kM),[[me,o.value.estimatedDueDate]])])):he("",!0)])):he("",!0),f("div",DM,[f("label",null,b(y(s)==="en"?"Relevant Medical History (optional)":"    ()"),1),J(f("textarea",{"onUpdate:modelValue":M[5]||(M[5]=S=>o.value.medicalHistory=S),rows:"3"},null,512),[[me,o.value.medicalHistory]])]),f("div",PM,[f("label",null,b(y(s)==="en"?"Estimated Radiation Exposure in Past Year (mSv) - optional":"      (mSv) - "),1),J(f("input",{type:"number",step:"0.001",min:"0","onUpdate:modelValue":M[6]||(M[6]=S=>o.value.previousYearDose=S),placeholder:"e.g. 2.5",dir:y(s)==="ar"?"rtl":"ltr"},null,8,RM),[[me,o.value.previousYearDose,void 0,{number:!0}]])]),f("div",OM,[f("label",null,b(y(s)==="en"?"Current Symptoms (optional)":"  ()"),1),J(f("textarea",{"onUpdate:modelValue":M[7]||(M[7]=S=>o.value.currentSymptoms=S),rows:"3"},null,512),[[me,o.value.currentSymptoms]])]),f("h3",NM,b(y(s)==="en"?"Scan to Consider (optional)":"  ()"),1),f("div",FM,[f("label",null,b(y(s)==="en"?"Place of Scan":" "),1),J(f("select",{"onUpdate:modelValue":M[8]||(M[8]=S=>o.value.scanPlace=S),dir:y(s)==="ar"?"rtl":"ltr"},[f("option",MM,b(y(s)==="en"?"Select...":"..."),1),(B(),q(Je,null,nn(u,S=>f("option",{key:S.value,value:S.value},b(y(s)==="en"?S.en:S.ar),9,LM)),64))],8,VM),[[ct,o.value.scanPlace]])]),m.value?(B(),q("div",$M,[f("label",null,b(y(s)==="en"?"Please specify other place":"   "),1),J(f("input",{type:"text","onUpdate:modelValue":M[9]||(M[9]=S=>o.value.otherScanPlaceDescription=S),dir:y(s)==="ar"?"rtl":"ltr"},null,8,UM),[[me,o.value.otherScanPlaceDescription]])])):he("",!0),f("div",BM,[f("div",jM,[f("label",null,b(y(s)==="en"?"Scan Category":" "),1),J(f("select",{"onUpdate:modelValue":M[10]||(M[10]=S=>o.value.scanType=S),dir:y(s)==="ar"?"rtl":"ltr"},[f("option",zM,b(y(s)==="en"?"CT Scan":" "),1),f("option",HM,b(y(s)==="en"?"X-ray":" "),1)],8,qM),[[ct,o.value.scanType]])]),f("div",GM,[f("label",null,b(y(s)==="en"?"Scan Protocol":" "),1),J(f("select",{"onUpdate:modelValue":M[11]||(M[11]=S=>o.value.subScanType=S),dir:y(s)==="ar"?"rtl":"ltr"},[f("option",KM,b(y(s)==="en"?"Select...":"..."),1),(B(!0),q(Je,null,nn(d.value,S=>(B(),q("option",{key:S.value,value:S.value},b(y(s)==="en"?S.en:S.ar),9,YM))),128))],8,WM),[[ct,o.value.subScanType]])])]),h.value?(B(),q("div",QM,[f("label",null,b(y(s)==="en"?"Please specify scan protocol":"   "),1),J(f("input",{type:"text","onUpdate:modelValue":M[12]||(M[12]=S=>o.value.otherScanDescription=S),dir:y(s)==="ar"?"rtl":"ltr"},null,8,XM),[[me,o.value.otherScanDescription]])])):he("",!0),f("button",{type:"submit",class:"action-button",disabled:g.value},b(g.value?y(s)==="en"?"Getting Advice...":"   ...":y(s)==="en"?"Get Advice":"  "),9,JM)],32),v.value?(B(),q("div",ZM,b(v.value),1)):he("",!0),E.value?(B(),q("div",eL,[E.value.Warning?(B(),q("div",tL,[f("h4",null,b(y(s)==="en"?"Important Note":" "),1),f("p",nL,b(E.value.Warning),1)])):he("",!0),f("div",rL,[E.value.patientCalculatedMsv!==null?(B(),q("div",sL,[f("div",iL,[f("h4",null,b(y(s)==="en"?"Total Estimated Dose This Year":"    "),1),f("p",null,[f("strong",null,b(E.value.patientCalculatedMsv.toFixed(3))+" mSv",1)])]),f("div",{class:is(["msv-details overdose-status",{overdosed:R.value}])},[f("h4",null,b(y(s)==="en"?"Dose Safety Status":"  "),1),f("p",null,b(R.value?y(s)==="en"?"Above recommended safety limit! Proceed with caution.":"    !   .":y(s)==="en"?"Within safe limits.":"  ."),1)],2)])):he("",!0),f("div",oL,[f("h4",null,b(y(s)==="en"?"AI-Powered Advice":"   "),1),f("div",{innerHTML:A.value},null,8,aL)])])])):he("",!0),f("p",uL,[f("a",{href:"#",onClick:M[13]||(M[13]=st(S=>y(e).push("/signin"),["prevent"]))},b(y(s)==="en"?"Back to Sign In":"  "),1)])])])],8,mM))}},cL=bt(lL,[["__scopeId","data-v-f890ac89"]]),gl=N6({history:c6("/X-ray/"),routes:[{path:"/",name:"signup",component:Y5},{path:"/signin",name:"signin",component:yk},{path:"/dashboard",name:"dashboard",component:KN,meta:{requiresAuth:!0}},{path:"/recommend/:patientId?",name:"recommend",component:pR,meta:{requiresAuth:!0}},{path:"/recommend/guest",name:"recommendGuest",component:cL,meta:{requiresAuth:!1}},{path:"/patients",name:"patients",component:_N,meta:{requiresAuth:!0}},{path:"/profile",name:"profile",component:pM,meta:{requiresAuth:!0}},{path:"/resetpassword",name:"resetpassword",component:cF},{path:"/__/auth/handler",name:"firebaseAuthHandler",component:{render(){return Si("div")}},beforeEnter:(t,e,n)=>{n()}},{path:"/:catchAll(.*)",redirect:"/dashboard"},{path:"/__/auth/iframe",name:"firebaseAuthIframeHandler",component:{render(){return Si("div")}},beforeEnter:(t,e,n)=>{n()}}]});gl.beforeEach(async(t,e,n)=>{const r=wn();r.isAuthReady||await new Promise(a=>{const u=r.$subscribe((c,d)=>{d.isAuthReady&&(u(),a())})});const s=!!r.user;if(t.path.startsWith("/__/auth/handler")||t.path.startsWith("/__/auth/iframe")){n();return}console.log(`Navigating to: ${t.path} (name: ${t.name})`),console.log(`isAuthenticated: ${s}`);const o=["signup","signin","resetpassword","newpassword","recommendGuest"].includes(t.name);s?o?(console.log(`Redirecting authenticated user from ${t.name} to /dashboard.`),n("/dashboard")):(console.log(`Allowing authenticated access to ${t.path}.`),n()):o?(console.log(`Allowing unauthenticated access to ${t.name}.`),n()):(console.log(`Redirecting unauthenticated user from ${t.path} (requires auth) to /signin.`),n("/signin"))});var dL="firebase",fL="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ts(dL,fL,"app");/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const hL={prefix:"fas",iconName:"trash-can",icon:[448,512,[61460,"trash-alt"],"f2ed","M135.2 17.7C140.6 6.8 151.7 0 163.8 0L284.2 0c12.1 0 23.2 6.8 28.6 17.7L320 32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64S14.3 32 32 32l96 0 7.2-14.3zM32 128l384 0 0 320c0 35.3-28.7 64-64 64L96 512c-35.3 0-64-28.7-64-64l0-320zm96 64c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16z"]},pL=hL,mL={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160L0 416c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-96c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7-14.3 32-32 32L96 448c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 64z"]},gL=mL,_L={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},yL=_L,vL={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},bL={prefix:"fas",iconName:"file-medical",icon:[384,512,[],"f477","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-288-128 0c-17.7 0-32-14.3-32-32L224 0 64 0zM256 0l0 128 128 0L256 0zM160 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 48 48 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-48 0 0 48c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-48-48 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16l48 0 0-48z"]},EL={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},wL={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]};m7.add(vL,gL,pL,bL,EL,wL,yL);const AL={apiKey:"AIzaSyDA9buCeJRQzFDnbvwjYX1zyddEUpFw1k8",authDomain:"x-ray-calculator.firebaseapp.com",projectId:"x-ray-calculator",storageBucket:"x-ray-calculator.firebasestorage.app",messagingSenderId:"27717321225",appId:"1:27717321225:web:19367fffd750339ea3aed8",measurementId:"G-DV1QF183J8"},F2=cy(AL),n0=HI(F2),TL=pi(F2),kr=Pw(I5),IL=V6();kr.use(IL);kr.use(gl);kr.component("font-awesome-icon",St);const bf=Ae(null),V2=Ae(!1),To=wn();To.initAuth(n0);Fy(n0,t=>{if(bf.value=t?t.uid:null,To.user=t,To.isAuthenticated=!!t,V2.value=!0,t){const e=gl.currentRoute.value.name;["signup","signin","resetpassword","newpassword"].includes(e)&&gl.push("/dashboard")}else bf.value=null,To.user=null,To.isAuthenticated=!1});kr.provide("db",TL);kr.provide("auth",n0);kr.provide("currentUserId",bf);kr.provide("isAuthReady",V2);kr.provide("appId",typeof __app_id<"u"?__app_id:"default-app-id");kr.mount("#app");
